(this["webpackJsonptrellex-pwa"]=this["webpackJsonptrellex-pwa"]||[]).push([[0],{488:function(e,t,a){},489:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(25),c=a.n(s),o=a(29),i=a(10),l=a(45),d=a(226),u=a(16),b=a(3),p={boards:[],board:null,filterBy:{search:"",labels:[],members:[]},areLabelsExpanded:!1};var j=a(4),h=a.n(j),v=a(7),f=a(125),m=a.n(f),O="/api/",g=m.a.create({withCredentials:!0}),x=function(e,t){return N(e,"GET",t)},k=function(e,t){return N(e,"POST",t)},y=function(e,t){return N(e,"PUT",t)};function N(e){return w.apply(this,arguments)}function w(){return w=Object(v.a)(h.a.mark((function e(t){var a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"GET",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,g({url:"".concat(O).concat(t),method:a,data:n,params:"GET"===a?n:null});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&sessionStorage.clear(),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])}))),w.apply(this,arguments)}var C="loggedinUser",D={login:function(e){return S.apply(this,arguments)},logout:function(){return A.apply(this,arguments)},signup:function(e){return M.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem(C)||"null")},getUsers:function(){return T.apply(this,arguments)}};function T(){return(T=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x("user"),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/login",t);case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",I(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("auth/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return sessionStorage.setItem(C,JSON.stringify(e)),e}var E={loggedinUser:D.getLoggedinUser(),users:[]};var P={currTaskDetails:null,isDragDisabled:!1,popover:{pos:{posX:-1,posY:-1,type:""},isOpen:!1,isMenu:!1}};var B=Object(l.c)({boardModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0,n=t;switch(a.type){case"SET_BOARDS":n=Object(b.a)(Object(b.a)({},t),{},{boards:a.boards});break;case"SET_BOARD":n=Object(b.a)(Object(b.a)({},t),{},{board:a.board});break;case"SAVE_BOARD":e=t.boards.map((function(e){return e._id===a.board._id?a.board:e})),n=Object(b.a)(Object(b.a)({},t),{},{boards:e,board:Object(b.a)({},a.board)});break;case"ADD_BOARD":n=Object(b.a)(Object(b.a)({},t),{},{boards:[].concat(Object(u.a)(t.boards),[a.board])});break;case"SET_FILTER":n=Object(b.a)(Object(b.a)({},t),{},{filterBy:Object(b.a)(Object(b.a)({},t.filterBy),a.filterBy)});break;case"REMOVE_BOARD":e=t.boards.filter((function(e){return e._id!==a.boardId})),n=Object(b.a)(Object(b.a)({},t),{},{boards:e});break;case"TOGGLE_LABELS":n=Object(b.a)(Object(b.a)({},t),{},{areLabelsExpanded:!t.areLabelsExpanded})}return n},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=e;switch(t.type){case"SET_USER":a=Object(b.a)(Object(b.a)({},e),{},{loggedinUser:t.user});break;case"SET_USERS":a=Object(b.a)(Object(b.a)({},e),{},{users:t.users})}return a},appModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TASK_DETAILS":return Object(b.a)(Object(b.a)({},e),{},{currTaskDetails:Object(b.a)({},t.currTaskDetails)});case"TOGGLE_DRAGGING":return Object(b.a)(Object(b.a)({},e),{},{isDragDisabled:!e.isDragDisabled});case"SET_POSITION":var a=Object(b.a)(Object(b.a)({},e.popover),{},{pos:Object(b.a)({},t.pos)});return Object(b.a)(Object(b.a)({},e),{},{popover:a});case"TOGGLE_POPOVER":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:!e.popover.isOpen})});case"SET_POPOVER":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:t.isOpen})});case"SET_POPOVER_MENU":return Object(b.a)(Object(b.a)({},e),{},{popover:Object(b.a)(Object(b.a)({},e.popover),{},{isOpen:!1,isMenu:t.isMenu})});default:return e}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,L=Object(l.e)(B,U(Object(l.a)(d.a))),_=a(6),R=a(8),F=a(12),G=a(11),Y=a(24),X=a.p+"static/media/hero.e8878a54.png",H=a(0),W=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this;return Object(H.jsx)("section",{className:"homepage",children:Object(H.jsxs)("div",{className:"hero flex main-layout",children:[Object(H.jsxs)("div",{className:"hero-content flex column",children:[Object(H.jsxs)("h1",{children:[Object(H.jsx)("span",{children:"Trellex"})," helps teams move work forward."]}),Object(H.jsx)("p",{children:"Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique\u2014accomplish it all with Trellex."}),Object(H.jsx)("button",{onClick:function(){return e.props.history.push("/workspace")},children:"To Demo"})]}),Object(H.jsx)("div",{children:Object(H.jsx)("img",{src:X,className:"hero-img",alt:""})})]})})}}]),a}(n.Component),V=a(227),z=a.n(V),J=function(){var e=null,t={setup:function(){e=z()("")},on:function(t,a){e.on(t,a)},off:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(a?e.off(t,a):e.removeAllListeners(t))},emit:function(t,a){e.emit(t,a)},terminate:function(){e=null}};return t}();J.setup();var K=a(69),q=a.n(K);function Z(e){var t=e.board,a=e.saveBoard,n=function(){var e=Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=Object(b.a)({},t)).isFavorite=!n.isFavorite;try{a(n)}catch(r){console.log("error setting favorite",r)}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)("article",{className:"board-preview",children:[Object(H.jsxs)(o.b,{to:"/board/".concat(t._id),children:[Object(H.jsx)("div",{className:"board-content",style:{background:t.style.bgImg?"url(".concat(t.style.bgImg,")"):t.style.bgClr}}),Object(H.jsx)("p",{className:"board-title",children:t.title})]}),Object(H.jsx)("div",{className:"hover-actions flex ".concat((null===t||void 0===t?void 0:t.isFavorite)?"show":""),children:(null===t||void 0===t?void 0:t.isFavorite)?Object(H.jsx)(q.a,{className:"action-icon",style:{color:"gold"},onClick:n}):Object(H.jsx)(q.a,{className:"action-icon",onClick:n})})]})}var Q=a(15);function $(e){var t=e.setBgClr,a=e.setBgImg,r=(e.bgClr,e.bgImg,Object(n.useState)("linear-gradient(to bottom, #000000, #434343")),s=Object(Q.a)(r,2),c=s[0],o=s[1];return Object(H.jsx)("div",{className:"palettes",children:Object(H.jsxs)("div",{className:"clrs",children:[["linear-gradient(to bottom, #000000, #434343)","linear-gradient(to right, #2980b9, #2c3e50)","linear-gradient(to right, #3494e6, #ec6ead)","linear-gradient(to left, #2f7336, #aa3a38)","linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)","linear-gradient(to bottom, #e52d27, #b31217)"].map((function(e){return Object(H.jsx)("label",{className:"flex align-center justify-center palette-icon",style:{background:e,border:c===e?"2px solid white":""},name:"label-color",htmlFor:"color-".concat(e),children:Object(H.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:function(e){t(e.target.value),a(""),o(e.target.value)}})},e)})),Object(H.jsx)("div",{className:"imgs",children:["https://www.incimages.com/uploaded_files/image/1920x1080/getty_509107562_2000133320009280346_351827.jpg","http://all4desktop.com/data_images/original/4238112-background.jpg","https://c.pxhere.com/photos/4f/ee/candy_toppings_sweet_colorful_sugar-883692.jpg!d","http://www.pngmagic.com/product_images/creative-banner-design-background-images.jpg","https://cdn.wallpapersafari.com/22/29/fdqrYk.jpg","https://img2.goodfon.com/wallpaper/nbig/2/73/texture-lines-colours-cveta.jpg"].map((function(e){return Object(H.jsx)("label",{className:"flex align-center justify-center palette-icon",style:{background:"url(".concat(e,")"),backgroundSize:"cover",border:c===e?"2px solid white":""},name:"label-color",htmlFor:"color-".concat(e),children:Object(H.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:function(e){a(e.target.value),o(e.target.value)}})},e)}))})]})})}var ee=a(128),te=a.n(ee);function ae(e){var t=Object(n.useState)("linear-gradient(to bottom, #000000, #434343)"),a=Object(Q.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(Q.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)(""),u=Object(Q.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(!1),h=Object(Q.a)(j,2),v=h[0],f=h[1];return Object(H.jsx)("article",{className:"board-preview-add ".concat(e.boardMode?"on-board":""),children:Object(H.jsx)("div",{className:"board-content flex column",style:{background:"".concat(i?"url(".concat(i,")"):r," center")},children:v||e.boardMode?Object(H.jsxs)("div",{className:"add-active fade-in",children:[Object(H.jsxs)("div",{className:"title-box flex",children:[Object(H.jsxs)("form",{children:[Object(H.jsx)("input",{className:"board-title",value:b,onChange:function(e){return p(e.target.value)},placeholder:"New board title"}),Object(H.jsx)("button",{onClick:function(t){t.preventDefault(),b.trim()&&(e.onAdd(b,r,i),s("linear-gradient(to bottom, #000000, #434343)"),l(""),p(""),f())},children:"Create"})]}),Object(H.jsx)("button",{className:"closer",onClick:function(){return e.boardMode?e.setCreateShown(!1):f(!v)},children:Object(H.jsx)(te.a,{})})]}),Object(H.jsx)("div",{className:"color-box",children:Object(H.jsx)($,{bgClr:r,setBgClr:s,setBgImg:l})})]}):Object(H.jsx)("div",{className:"add-inactive",onClick:function(){return f(!v)},children:Object(H.jsx)("p",{children:"Add a board"})})})})}function ne(e){var t=e.boards,a=e.onAdd,n=e.onRemove;return Object(H.jsxs)("div",{className:"board-list",children:[t&&t.map((function(t,a){return Object(H.jsx)(Z,{board:t,onRemove:n,saveBoard:e.saveBoard},a)})),!e.starred&&Object(H.jsx)(ae,{onAdd:a})]})}a(340);var re=a(92),se=a.n(re);function ce(){return Object(H.jsx)(se.a,{type:"Grid",color:"#0079bf",height:100,width:100,timeout:3e3,className:"loader fade-in"})}var oe={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],a="";for(;e>0;)e--,a+=t[Math.floor(Math.random()*t.length)]+" ";return a},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;return new Promise((function(t){setTimeout(t,e)}))},timeSince:function(e){var t=Math.floor((new Date-e)/1e3),a=t/31536e3;if(a>1)return 1===Math.floor(a)?"a year ago":Math.floor(a)+" years ago";if((a=t/2592e3)>1)return 1===Math.floor(a)?"a month ago":Math.floor(a)+" months ago";if((a=t/86400)>1)return 1===Math.floor(a)?"a day ago":Math.floor(a)+" days ago";if((a=t/3600)>1)return 1===Math.floor(a)?"an hour ago":Math.floor(a)+" hours ago";if((a=t/60)>1)return 1===Math.floor(a)?"an minute ago":Math.floor(a)+" minutes ago";return 0===Math.floor(t)?"a few seconds ago":Math.floor(t)+" seconds ago"}};var ie="IwjSlLYB-kEXeOlDvuifDixGryX1CK64CwapeKeJC8w",le={query:function(){return de.apply(this,arguments)},getById:be,save:je,updateTask:function(e,t,a){var n=e.groups.find((function(e){return e.id===t.id})),r=e.groups.indexOf(n),s=e.groups[r].tasks.find((function(e){return e.id===a.id})),c=e.groups[r].tasks.indexOf(s);return e.groups[r].tasks[c]=a,Object(b.a)({},e)},addTask:function(e,t,a,n,r){return ve.apply(this,arguments)},removeTask:function(e,t,a){return fe.apply(this,arguments)},addGroup:function(e){return me.apply(this,arguments)},removeGroup:function(e,t){return Oe.apply(this,arguments)},createActivity:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={id:t.id,title:t.title},r={id:oe.makeId(),createdAt:Date.now(),byMember:D.getLoggedinUser(),task:n,type:e,txt:a};return r},updateTaskByIds:function(e,t,a){return ge.apply(this,arguments)},queryPhotos:function(){return ue.apply(this,arguments)}};function de(){return(de=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return ue=Object(v.a)(h.a.mark((function e(){var t,a,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"random",e.next=3,m.a.get("https://api.unsplash.com/search/photos/?query=".concat(t,"&client_id=").concat(ie));case 3:return a=e.sent,e.abrupt("return",a.data.results);case 5:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function be(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("board/".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return he.apply(this,arguments)}function he(){return(he=Object(v.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return e.next=3,y("board",t);case 3:return a=e.sent,J.emit("board-change"),e.abrupt("return",a);case 8:return n={title:t.title,createdAt:Date.now(),createdBy:D.getLoggedinUser(),groups:[],tasks:[],labels:[],activities:[],members:[],style:{bgClr:t.style.bgClr,bgImg:t.style.bgImg}},e.next=11,k("board",n);case 11:return r=e.sent,J.emit("board-change"),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=Object(v.a)(h.a.mark((function e(t,a,n,r,s){var c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return c={id:"t-".concat(oe.makeId()),title:t,description:"",createdAt:Date.now(),byMember:D.getLoggedinUser(),style:{},labelIds:[],members:[],media:{},attachments:r||s?[{id:oe.makeId(),name:"Media url",url:r||s,createdAt:Date.now(),isWeb:!0}]:[]},r?c.media.audioUrl=r:s&&(c.media.videoUrl=s),e.next=6,be(a);case 6:return o=e.sent,i=o.groups.findIndex((function(e){return e.id===n})),o.groups[i].tasks.push(c),je(o),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(v.a)(h.a.mark((function e(t,a,n){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be(t);case 3:return r=e.sent,s=r.groups.findIndex((function(e){return a===e.id})),r.groups[s].tasks=r.groups[s].tasks.filter((function(e){return n!==e.id})),je(r),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function me(){return me=Object(v.a)(h.a.mark((function e(t){var a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"Untitled group",t){e.next=3;break}return e.abrupt("return");case 3:return n={id:"g-".concat(oe.makeId()),title:a,tasks:[],style:{bgImg:"",bgClr:""}},e.prev=4,e.next=7,be(t);case 7:return(r=e.sent).groups.push(n),je(r),e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(4),console.log("couldnt add group",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,13]])}))),me.apply(this,arguments)}function Oe(){return(Oe=Object(v.a)(h.a.mark((function e(t,a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be(t);case 3:return(n=e.sent).groups=n.groups.filter((function(e){return e.id!==a})),je(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ge(){return(ge=Object(v.a)(h.a.mark((function e(t,a,n){var r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t);case 2:return r=e.sent,s=r.groups.findIndex((function(e){return a===e.id})),c=r.groups[s].tasks.findIndex((function(e){return e.id===n.id})),r.groups[s].tasks[c]=n,je(r),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.query();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("cant set boards",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le.getById(e,t);case 3:(r=a.sent)&&n({type:"SET_BOARD",board:r}),a.next=11;break;case 7:throw a.prev=7,a.t0=a.catch(0),console.log("cant set board",a.t0),Error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:"SAVE_BOARD",board:e}),t.next=4,le.save(e);case 4:J.emit("board-change"),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("cant save board",t.t0),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"new board",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",a=arguments.length>2?arguments[2]:void 0;return function(){var n=Object(v.a)(h.a.mark((function n(r){var s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={title:e,style:{bgClr:t,bgImg:a}},n.prev=1,n.next=4,le.save(s);case 4:return c=n.sent,r({type:"ADD_BOARD",board:c}),n.abrupt("return",c);case 9:n.prev=9,n.t0=n.catch(1),console.log("cant add board",n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},we=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(){var s=Object(v.a)(h.a.mark((function s(c){var o;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,le.addTask(e,t,a,n,r);case 3:o=s.sent,c({type:"SAVE_BOARD",board:o}),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log("cant add task",s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(e){return s.apply(this,arguments)}}()},Ce=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return function(){var r=Object(v.a)(h.a.mark((function r(s){var c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.activities.push(le.createActivity(a,t,n)),r.next=4,le.save(e);case 4:c=r.sent,s({type:"SAVE_BOARD",board:c}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log("cant update task details",r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},De=function(e,t,a){return function(){var n=Object(v.a)(h.a.mark((function n(r){var s;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s=le.updateTask(e,t,a),r({type:"SAVE_BOARD",board:s}),n.next=5,le.save(s);case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("cant update task details",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Te=function(e,t,a){return function(){var n=Object(v.a)(h.a.mark((function n(r){var s,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,le.updateTaskByIds(e,t,a);case 3:return s=n.sent,n.next=6,le.save(s);case 6:c=n.sent,r({type:"SAVE_BOARD",board:c}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("cant update task details",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},Se=function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}},Me=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){J.on("new-board-added",e.props.loadBoards),e.props.loadBoards()},e.addBoard=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"black",r=s.length>2&&void 0!==s[2]?s[2]:"",a&&a.trim()){t.next=4;break}return t.abrupt("return");case 4:try{e.props.addBoard(a,n,r),J.emit("new-board")}catch(c){console.log("problem adding board",c)}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){J.off("new-board-added")}},{key:"render",value:function(){var e=this.props.boards;return Object(H.jsxs)("section",{className:"workspace-page main-layout flex column",children:[Object(H.jsx)("h1",{children:"Your Workspace"}),Object(H.jsx)("h2",{className:"flex align-center",children:this.props.boards.some((function(e){return e.isFavorite}))&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(q.a,{style:{height:"35px",width:"35px"}})," Starred boards"]})}),Object(H.jsxs)("div",{className:"board-lists flex column",children:[Object(H.jsx)(ne,{starred:!0,boards:e.filter((function(e){return e.isFavorite})),onAdd:this.addBoard,onRemove:this.props.removeBoard,saveBoard:this.props.saveBoard}),e.length?Object(H.jsx)(ne,{boards:e.filter((function(e){return!e.isFavorite})),onAdd:this.addBoard,onRemove:this.props.removeBoard,saveBoard:this.props.saveBoard}):Object(H.jsx)(ce,{})]})]})}}]),a}(n.Component);var Ae={loadBoards:xe,addBoard:Ne,removeBoard:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,le.remove(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("cant remove board",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},saveBoard:ye},Ie=Object(i.b)((function(e){return{boards:e.boardModule.boards}}),Ae)(Me),Ee=a(54),Pe=a.n(Ee);var Be={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Be.emit("show-user-msg",{txt:e,type:t})}function Le(e){Ue(e,"danger")}function _e(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),Le("Cannot login"),console.log("Cannot login",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}window.myBus=Be,window.showUserMsg=Ue;var Re={onLogout:function(){return function(e){D.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){Le("Cannot logout"),console.log("Cannot logout",e)}))}},saveBoard:ye},Fe=Object(Y.e)(Object(i.b)((function(e){var t=e.userModule,a=e.boardModule;return{user:t.loggedinUser,board:a.board}}),Re)((function(e){var t,a=e.member,n=e.togglePopOpen,r=e.isInHeader,s=e.isInBoardList,c=e.onLogout,o=(e.user,e.board),i=e.saveBoard,l=e.history,d=function(){var e=Object(v.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(JSON.stringify(o)),r=t.members.findIndex((function(e){return e._id===a._id})),t.members.splice(r,1),e.prev=3,e.next=6,i(t);case 6:n(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("error when deleting user from board",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"popup-container flex column",children:[Object(H.jsx)("div",{className:"pop-overlay",style:{position:"fixed",top:0,left:0,inset:0,height:"100vh",width:"100%",backgroundColor:"transparent",zIndex:4},onClick:function(){return n(!1)}}),Object(H.jsxs)("div",{className:"wrap  ".concat(r?"header":""),children:[Object(H.jsxs)("div",{className:"member-popup",children:[(null===a||void 0===a?void 0:a.imgUrl)?Object(H.jsx)("img",{src:a.imgUrl,className:"member-img",alt:"member-img"}):Object(H.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(H.jsx)("p",{className:"member-letter preview",children:(null===a||void 0===a||null===(t=a.fullname)||void 0===t?void 0:t[0].toUpperCase())||""})}),Object(H.jsxs)("div",{className:"member-info flex column",children:[Object(H.jsx)("p",{className:"fullname",children:a.fullname}),Object(H.jsx)("p",{className:"username",children:a.username})]})]}),Object(H.jsxs)("div",{className:"member-footer",children:[r&&Object(H.jsx)("p",{className:"logout",onClick:function(){c(),l.push("/workspace/")},children:"Logout"}),s&&Object(H.jsx)("p",{className:"logout",onClick:d,children:"Remove from board"})]})]})]})}))),Ge=function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"SET_TASK_DETAILS",currTaskDetails:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ye=function(){return function(e){e({type:"TOGGLE_DRAGGING"})}},Xe=function(e){var t=e.pos,a=e.type;return function(e){e({type:"SET_POSITION",pos:Object(b.a)(Object(b.a)({},t),{},{type:a})})}},He=function(){return function(e){e({type:"TOGGLE_POPOVER"})}},We=function(e){return function(t){t({type:"SET_POPOVER",isOpen:e})}},Ve=function(e){return function(t){t({type:"SET_POPOVER_MENU",isMenu:e})}};var ze={setCurrTaskDetails:Ge,setPosition:Xe,togglePopover:He,setPopoverMenu:Ve},Je=Object(i.b)(null,ze)((function(e){var t,a=e.member,r=e.isInPreview,s=e.isEditMode,c=e.isInHeader,o=e.isInBoardList,i=e.task,l=e.setPosition,d=e.setCurrTaskDetails,u=e.togglePopover,b=e.setPopoverMenu,p=e.onLogout,j=Object(n.useState)(!1),h=Object(Q.a)(j,2),v=h[0],f=h[1];return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("article",{className:"member-wrapper",onClick:function(e){if(e.preventDefault(),!s)return r?(d(i),l({pos:{pageX:e.pageX,pageY:e.pageY},type:"MEMBERS"}),b(!1),void u()):void f(!v)},children:(null===a||void 0===a?void 0:a.imgUrl)?Object(H.jsx)("img",{src:a.imgUrl,className:"member-img",alt:a.fullname[0].toUpperCase()}):Object(H.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(H.jsx)("p",{className:"member-letter ".concat(r?"preview":""),children:(null===a||void 0===a||null===(t=a.fullname)||void 0===t?void 0:t[0].toUpperCase())||""})})}),v&&Object(H.jsx)(Fe,{member:a,togglePopOpen:f,isInPreview:r,isInHeader:c,isInBoardList:o,onLogout:p})]})}));var Ke={setPosition:Xe,togglePopover:He,setPopoverMenu:Ve},qe=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails}}),Ke)((function(e){var t=e.members,a=e.isInPreview,n=e.isInDetails,r=e.isInHeader,s=e.togglePopover,c=e.isEditMode,o=e.isInBoardList,i=e.task;return Object(H.jsxs)("div",{className:"members ".concat(a?"preview":"").concat(r?"in-header":""," ").concat((null===i||void 0===i?void 0:i.members.length)>=5?"many":""),children:[t&&t.map((function(e,t){return Object(H.jsx)(Je,{isInPreview:a,isEditMode:c,isInHeader:r,isInBoardList:o,member:e,task:i},t)})),n&&Object(H.jsx)("button",{className:"secondary-btn",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"MEMBERS"}),s()},children:Object(H.jsx)(Pe.a,{})})]})})),Ze=a(63),Qe=a.n(Ze);function $e(e){var t=e.member,a=e.selectedMembersIds,n=e.toggleMemberCheck;return Object(H.jsxs)("li",{className:"member-pop-over-preview flex",onClick:function(){n(t)},children:[t.imgUrl&&Object(H.jsx)("img",{className:"profile-picture",style:{marginInlineEnd:"8px"},src:t.imgUrl,alt:"member"}),!t.imgUrl&&Object(H.jsx)("div",{className:"profile-picture",style:{background:"#dfe1e6",marginInlineEnd:"8px"},children:Object(H.jsx)("p",{className:"profile-picture letter",children:t.fullname[0]})}),Object(H.jsx)("span",{children:t.fullname}),a.includes(t._id)&&Object(H.jsx)("span",{className:"icon-check flex",children:Object(H.jsx)(Qe.a,{})})]})}var et=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleSearch=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.boardUsers=[],e.addUserToBoard=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,delete a.password,c=Object(b.a)(Object(b.a)({},r),{},{members:[].concat(Object(u.a)(r.members),[a])}),t.next=5,s(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilteredUsers=function(){var t=e.props,a=t.board;return t.users.filter((function(e){return a.members.every((function(t){return t._id!==e._id}))}))||[]},e.filteredUsers=e.getFilteredUsers(),e.componentDidUpdate=function(t){e.props.board.members.length!==t.board.members.length&&(e.filteredUsers=e.getFilteredUsers(),e.forceUpdate())},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.users,r=t.setMembersPopup,s=this.state.search;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"overlay show",onClick:function(){return r(!1)}}),Object(H.jsx)("div",{title:a,className:" board-member-add flex column",children:Object(H.jsxs)("div",{className:"members-popover",children:[Object(H.jsx)("h4",{children:"ADD TO BOARD"}),Object(H.jsx)("input",{type:"search",placeholder:"Search members",onChange:this.handleSearch}),Object(H.jsx)("ul",{className:"clean-list flex column",children:this.filteredUsers.length>0?this.filteredUsers.filter((function(e){return e.fullname.toLowerCase().includes(s.toLowerCase())})).map((function(t,a){var r;return Object(H.jsx)($e,{toggleMemberCheck:function(){return e.addUserToBoard(t)},member:t,selectedMembersIds:(null===(r=e.boardUsers)||void 0===r?void 0:r.map((function(e){return e._id})))||[],members:n},a)})):Object(H.jsx)("p",{children:"No members available"})})]})})]})}}]),a}(n.Component);var tt={saveBoard:ye},at=Object(i.b)((function(e){return{users:e.userModule.users,popover:e.appModule.popover,board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),tt)(et),nt=a(131),rt=a.n(nt),st=a(231),ct=a.n(st),ot=a(230),it=a.n(ot),lt=a(528);var dt={saveBoard:ye,togglePopover:He,setPosition:Xe,setPopoverMenu:Ve,setFilterBy:Se};var ut=Object(i.b)((function(e){return{board:e.boardModule.board,filterBy:e.boardModule.filterBy}}),dt)((function(e){var t=e.board,a=e.setFilterBy,r=Object(n.useState)(!1),s=Object(Q.a)(r,2),c=s[0],i=s[1],l=Object(n.useState)(t.title),d=Object(Q.a)(l,2),u=d[0],p=d[1],j=Object(n.useState)(9.5*t.title.length),f=Object(Q.a)(j,2),m=f[0],O=f[1],g=Object(n.useState)(!1),x=Object(Q.a)(g,2),k=x[0],y=x[1],N=Object(n.useRef)();Object(n.useEffect)((function(){var e,t;N&&"number"===typeof(null===(e=N.current)||void 0===e?void 0:e.offsetWidth)&&O(null===(t=N.current)||void 0===t?void 0:t.offsetWidth)}),[u]);var w=function(){var a=Object(v.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=Object(b.a)({},t)).isFavorite=!n.isFavorite;try{e.saveBoard(n)}catch(r){console.log("error setting favorite",r)}case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return t?Object(H.jsxs)("header",{className:"main-header board-header flex align-center",children:[Object(H.jsxs)("div",{className:"header-btn-container flex",children:[c?Object(H.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(H.jsx)("span",{ref:N,children:u}),Object(H.jsx)("input",{autoFocus:!0,className:"title ".concat(!(null===u||void 0===u?void 0:u.length)&&"height-adjust"),onBlur:function(){i(!1),function(){var a=Object(b.a)({},t);a.title=u.trim(),p(u.trim()),e.saveBoard(a)}()},value:u,onChange:function(e){!function(e){p(e.target.value)}(e)},style:{width:m+10,minWidth:"40px"}})]}):Object(H.jsx)("h2",{className:"title",onClick:function(){return i(!0)},children:u}),Object(H.jsxs)("div",{className:"header-btn-container flex",children:[Object(H.jsx)("button",{className:"header-btn star",children:t.isFavorite?Object(H.jsx)(q.a,{className:"icon star gold",onClick:w}):Object(H.jsx)(q.a,{className:"icon star",onClick:w})}),(null===t||void 0===t?void 0:t.members)&&Object(H.jsx)(qe,{members:t.members,isInBoardList:!0})]}),Object(H.jsx)("button",{className:"header-btn",onClick:function(){return y(!k)},children:Object(H.jsx)(it.a,{className:"icon"})}),k&&Object(H.jsx)(at,{setMembersPopup:y})]}),Object(H.jsxs)("div",{className:"header-btn-container flex ",children:[Object(H.jsx)(o.b,{to:"/board/".concat(t._id,"/dashboard"),className:"clean-link",children:Object(H.jsxs)("button",{className:"header-btn dash",children:[Object(H.jsx)(ct.a,{className:"icon"}),Object(H.jsx)("span",{className:"btn-txt",children:"Dashboard"})]})}),(e.filterBy.search||e.filterBy.labels.length>0||e.filterBy.members.length>0)&&Object(H.jsxs)("div",{className:"flex results",children:[Object(H.jsx)("button",{className:"header-btn btn-results",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"BOARD_FILTER_CARDS"}),e.setPopoverMenu(!0),e.togglePopover(!1)},children:"Change Filter"}),Object(H.jsx)("span",{className:"flex",style:{alignItems:"center",backgroundColor:"#61bd4f"},children:Object(H.jsx)(lt.a,{className:"icon clean-btn",onClick:function(e){e.stopPropagation(),a({labels:[],members:[],search:""})}})})]}),Object(H.jsxs)("button",{className:"header-btn last-in-row menu",onClick:function(t){e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"BOARD_SHOW_MENU"}),e.setPopoverMenu(!0),e.togglePopover(!1)},children:[Object(H.jsx)(rt.a,{className:"icon menu"}),Object(H.jsx)("span",{className:"btn-txt",children:"Show menu"})]})]})]}):Object(H.jsx)("h2",{children:"Loading"})}));var bt={addGroup:function(e,t){return function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le.addGroup(e,t);case 3:r=a.sent,n({type:"SAVE_BOARD",board:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("cant add group",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}},pt=Object(Y.e)(Object(i.b)(null,bt)((function(e){var t=e.match.params.boardId,a=Object(n.useState)(!1),r=Object(Q.a)(a,2),s=r[0],c=r[1],o=Object(n.useState)(""),i=Object(Q.a)(o,2),l=i[0],d=i[1],u=Object(n.useState)("Add list"),b=Object(Q.a)(u,2),p=b[0],j=b[1],f=function(){s&&d(""),c(!s)},m=function(){var a=Object(v.a)(h.a.mark((function a(){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,l.trim()){a.next=3;break}return a.abrupt("return");case 3:return j(Object(H.jsx)(se.a,{type:"Grid",color:"white",height:14,width:14})),a.next=6,e.addGroup(t,l.trim());case 6:j("Add list"),d(""),f(),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),j("Add list");case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(){return a.apply(this,arguments)}}();return Object(H.jsx)("div",{className:"add-group-wrapper",children:s?Object(H.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(H.jsxs)("div",{className:"add-group-active group-details flex column scale-up-ver-top",children:[Object(H.jsx)("input",{value:l,placeholder:"Enter list title...",onChange:function(e){return d(e.target.value)},className:"group-preview",autoFocus:!0}),Object(H.jsxs)("div",{className:"group-btns flex align-center",children:[Object(H.jsx)("button",{onClick:m,className:"group-btn save-group-title-btn",children:p}),Object(H.jsx)("button",{className:"group-btn close-group-title-btn",onClick:f,children:Object(H.jsx)(lt.a,{})})]})]})}):Object(H.jsx)("article",{className:"group-details add-new",onClick:function(){f()},children:Object(H.jsxs)("div",{className:"flex align-center",children:[Object(H.jsx)(Pe.a,{className:"icon"}),"Add a list"]})})})})));var jt={toggleExpandLabels:function(){return function(e){e({type:"TOGGLE_LABELS"})}}},ht=Object(i.b)((function(e){return{areLabelsExpanded:e.boardModule.areLabelsExpanded}}),jt)((function(e){var t=e.labelIds,a=e.boardLabels,n=e.areLabelsExpanded,r=e.toggleExpandLabels;return Object(H.jsx)("div",{className:"task-labels-container flex",children:t&&t.map((function(e,t){var s=a.find((function(t){return t.id===e}));return s?Object(H.jsx)("div",{className:"label flex justify-center ".concat(n?"expanded":""),style:{background:s.color},onClick:function(e){e.preventDefault(),e.stopPropagation(),r()},children:Object(H.jsx)("span",{children:s.title})},t):null}))})})),vt=function(e){return"0/0"===e.txt?Object(H.jsx)(H.Fragment,{}):Object(H.jsxs)("span",{className:" flex align-center ".concat(e.isDone?"checklist done checklist":""),children:[e.icon,e.txt&&Object(H.jsx)("p",{children:e.txt})]})},ft=a(232),mt=a.n(ft),Ot=a(174),gt=a.n(Ot),xt=a(56),kt=a.n(xt),yt={saveBoard:ye};var Nt=Object(i.b)((function(e){return{board:e.boardModule.board}}),yt)((function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(e.isDone),o=Object(Q.a)(c,2),i=o[0],l=o[1],d=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.stopPropagation(),l(!i),n=Object(b.a)({},e.board),r=n.groups.findIndex((function(t){return e.groupId===t.id})),s=n.groups[r].tasks.findIndex((function(t){return e.taskId===t.id})),n.groups[r].tasks[s].isDone=!e.isDone,t.prev=7,t.next=10,e.saveBoard(n);case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(7),console.log("cant change task status",t.t0),l(!i);case 16:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){i!==e.isDone&&l(e.isDone)}),[e.isDone,i]),Object(H.jsxs)("span",{className:"due-date ".concat(!i&&e.dueDate<Date.now()?"overdue":"").concat(i?"done":""," "),onMouseEnter:function(){return s(!e.noHover)},onMouseLeave:function(){return s(!1)},onClick:d,children:[!i&&Object(H.jsx)(H.Fragment,{children:r?Object(H.jsx)(gt.a,{className:"icon"}):Object(H.jsx)(mt.a,{className:"icon"})}),i&&Object(H.jsx)(H.Fragment,{children:r?Object(H.jsx)(gt.a,{className:"icon"}):Object(H.jsx)(kt.a,{className:"icon"})}),Object(H.jsx)("p",{children:new Date(e.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]})})),wt=a(93),Ct=a.n(wt),Dt=a(94),Tt=a.n(Dt),St=a(40),Mt=a.n(St),At=a(138),It=a.n(At),Et=a(233),Pt=a.n(Et),Bt=a(132),Ut=a.n(Bt),Lt=a(133),_t=a.n(Lt),Rt=a(134),Ft=a.n(Rt),Gt=a(136),Yt=a.n(Gt),Xt=a(135),Ht=a.n(Xt),Wt=a(137),Vt=a.n(Wt),zt=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedAction:""},e.componentWillUnmount=function(){e.props.isPopoverOpen&&e.props.togglePopover(),e.setState({selectedAction:""})},e.setActiveAction=function(t){t.stopPropagation(),e.setState({selectedAction:t.target.parentElement.dataset.type})},e.sendToArchive=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(b.a)({},e.props.task)).isArchive=!0,t.next=4,e.props.addActivity(e.props.board,e.props.task,"add-to-archive",a.title);case 4:return t.prev=4,t.next=7,e.props.updateTask(e.props.boardId,e.props.groupId,a);case 7:e.props.toggleMenu(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log("error when sending to archive",t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])}))),e.popoverDispatch=function(t,a){e.props.task.style=e.props.task.style?e.props.task.style:e.props.task.style={},e.props.setCurrTaskDetails(e.props.task),e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:a}),e.props.togglePopover()},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.menuPos,n=t.toggleMenu,r=t.taskUrl;return Object(H.jsxs)("div",{className:"task-actions flex column slide-in-left",style:a,children:[Object(H.jsx)(o.b,{to:r,onClick:n,className:"clean-link",children:Object(H.jsxs)("button",{children:[Object(H.jsx)(Pt.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Open card"})]})}),Object(H.jsxs)("button",{className:"".concat("labels"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"labels",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"LABELS")},children:[Object(H.jsx)(Ut.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Edit labels"})]}),Object(H.jsxs)("button",{className:"".concat("members"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"members",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"MEMBERS")},children:[Object(H.jsx)(_t.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Change members"})]}),Object(H.jsxs)("button",{className:"".concat("cover"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"cover",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"COVER")},children:[Object(H.jsx)(Ft.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Change cover"})]}),Object(H.jsxs)("button",{className:"".concat("move"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"move",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"MOVE")},children:[Object(H.jsx)(Ht.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Move"})]}),Object(H.jsxs)("button",{className:"".concat("copy"===this.state.selectedAction&&this.props.isPopoverOpen?"active":""),"data-type":"copy",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"COPY")},children:[Object(H.jsx)(Yt.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Copy"})]}),Object(H.jsxs)("button",{className:"".concat(("date"===this.state.selectedAction&&this.props.isPopoverOpen,"")),"data-type":"date",onClick:function(t){e.setActiveAction(t),e.popoverDispatch(t,"DATE")},children:[Object(H.jsx)(Vt.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Edit date"})]}),Object(H.jsxs)("button",{onClick:this.sendToArchive,children:[Object(H.jsx)(It.a,{className:"action-icon"}),Object(H.jsx)("p",{children:"Archive"})]})]})}}]),a}(n.Component),Jt={updateTask:Te,setPosition:Xe,setCurrTaskDetails:Ge,togglePopover:He,addActivity:Ce},Kt=Object(i.b)((function(e){return{isPopoverOpen:e.appModule.popover.isOpen,board:e.boardModule.board}}),Jt)(zt);var qt={updateTask:Te,addActivity:Ce};var Zt=Object(i.b)((function(e){return{board:e.boardModule.board}}),qt)((function(e){var t=e.task,a=e.groupId,r=e.boardId,s=e.boardLabels,c=e.getChecklistData,o=e.menuPos,i=e.toggleMenu,l=e.updateTask,d=e.taskUrl,u=(e.addActivity,e.board,t.style),p=t.labelIds,j=t.dueDate,f=t.title,m=t.description,O=t.comments,g=t.attachments,x=t.checklists,k=t.todos,y=Object(n.useState)(f),N=Object(Q.a)(y,2),w=N[0],C=N[1],D=function(){var e=Object(v.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(b.a)({},t)).title!==w){e.next=3;break}return e.abrupt("return");case 3:return n.title=w,e.prev=4,e.next=7,l(r,a,n);case 7:i(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("error when setting title",e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("article",{className:"task-preview-container edit",style:{zIndex:100,borderRadius:3},children:[(null===u||void 0===u?void 0:u.bgUrl)&&Object(H.jsx)("img",{className:"task-cover-img",src:u.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"contain",maxHeight:240},alt:""}),(null===u||void 0===u?void 0:u.bgColor)&&!(null===u||void 0===u?void 0:u.bgUrl)&&Object(H.jsx)("div",{className:"task-cover",style:{background:t.style.bgColor}}),Object(H.jsxs)("div",{className:"task-preview clean-link ",style:(null===u||void 0===u?void 0:u.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===p||void 0===p?void 0:p.length)>0&&Object(H.jsx)(ht,{labelIds:p,boardLabels:s}),Object(H.jsx)("textarea",{className:"task-title",value:w,autoFocus:!0,onChange:function(e){return C(e.target.value)}}),Object(H.jsxs)("div",{className:"task-preview-icons flex align-center",children:[j&&Object(H.jsx)(Nt,{dueDate:j,isDone:t.isDone,taskId:t.id,groupId:a}),(null===m||void 0===m?void 0:m.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Ct.a,{className:"icon"})}),(null===O||void 0===O?void 0:O.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Tt.a,{className:"icon msg"}),txt:O.length}),(null===g||void 0===g?void 0:g.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Mt.a,{className:"icon attach"}),txt:g.length}),(null===x||void 0===x?void 0:x.length)>0&&0!==k&&Object(H.jsx)(vt,{icon:Object(H.jsx)(kt.a,{className:"icon"}),txt:c(),isDone:c(!0)}),(null===t||void 0===t?void 0:t.members)&&Object(H.jsx)(qe,{members:t.members,isInPreview:!0,isEditMode:!0})]})]})]}),Object(H.jsx)("button",{className:"save-btn",onClick:function(){D()},children:"Save"}),Object(H.jsx)(Kt,{toggleMenu:i,menuPos:o,groupId:a,boardId:r,task:t,taskUrl:d})]})})),Qt=a(44),$t=a(143),ea=a.n($t);var ta={toggleDragDisable:Ye,setPopoverMenu:Ve},aa=Object(i.b)((function(e){return{isDragDisabled:e.appModule.isDragDisabled}}),ta)((function(e){var t,a,r=e.task,s=e.taskUrl,c=e.boardLabels,i=e.groupId,l=e.boardId,d=e.index,u=e.isDragDisabled,p=e.toggleDragDisable,j=r.labelIds,h=r.title,v=r.dueDate,f=r.comments,m=r.checklists,O=r.description,g=r.attachments,x=r.style,k=r.media,y=Object(n.useState)(!1),N=Object(Q.a)(y,2),w=N[0],C=N[1],D=Object(n.useState)(),T=Object(Q.a)(D,2),S=T[0],M=T[1],A=function(t){!function(e){if(e){var t=e.target.parentElement.parentElement.getBoundingClientRect(),a=t.top,n=t.right;a>window.innerHeight-318?M({position:"absolute",left:"".concat(n,"px"),bottom:50}):M({position:"fixed",left:"".concat(n,"px"),top:a})}}(t),C(!w),p(),e.setPopoverMenu(!1)},I=function(e){return t=0,a=0,m.forEach((function(e){t+=e.todos.length,e.todos.forEach((function(e){e.isDone&&a++}))})),e?t===a:"".concat(a,"/").concat(t)};return(null===x||void 0===x?void 0:x.bgUrl)&&"full"===(null===x||void 0===x?void 0:x.coverMode)&&!w?Object(H.jsx)(Qt.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(H.jsx)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(H.jsx)(o.b,{to:s,className:"clean-link",children:Object(H.jsxs)("div",{className:"task-preview-container full-cover img",src:x.bgUrl,children:[Object(H.jsx)("img",{className:"",src:x.bgUrl,alt:""}),Object(H.jsx)("div",{className:"img-overlay"}),Object(H.jsx)("p",{children:r.title}),Object(H.jsx)("div",{className:"edit-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),A(e)},children:Object(H.jsx)(ea.a,{className:"icon"})})]})})}))}}):x&&"full"===(null===x||void 0===x?void 0:x.coverMode)&&!w?Object(H.jsx)(Qt.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(H.jsx)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(H.jsxs)("div",{className:"task-preview-container full-cover",style:{background:x.bgColor},children:[Object(H.jsx)(o.b,{to:s,className:"clean-link",children:Object(H.jsx)("div",{className:"task-preview",children:Object(H.jsx)("p",{children:r.title})})}),Object(H.jsx)("div",{className:"edit-icon",onClick:A,children:Object(H.jsx)(ea.a,{className:"icon"})})]})}))}}):w?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"overlay ".concat(w?"show":""),onClick:A,style:{zIndx:2}}),Object(H.jsx)(Zt,{task:r,getChecklistData:I,groupId:i,boardId:l,boardLabels:c,menuPos:S,toggleMenu:A,taskUrl:s})]}):Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(Qt.b,{draggableId:r.id,index:d,isDragDisabled:u,children:function(e){return Object(H.jsx)("div",Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(H.jsxs)("article",{className:"task-preview-container",style:{boxShadow:"none",zIndex:w?55:0},children:[(null===x||void 0===x?void 0:x.bgUrl)&&Object(H.jsx)(o.b,{to:s,className:"clean-link",children:Object(H.jsx)("img",{className:"task-cover-img",src:x.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"cover",maxHeight:240},alt:""})}),Object(H.jsxs)(o.b,{to:s,className:"clean-link",children:[(null===x||void 0===x?void 0:x.bgColor)&&!(null===x||void 0===x?void 0:x.bgUrl)&&Object(H.jsx)("div",{className:"task-cover",style:{background:r.style.bgColor}}),Object(H.jsxs)("div",{className:"task-preview clean-link ",style:(null===x||void 0===x?void 0:x.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===j||void 0===j?void 0:j.length)>0&&Object(H.jsx)(ht,{labelIds:j,boardLabels:c}),(null===k||void 0===k?void 0:k.videoUrl)&&Object(H.jsx)("div",{className:"video flex",onDrag:function(e){return e.stopPropagation()},children:Object(H.jsx)("video",{width:"100%",controls:!0,children:Object(H.jsx)("source",{src:r.media.videoUrl,type:"video/mp4"})})}),(null===k||void 0===k?void 0:k.audioUrl)&&Object(H.jsx)("div",{className:"audio",children:Object(H.jsx)("audio",{controls:!0,src:r.media.audioUrl})}),Object(H.jsx)("div",{className:"task-title",children:Object(H.jsx)("p",{children:h})}),Object(H.jsxs)("div",{className:"task-preview-icons flex align-center",children:[v&&Object(H.jsx)(Nt,{dueDate:v,isDone:r.isDone,taskId:r.id,groupId:i}),(null===O||void 0===O?void 0:O.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Ct.a,{className:"icon desc"})}),(null===f||void 0===f?void 0:f.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Tt.a,{className:"icon msg"}),txt:f.length}),(null===g||void 0===g?void 0:g.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Mt.a,{className:"icon attach"}),txt:g.length}),(null===m||void 0===m?void 0:m.length)>0&&0!==t&&Object(H.jsx)(vt,{icon:Object(H.jsx)(kt.a,{className:"icon"}),txt:I(),isDone:t===a&&0!==t}),(null===r||void 0===r?void 0:r.members)&&Object(H.jsx)(qe,{members:r.members,isInPreview:!0,task:r})]})]}),Object(H.jsx)("div",{className:"edit-icon",onClick:function(e){e.preventDefault(),e.stopPropagation(),A(e)},children:Object(H.jsx)(ea.a,{className:"icon"})})]})]})}))}})})}));var na=Object(i.b)((function(e){return{filterBy:e.boardModule.filterBy}}),{})((function(e){var t=e.groupId,a=e.boardId,n=e.boardLabels,r=e.tasks,s=e.filterBy,c=JSON.parse(JSON.stringify(r));if(c.length&&(c.forEach((function(e,t){return e.orgIdx=t})),c=c.filter((function(e){return!0!==(null===e||void 0===e?void 0:e.isArchive)}))),s.search){var o=s.search.toLowerCase();c=c.filter((function(e){return e.title.toLowerCase().includes(o)}))}return s.labels.length>0&&(c=c.filter((function(e){return e.labelIds.some((function(t){return s.labels.every((function(t){return e.labelIds.includes(t)}))}))}))),s.members.length>0&&(c=c.filter((function(e){return e.members.some((function(t){return s.members.every((function(t){var a=e.members.map((function(e){return e._id}));return a.includes(t)}))}))}))),Object(H.jsx)(Qt.c,{droppableId:t,children:function(e){var r;return Object(H.jsxs)("div",Object(b.a)(Object(b.a)({},e.droppableProps),{},{ref:e.innerRef,className:"task-list",children:[null===(r=c)||void 0===r?void 0:r.map((function(e){return Object(H.jsx)(aa,{task:e,id:e.id,index:e.orgIdx,taskUrl:"/board/".concat(a,"/").concat(t,"/").concat(e.id),boardLabels:n,groupId:t,boardId:a},e.id)})),e.placeholder,!c.length&&Object(H.jsx)("div",{style:{visibilty:"hidden",opacity:"0",height:"1px",width:"1px",color:"transparent"}})]}))}})})),ra=a(241),sa=a.n(ra),ca=a(242),oa=a.n(ca),ia=a(234),la=a(235),da=a.n(la),ua=a(530),ba=a(238),pa={uploadFile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="dusakec3z",r="pjprwzkr",s="https://api.cloudinary.com/v1_1/".concat(n,"/").concat(t,"/upload"),c=new FormData;return"image"===t?c.append("file",e.target.files[0]):c.append("file",a),c.append("upload_preset",r),fetch(s,{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error(e)}))}};var ja,ha=a(240),va=a.n(ha),fa=a(529),ma=a(39),Oa=a(239),ga=a.n(Oa),xa=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={record:!1,isOverlay:!0},e.startRecording=function(){e.setState({record:!0})},e.stopRecording=function(){e.setState({record:!1})},e.onStop=function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.setMediaType(""),t.next=3,pa.uploadFile(null,"video","video"===n?a:a.blob);case 3:r=t.sent,s=r.secure_url,"video"===n?e.props.addTask("Media Video",e.props.boardId,e.props.groupId,null,s):e.props.addTask("Media Audio",e.props.boardId,e.props.groupId,s,null);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.setOverlay=function(t){e.setState({isOverlay:t})},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.setOverlay(!0)}},{key:"compoentWillUnmount",value:function(){this.stopRecording()}},{key:"render",value:function(){var e=this,t=Object(ma.default)(fa.a)(ja||(ja=Object(ia.a)(["\n        position: relative;\n        background-color: ",";\n        color: white;\n        opacity: 1;\n        margin: 12px;\n        z-index: 3;\n        transition: all 0.2s;\n        :hover {\n          background-color: ",";\n          opacity: 0.9;\n        }\n      "])),this.state.record?"#8f3934":"#272727",this.state.record?"#8f3934":"#272727"),a=this.props.setAudioPath;return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"media",style:{width:"100%",maxWidth:400,padding:"0 20px"},children:Object(H.jsx)("div",{className:"media-container",children:"video"===this.props.type&&Object(H.jsx)(da.a,{className:"video-recorder",isFlipped:!1,countdownTime:0,mimeType:"video/webm;codecs=vp8,opus",constraints:{audio:!0,video:{resizeMode:"crop-and-scale",width:{exact:480,ideal:480},height:{exact:640,ideal:640},aspectRatio:{exact:.7500000001,ideal:.7500000001}}},onRecordingComplete:function(t){return e.onStop(t,"video")}})})}),"audio"===this.props.type&&Object(H.jsx)("div",{className:"media",children:Object(H.jsxs)("div",{className:"media-container",children:[Object(H.jsx)(ba.ReactMic,{record:this.state.record,className:"sound-wave",onStop:function(t){return e.onStop(t,"audio")},strokeColor:"white",backgroundColor:"black",setAudioPath:a,height:240,width:370}),Object(H.jsxs)(ua.a,{item:!0,container:!0,justify:"center",xs:12,children:[!this.state.record&&Object(H.jsx)(t,{onClick:this.startRecording,color:"secondary","aria-label":"record",children:Object(H.jsx)(ga.a,{})}),this.state.record&&Object(H.jsx)(t,{color:"secondary","aria-label":"record",onClick:this.stopRecording,children:Object(H.jsx)(va.a,{})})]})]})}),Object(H.jsx)("div",{className:"overlay ".concat(this.state.isOverlay?"show":""," "),onClick:function(){e.props.setMediaType("")},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})]})}}]),a}(r.a.Component);var ka={addTask:we},ya=Object(i.b)((function(e){return{board:e.boardModule.board}}),ka)(xa);var Na={addTask:we},wa=Object(i.b)(null,Na)((function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(Q.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)("Add task"),u=Object(Q.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(""),f=Object(Q.a)(j,2),m=f[0],O=f[1],g=function(){s(!r)},x=function(){var t=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i.trim()){t.next=3;break}return t.abrupt("return");case 3:return p(Object(H.jsx)(se.a,{type:"Grid",color:"white",height:14,width:14})),t.next=6,e.addTask(i.trim(),e.ids.boardId,e.ids.groupId);case 6:l(""),p("Add task"),e.scrollToBottom(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("error when saving task",t.t0),p("Add task");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),k=function(t){O(t),t?e.toggleDragDisable(!0):e.toggleDragDisable(!1)};return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"grp-add-task",children:r?Object(H.jsxs)("div",{className:"add-task-active flex column",children:[Object(H.jsx)("textarea",{value:i,placeholder:"Enter a title for this task...",onChange:function(e){return l(e.target.value)},className:"task-preview",onClick:e.scrollToBottom}),Object(H.jsxs)("div",{className:"task-btns flex align-center",children:[Object(H.jsx)("button",{className:"task-btn save-task-title-btn",onClick:x,children:b}),Object(H.jsx)("button",{className:"task-btn close-task-title-btn",onClick:g,children:Object(H.jsx)(lt.a,{})})]})]}):Object(H.jsxs)("div",{className:"add-task-inactive flex space-between",children:[Object(H.jsxs)("div",{className:"add-btn flex align-center",onClick:g,children:[Object(H.jsx)(Pe.a,{className:"icon"}),Object(H.jsx)("p",{children:"Add a task"})]}),Object(H.jsxs)("div",{className:"media-btns flex align-center",children:[Object(H.jsx)(sa.a,{className:"media-icon",onClick:function(){return k("video")}}),Object(H.jsx)(oa.a,{className:"media-icon",onClick:function(){return k("audio")}})]})]})}),m&&Object(H.jsx)(ya,{boardId:e.ids.boardId,groupId:e.ids.groupId,type:m,setMediaType:k})]})}));var Ca={saveBoard:ye},Da=Object(i.b)((function(e){return{board:e.boardModule.board}}),Ca)((function(e){var t=Object(b.a)({},e.group),a=Object(n.useState)(t.title),r=Object(Q.a)(a,2),s=r[0],c=r[1];Object(n.useEffect)((function(){c(e.group.title)}),[e.group.title]);var o=function(){var a=Object(v.a)(h.a.mark((function a(){var n,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(b.a)({},e.board),r=n.groups.findIndex((function(e){return t.id===e.id})),n.groups[r].title=s,a.prev=3,a.next=6,e.saveBoard(n);case 6:a.next=10;break;case 8:a.prev=8,a.t0=a.catch(3);case 10:case"end":return a.stop()}}),a,null,[[3,8]])})));return function(){return a.apply(this,arguments)}}();return Object(H.jsx)("input",{className:"group-title flex column",value:s,onChange:function(e){return c(e.target.value)},onBlur:o})}));function Ta(e){return Object(H.jsxs)("div",{className:"group-menu",style:e.menuPos,children:[Object(H.jsx)("h3",{children:"List actions"}),Object(H.jsx)("button",{onClick:function(){e.removeGroup(e.boardId,e.groupId),e.toggleMenuShown(!1)},children:"Delete list"})]})}var Sa=a(243),Ma=a.n(Sa),Aa={removeGroup:function(e,t){return function(){var a=Object(v.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,le.removeGroup(e,t);case 3:r=a.sent,n({type:"SAVE_BOARD",board:r}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("cant remove group",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},toggleDragDisable:Ye};var Ia=Object(i.b)((function(e){return{isDragDisabled:e.appModule.isDragDisabled}}),Aa)((function(e){var t=e.group,a=e.isAddNew,r=e.boardId,s=e.boardLabels,c=e.index,o=e.isDragDisabled,i=e.toggleDragDisable,l=Object(n.useRef)(),d=Object(n.useState)(!1),u=Object(Q.a)(d,2),p=u[0],j=u[1],h=Object(n.useState)({}),v=Object(Q.a)(h,2),f=v[0],m=v[1],O=function(e){var t=window.innerWidth-e.pageX>200?e.pageX:e.pageX-200;m({position:"fixed",top:"".concat(e.pageY,"px"),left:"".concat(t,"px")}),j(!p),i()},g=function(){l.current.scrollTo({top:l.current.scrollHeight,behavior:"smooth"})};return a?Object(H.jsx)(pt,{}):Object(H.jsx)("div",{children:Object(H.jsx)(Qt.b,{draggableId:t.id,index:c,isDragDisabled:o,children:function(a,n){return Object(H.jsx)(Ma.a,{style:a.draggableProps.style,snapshot:n,children:function(n){return Object(H.jsxs)("article",Object(b.a)(Object(b.a)(Object(b.a)({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{style:Object(b.a)({},n),className:"group-details flex column",children:[Object(H.jsxs)("div",{className:"group-header flex space-between align-center",children:[Object(H.jsx)(Da,{group:t}),Object(H.jsx)(rt.a,{fontSize:"small",onClick:O,className:"dots"}),p&&Object(H.jsx)(Ta,{menuPos:f,removeGroup:e.removeGroup,toggleMenuShown:j,boardId:r,groupId:t.id}),Object(H.jsx)("div",{className:"overlay ".concat(p?"show":""),onClick:O})]}),Object(H.jsx)("div",{className:"group-main flex column ",ref:l,children:Object(H.jsx)(na,{tasks:t.tasks,boardId:r,groupId:t.id,boardLabels:s,toggleDragDisable:i})}),Object(H.jsx)("div",{className:"group-footer",children:Object(H.jsx)(wa,{ids:{groupId:t.id,boardId:r},scrollToBottom:g,toggleDragDisable:i})})]}))}})}})})}));function Ea(e){var t=e.groups,a=e.boardId,n=e.boardLabels;return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(Qt.c,{droppableId:"all-groups",type:"group",direction:"horizontal",children:function(e){return Object(H.jsxs)("div",Object(b.a)(Object(b.a)({className:"group-list"},e.droppableProps),{},{ref:e.innerRef,children:[t.map((function(e,t){return Object(H.jsx)("div",{children:Object(H.jsx)(Ia,{group:e,boardId:a,index:t,id:e.id,boardLabels:n})},e.id)})),e.placeholder,Object(H.jsx)(Ia,{isAddNew:!0})]}))}})})}var Pa=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isMenuOpen:!1,currentTarget:null},e.componentDidMount=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.setFilterBy({labels:[],members:[],search:""}),a=e.props.match.params.boardId,e.props.user||e.props.onLogin({username:"guest",password:"1"}),e._loadBoard(),e.props.boards.length||e.props.loadBoards(),e.props.loadUsers(),J.emit("join-board",a),J.on("updated-board",(function(){e.props.loadBoard(a)}));case 8:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){e.props.clearBoard(),J.off("updated-board"),e.props.setFilterBy({labels:[],members:[],search:""})},e.componentDidUpdate=function(){var t,a;(null===(t=e.props.match.params)||void 0===t?void 0:t.boardId)!==(null===(a=e.props.board)||void 0===a?void 0:a._id)&&(e.props.clearBoard(),e._loadBoard(),e.props.loadUsers())},e.toggleMenu=function(t){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isMenuOpen:!e.state.isMenuOpen})})),e.setCurrentTarget(t)},e.setCurrentTarget=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currentTarget:t})}))},e._loadBoard=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.props.match.params.boardId)||e.props.history.push("/workspace"),!a){t.next=12;break}return t.prev=3,t.next=6,e.props.loadBoard(a);case 6:e.props.board||e.props.history.push("/workspace"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),console.log("cant load board",t.t0);case 12:case"end":return t.stop()}}),t,null,[[3,9]])}))),e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.draggableId,s=t.type;a&&e.props.handleDrag(Object(b.a)({},e.props.board),n.droppableId,a.droppableId,n.index,a.index,r,s)},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.board;return e?Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(Qt.a,{onDragEnd:this.onDragEnd,children:Object(H.jsxs)("section",{className:"board-app flex column",style:{background:e.style.bgImg?"url(".concat(e.style.bgImg,")"):e.style.bgClr},children:[Object(H.jsx)(ut,{board:Object(b.a)({},e),toggleMenu:this.toggleMenu}),Object(H.jsx)(Ea,{groups:Object(u.a)(e.groups),boardId:e._id,boardLabels:Object(u.a)(e.labels)})]})})}):Object(H.jsx)(H.Fragment,{})}}]),a}(n.Component);var Ba={loadBoard:ke,loadBoards:xe,clearBoard:function(){return function(e){e({type:"SET_BOARD",board:null})}},loadUsers:function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}}),e,null,[[0,7,10,12]])})));return function(t){return e.apply(this,arguments)}}()},handleDrag:function(e,t,a,n,r,s,c){return function(){var s=Object(v.a)(h.a.mark((function s(o){var i,l,d,b,p,j,v,f,m,O;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=JSON.parse(JSON.stringify(e)),"group"===c?(d=i.groups.splice(n,1),(l=i.groups).splice.apply(l,[r,0].concat(Object(u.a)(d)))):(t===a&&(p=i.groups.find((function(e){return e.id===t})),j=p.tasks.splice(n,1),(b=p.tasks).splice.apply(b,[r,0].concat(Object(u.a)(j)))),t!==a&&(f=i.groups.find((function(e){return e.id===t})),m=f.tasks.splice(n,1),O=i.groups.find((function(e){return e.id===a})),(v=O.tasks).splice.apply(v,[r,0].concat(Object(u.a)(m))))),le.save(i),o({type:"SAVE_BOARD",board:i}),s.abrupt("return");case 5:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()},onLogin:_e,setFilterBy:Se},Ua=Object(i.b)((function(e){return{board:e.boardModule.board,boards:e.boardModule.boards,user:e.userModule.loggedinUser}}),Ba)(Pa),La=a(80),_a=a.n(La);function Ra(e){var t=e.taskTitle,a=e.setTaksDetailsTitle,r=e.taskList,s=Object(n.useState)(t),c=Object(Q.a)(s,2),o=c[0],i=c[1];return Object(H.jsx)("header",{className:"task-header",children:Object(H.jsxs)("div",{className:"header-content",children:[Object(H.jsxs)("div",{className:"header-name flex",children:[Object(H.jsx)(_a.a,{className:"LabelSvg"}),Object(H.jsx)("textarea",{style:{width:"100%"},onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()},onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value),e.preventDefault(),a(o)},value:o})]}),Object(H.jsxs)("p",{className:"list-name",children:["in list ",Object(H.jsx)("span",{style:{textDecoration:"underline",fontWeight:600},children:r})]})]})})}var Fa={setPosition:Xe,togglePopover:He},Ga=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Fa)((function(e){var t=e.setPosition,a=e.currTaskDetails,n=e.togglePopover,r=a.style,s=r.bgColor,c=r.bgUrl;return Object(H.jsxs)("div",{className:"card-cover flex",style:{backgroundColor:s||""},children:[c&&Object(H.jsx)("img",{src:c,style:{backgroundColor:s||""},alt:"background"}),Object(H.jsxs)("button",{className:"cover-btn flex",onClick:function(e){t({pos:{pageX:e.pageX,pageY:e.pageY},type:"COVER"}),n()},children:[Object(H.jsx)(_a.a,{})," Cover"]})]})})),Ya=a(244),Xa=a.n(Ya),Ha=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={description:"",isEditMode:!1},e.onSaveDescription=function(){var t=e.state.description,a=e.props,n=a.currTask,r=a.updateTaskDetails;n.description=t,r(n),e.setState({isEditMode:!1})},e.handleChange=function(t){var a=t.target.value;e.setState({description:a})},e.onToggleEdit=function(){e.setState({isEditMode:!e.state.isEditMode})},e.onEditMode=function(){e.selectedInput.focus(),e.setState({isEditMode:!0})},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.currTask.description?this.props.currTask.description:"";this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{description:e})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isEditMode,n=t.description;return Object(H.jsxs)("div",{className:"task-description flex column",children:[Object(H.jsxs)("div",{className:"window-modal-title flex align-center",children:[Object(H.jsx)(Xa.a,{}),Object(H.jsx)("h3",{children:"Description"}),Object(H.jsx)("button",{className:"task-btns edit-task-description-btn ".concat(a?"none-opacity":"full-opacity"),onClick:function(){return e.onEditMode()},children:"Edit"})]}),Object(H.jsxs)("div",{className:"card-description-edit flex column",children:[Object(H.jsx)("textarea",{onClick:this.onEditMode,ref:function(t){e.selectedInput=t},onBlur:this.onSaveDescription,value:n,placeholder:"Add a more detailed description...",onChange:this.handleChange}),Object(H.jsxs)("div",{className:"description-btns flex align-center ".concat(a?"show":"hidden"),children:[Object(H.jsx)("button",{className:"task-btns save-task-description-btn",onClick:function(){return e.onSaveDescription()},children:"Save"}),Object(H.jsx)("button",{className:"task-btns close-task-description-btn",onClick:function(){return e.onToggleEdit()},children:Object(H.jsx)(lt.a,{})})]})]})]})}}]),a}(n.Component),Wa=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,top:0,left:0},e.contentEl=null,e.toggleVisibility=function(){return e.setState((function(e){return{visible:!e.visible}}))},e.onSetPopoverPos=function(){if(e.contentEl){var t=e.contentEl.getBoundingClientRect(),a=e.setPopoverPos(t),n=a.left,r=a.top;e.setState({top:r,left:n})}},e.getContentStyles=function(){var t=e.state,a=t.top,n=t.left,r=e.props.popover;return{position:"fixed",opacity:1,top:"".concat(a,"px"),left:"".concat(n,"px"),transition:"opacity 0.3s, visibility 0.3s",backgroundColor:"".concat(r.isMenu?"#f4f5f7":"#fff"),border:"1px solid lightgray",zIndex:100,padding:"0 12px 12px",borderRadius:"3px",marginRight:"4px",maxWidth:"100%",boxShadow:"0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08)"}},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.onSetPopoverPos()}},{key:"componentDidUpdate",value:function(e){e.popover!==this.props.popover&&this.onSetPopoverPos()}},{key:"setPopoverPos",value:function(e){var t=this.props.popover.pos,a=e.width,n=e.height,r=(window.innerWidth,t.pageX,t.pageX-200),s=window.innerHeight-t.pageY>200?t.pageY+20:t.pageY-200;return(r=r+a>window.innerWidth?window.innerWidth-a-10:r)<0&&(r=10),{left:r,top:s=s+n>window.innerHeight?window.innerHeight-n-20:s}}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.children,r=t.popover;return Object(H.jsx)(H.Fragment,{children:r.isOpen&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("div",{className:"popover ".concat(r.isMenu?"slide-in-right":""),ref:function(t){return e.contentEl=t},style:this.getContentStyles(),children:[Object(H.jsxs)("div",{className:"popover-header",children:[Object(H.jsx)("span",{children:a}),Object(H.jsx)("button",{className:"clean-btn",onClick:this.props.togglePopover,children:Object(H.jsx)(te.a,{})})]}),Object(H.jsx)("div",{className:"popover-content",children:n})]}),Object(H.jsx)("div",{className:"popover-overlay",style:{position:"fixed",inset:0,height:"100vh",zIndex:90},onClick:this.props.togglePopover})]})})}}]),a}(r.a.Component);var Va={togglePopover:He,setPosition:Xe,setPopover:We},za=Object(i.b)((function(e){return{popover:e.appModule.popover}}),Va)(Wa),Ja=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={typeTitle:""},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{typeTitle:e.props.typeTitle})}))}},{key:"componentWillUnmount",value:function(){this.props.setIsPopover(!1),this.props.setIsEditPopover(!1)}},{key:"render",value:function(){var e=this.props,t=e.type,a=e.remove,n=this.state.typeTitle;n.length>15&&(n=n.substr(0,15)+"...");var r="Delete ".concat(n,"?");return Object(H.jsx)("div",{className:"no-back-container",children:Object(H.jsx)(za,{title:r,children:Object(H.jsxs)("div",{className:"no-back",children:[Object(H.jsxs)("p",{children:["Deleting a ",t," is permanent and there",Object(H.jsx)("br",{}),"is no way to get it back."]}),Object(H.jsxs)("button",{className:"delete-checklist-btn danger-btn",onClick:function(){a()},children:["Delete ",t]})]})})})}}]),a}(n.Component);var Ka=Object(i.b)((function(e){return{}}),null)(Ja),qa=a(19),Za=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={url:"",urlName:""},e.componentDidMount=function(){var t=e.props.attachment;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{url:t.url,urlName:t.name})}))},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(qa.a)({},r,n))}))},e.onAttachmentUpdate=function(){var t=e.state,a=t.url,n=t.urlName;e.props.updateAttachment(a,n)},e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setIsPopover(!1),this.props.setIsEditPopover(!1)}},{key:"render",value:function(){var e=this.props.attachment,t=this.state,a=t.url,n=t.urlName,r=e.name;r.length>15&&(r=r.substr(0,15)+"...");var s="Update ".concat(r);return Object(H.jsx)("div",{className:"edit-attach-container",children:Object(H.jsx)(za,{title:s,children:Object(H.jsxs)("div",{className:"attachment-container",children:[e.isWeb&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("label",{htmlFor:"url-upload",children:"Link"}),Object(H.jsx)("input",{type:"text",id:"url-upload",placeholder:"Enter link url",value:a,name:"url",onChange:this.handleChange})]}),Object(H.jsx)("label",{htmlFor:"url-name-optional",children:"Link name (optional)"}),Object(H.jsx)("input",{type:"text",id:"url-name-optional",name:"urlName",value:n,placeholder:"Enter link name",onChange:this.handleChange}),Object(H.jsx)("button",{className:"primary-btn",onClick:this.onAttachmentUpdate,children:"Update"})]})})})}}]),a}(n.Component),Qa=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isPopover:!1,isEditPopover:!1,bgUrl:null},e.toggleBgUrl=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:!e.bgUrl})}))},e.removeAttach=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.currTaskDetails,s=a.saveTaskDetails,c=a.addActivity,o=a.attachment,i=a.setCurrTaskDetails,l=a.togglePopover,d=e.state.currGroup,u=r.attachments.filter((function(e){return e.id!==o.id})),r.attachments=u,i(r),t.next=7,s(n,d,r);case 7:return l(),e.setIsPopover(!1),t.next=11,c(n,r,"remove-attachment",o.name);case 11:case"end":return t.stop()}}),t)}))),e.setCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=a.attachment,o=a.setCurrTaskDetails,i=e.state.currGroup,s.style.bgUrl=c.url,e.toggleBgUrl(),o(s),t.next=7,r(n,i,s);case 7:case"end":return t.stop()}}),t)}))),e.removeCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=a.setCurrTaskDetails,o=e.state.currGroup,s.style.coverMode=null,s.style.bgColor=null,s.style.bgUrl=null,e.toggleBgUrl(),c(s),t.next=9,r(n,o,s);case 9:case"end":return t.stop()}}),t)}))),e.setIsEditPopover=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditPopover:t})}))},e.setIsPopover=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isPopover:t})}))},e.updateAttachment=function(){var t=Object(v.a)(h.a.mark((function t(a,n){var r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,s=r.board,c=r.saveTaskDetails,o=r.currTaskDetails,i=r.attachment,l=r.setCurrTaskDetails,d=r.togglePopover,u=e.state.currGroup,n||(n="Attachment"),i.url=a,i.name=n,l(o),t.next=8,c(s,u,o);case 8:d(),e.setIsEditPopover(!1);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=a.style&&a.style.bgUrl;this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:r,currGroup:n})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.currTaskDetails,n=a.style&&a.style.bgUrl;n!==t.bgUrl&&this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{bgUrl:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.attachment,n=t.popover,r=this.state,s=r.isPopover,c=r.isEditPopover,i=r.bgUrl,l=a.isWeb;return Object(H.jsxs)("div",{className:"attachment-preview flex",children:[l?Object(H.jsx)(o.b,{className:"attachment-thumbnail flex",to:{pathname:"".concat(a.url)},target:"_blank",title:"".concat(a.name),children:Object(H.jsx)(Mt.a,{})}):Object(H.jsx)("img",{src:a.url,alt:a.name}),Object(H.jsx)("div",{className:"attachment-content",children:Object(H.jsxs)("div",{className:"attachment-details",children:[Object(H.jsx)("span",{className:"attachment-title",children:a.name.length>15?a.name.substr(0,15)+"...":a.name}),Object(H.jsxs)("div",{className:"attachment-actions",children:[Object(H.jsxs)("span",{className:"attachment-date",children:["Added ",oe.timeSince(a.createdAt)]}),Object(H.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.setIsPopover(!0)},children:"Delete"}),Object(H.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.setIsEditPopover(!0)},children:"Edit"})]}),!l&&!i&&Object(H.jsxs)("span",{children:[Object(H.jsx)(_a.a,{className:"make-cover-icon"}),Object(H.jsx)("span",{onClick:this.setCover,children:"Make cover"})]}),!l&&i&&Object(H.jsxs)("span",{children:[Object(H.jsx)(_a.a,{className:"make-cover-icon"}),Object(H.jsx)("span",{onClick:this.removeCover,children:"Remove cover"})]})]})}),n.isOpen&&s&&Object(H.jsx)(Ka,{remove:this.removeAttach,type:"attachment",typeTitle:a.name,setIsPopover:this.setIsPopover,setIsEditPopover:this.setIsEditPopover}),n.isOpen&&c&&Object(H.jsx)(Za,{setIsPopover:this.setIsPopover,setIsEditPopover:this.setIsEditPopover,updateAttachment:this.updateAttachment,attachment:a})]})}}]),a}(n.Component);var $a={saveTaskDetails:De,saveBoard:ye,setPosition:Xe,setPopover:We,addActivity:Ce,setCurrTaskDetails:Ge,togglePopover:He},en=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board,popover:e.appModule.popover}}),$a)(Qa);var tn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),null)((function(e){var t=e.currTaskDetails;return t.attachments&&t.attachments.length?Object(H.jsxs)("div",{className:"task-attach",children:[Object(H.jsxs)("div",{className:"window-modal-title flex align-center",children:[Object(H.jsx)(Mt.a,{}),Object(H.jsx)("h3",{children:"Attachment"})]}),Object(H.jsx)("div",{className:"attachments",children:t.attachments.map((function(e){return Object(H.jsx)(en,{attachment:e},e.id)}))})]}):Object(H.jsx)(r.a.Fragment,{})})),an=a(140),nn=a.n(an),rn=a(139),sn=a.n(rn),cn=a(245),on=a.n(cn),ln=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={todo:null,todoTitle:"",isEditMode:!1},e.selectedInput=null,e.handleChange=function(t){var a=t.target.value;e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{todo:Object(b.a)(Object(b.a)({},e.state.todo),{},{title:a})})}))},e.onEditMode=function(){e.selectedInput&&e.selectedInput.focus(),e.setState({isEditMode:!0})},e.onToggleEditMode=function(){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isEditMode:!e.state.isEditMode})}))},e.onSaveTodo=function(){var t=e.state.todo;e.props.onSaveTodo(t),e.onToggleEditMode()},e.onToggleTodoIsDone=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.todo,n=e.props,r=n.addActivity,s=n.board,c=n.currTaskDetails,a.isDone=!a.isDone,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:a})})),e.props.onSaveTodo(a),!a.isDone){t.next=10;break}return t.next=8,r(s,c,"complete-todo",a.title);case 8:t.next=12;break;case 10:return t.next=12,r(s,c,"incomplete-todo",a.title);case 12:case"end":return t.stop()}}),t)}))),e.onRemoveTodo=function(){var t=e.state.todo;e.props.onRemoveTodo(t)},e.onUndoChange=function(){var t=e.props.todo,a=e.state.todoTitle;t.title=a,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:t})})),e.onToggleEditMode()},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.todo;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{todo:e,todoTitle:e.title})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.todo,n=t.isEditMode;if(!a)return Object(H.jsx)("div",{children:"Loading..."});var r=a.title;return Object(H.jsxs)("div",{className:"todo-preview-container flex column",children:[Object(H.jsxs)("div",{className:"todo-preview flex align-center",children:[a.isDone&&Object(H.jsx)(sn.a,{onClick:this.onToggleTodoIsDone,className:"todo-check"}),!a.isDone&&Object(H.jsx)(nn.a,{onClick:this.onToggleTodoIsDone}),n&&Object(H.jsx)("textarea",{onClick:this.onEditMode,className:"default-textarea",ref:function(t){e.selectedInput=t},value:r,onChange:this.handleChange}),!n&&Object(H.jsxs)("div",{className:"checklist-txt-and-btn",children:[Object(H.jsx)("span",{className:"".concat(a.isDone?"done":""),onClick:this.onEditMode,children:r}),Object(H.jsx)(on.a,{className:"todo-remove-icon",onClick:this.onRemoveTodo})]})]}),Object(H.jsxs)("div",{className:"checklist-btns flex align-center ".concat(n?"show":"hidden"),children:[Object(H.jsx)("button",{onClick:this.onSaveTodo,className:"nch-btn primary-btn",children:"Save"}),Object(H.jsx)(lt.a,{onClick:this.onUndoChange,className:"close-btn"})]})]})}}]),a}(n.Component);var dn={addActivity:Ce},un=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),dn)(ln);function bn(e){var t=e.todos,a=e.onSaveTodo,n=e.onRemoveTodo;return Object(H.jsx)("div",{className:"todo-list",children:t.map((function(e){return Object(H.jsx)(un,{todo:e,onSaveTodo:a,onRemoveTodo:n},e.id)}))})}var pn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isEditMode:!1,todo:{title:""}},e.selectedInput=null,e.handleChange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:{title:a}})}))},e.onToggleEditMode=function(){var t=e.state.isEditMode;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditMode:!t})}))},e.onTodoAdd=function(){var t=e.state.todo;t.title&&(t.id=oe.makeId(),t.isDone=!1,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:t})})),e.props.addTodo(t),e.clearState())},e.clearState=function(){e.selectedInput.focus(),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{todo:{title:""}})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.isEditMode,n=t.todo;return Object(H.jsxs)("div",{className:"todo-add-container",children:[Object(H.jsx)("button",{className:"task-btns nch-btn todo-add-btn ".concat(a?"hidden":"show"),onClick:function(){return e.onToggleEditMode()},children:"Add an item"}),a&&Object(H.jsxs)("div",{className:"todo-edit flex column",children:[Object(H.jsx)("textarea",{onClick:this.onEditMode,ref:function(t){e.selectedInput=t},autoFocus:!0,value:n.title,placeholder:"Add an item",onChange:this.handleChange}),Object(H.jsxs)("div",{className:"todo-btns flex align-center ".concat(a?"show":"hidden"),children:[Object(H.jsx)("button",{className:"task-btns todo-save-btn",onClick:function(){return e.onTodoAdd()},children:"Add"}),Object(H.jsx)("button",{className:"task-btns todo-close-btn",onClick:function(){return e.onToggleEditMode()},children:Object(H.jsx)(lt.a,{})})]})]})]})}}]),a}(n.Component),jn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={completed:0,style:{width:"",backgroundColor:""}},e.componentDidMount=function(){var t=e.props.doneTodosCalc(),a=100===t?"#61bd4f":"#5ba4cf";e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{completed:t,style:{width:"".concat(t,"%"),backgroundColor:a}})}))},e}return Object(R.a)(a,[{key:"componentDidUpdate",value:function(e){if(this.state.completed!==this.props.doneTodosCalc()){var t=this.props.doneTodosCalc(),a=100===t?"#61bd4f":"#5ba4cf";this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{completed:t,style:{width:"".concat(t,"%"),backgroundColor:a}})}))}}},{key:"render",value:function(){var e=this.state,t=e.style,a=e.completed;return Object(H.jsxs)("div",{className:"checklist-progress",children:[Object(H.jsxs)("span",{className:"checklist-progress-percentage js-checklist-progress-percent",children:[parseInt(a),"%"]}),Object(H.jsx)("div",{className:"checklist-progress-bar",children:Object(H.jsx)("div",{className:"checklist-progress-bar-current js-checklist-progress-bar",style:t})})]})}}]),a}(n.Component),hn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isPopover:!1},e.togglePopover=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isPopover:!e.isPopover})}))},e.onSaveTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.checklist,o=n.saveTaskDetails,i=n.setCurrTaskDetails,l=e.state.currGroup,d=s.checklists.indexOf(c),u=s.checklists[d].todos.findIndex((function(e){return e.id===a.id})),s.checklists[d].todos[u]=a,i(s),t.next=8,o(r,l,s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.checklist,i=n.setCurrTaskDetails,l=e.state.currGroup,d=s.checklists.indexOf(o),u=s.checklists[d].todos.findIndex((function(e){return e.id===a.id})),s.checklists[d].todos.splice(u,1),i(s),t.next=8,c(r,l,s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addTodo=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.checklist,i=n.setCurrTaskDetails,l=e.state.currGroup,d=s.checklists.indexOf(o),s.checklists[d].todos.push(a),i(s),t.next=7,c(r,l,s);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doneTodosCalc=function(){var t=e.props.checklist,a=t.todos;if(!a.length)return 0;var n=0;return a.forEach((function(e){e.isDone&&n++})),n/t.todos.length*100},e.removeChecklist=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.board,r=a.saveTaskDetails,s=a.currTaskDetails,c=a.checklist,o=a.addActivity,i=a.setCurrTaskDetails,l=e.state.currGroup,d=s.checklists.indexOf(c),s.checklists.splice(d,1),i(s),t.next=7,r(n,l,s);case 7:return e.togglePopover(),t.next=10,o(n,s,"remove-checklist");case 10:case"end":return t.stop()}}),t)}))),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.checklist,n=t.popover,r=this.state.isPopover;return a?Object(H.jsxs)("div",{className:"task-activities flex column",children:[Object(H.jsxs)("div",{className:"window-modal-title flex space-between",children:[Object(H.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(H.jsx)(kt.a,{}),Object(H.jsx)("h3",{children:a.title})]}),Object(H.jsx)("button",{className:"activity-toggle-btn",onClick:function(t){e.props.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:""}),e.props.setPopover(!0),e.togglePopover()},children:"Delete"})]}),Object(H.jsx)(jn,{doneTodosCalc:this.doneTodosCalc}),Object(H.jsx)(bn,{todos:a.todos,onSaveTodo:this.onSaveTodo,onRemoveTodo:this.onRemoveTodo}),n.isOpen&&r&&Object(H.jsx)(Ka,{remove:this.removeChecklist,type:"checklist",typeTitle:a.title,togglePopover:this.togglePopover}),Object(H.jsx)(pn,{addTodo:this.addTodo})]}):Object(H.jsx)("div",{})}}]),a}(n.Component);var vn={saveTaskDetails:De,saveBoard:ye,togglePopover:He,setPosition:Xe,setPopover:We,addActivity:Ce,setCurrTaskDetails:Ge},fn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board,popover:e.appModule.popover}}),vn)(hn),mn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.currTaskDetails;return e.checklists?Object(H.jsx)("div",{className:"task-checklists",children:e.checklists.map((function(e){return Object(H.jsx)(fn,{checklist:e},e.id)}))}):Object(H.jsx)(r.a.Fragment,{})}}]),a}(n.Component);var On=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}))(mn),gn=a(141),xn=a.n(gn),kn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1},e.handleChange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:a})}))},e.onEditMode=function(){e.selectedInput&&e.selectedInput.focus(),e.setState({isEditMode:!0})},e.onAddComment=function(){var t=e.state.txt,a=e.props.loggedinUser;e.props.addComment(t,a),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:"",isEditMode:!1})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props.loggedinUser,n=this.state,r=n.isEditMode,s=n.txt;return Object(H.jsxs)("div",{className:"add-comment flex",children:[Object(H.jsx)("article",{className:"member-wrapper",children:(null===a||void 0===a?void 0:a.imgUrl)?Object(H.jsx)("img",{src:a.imgUrl,className:"member-img",alt:a.fullname[0].toUpperCase()}):Object(H.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(H.jsx)("p",{className:"member-letter preview",children:(null===a||void 0===a||null===(e=a.fullname)||void 0===e?void 0:e[0])||""})})}),Object(H.jsxs)("div",{className:"comment-frame",children:[Object(H.jsx)("textarea",{onClick:this.onEditMode,className:"default-textarea",ref:function(e){t.selectedInput=e},value:s,onChange:this.handleChange,placeholder:"Write a comment"}),r&&Object(H.jsx)("button",{className:"primary-btn",onClick:this.onAddComment,children:"Save"})]})]})}}]),a}(n.Component),yn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(R.a)(a,[{key:"activityToShow",get:function(){var e=this.props,t=e.activity,a=e.currTask;switch(a||(a=t.task),t.txt&&t.txt.length>20&&(t.txt=t.txt.substr(0,12)+"..."),t.type){case"due-date-complete":return"marked the due date complete";case"due-date-incomplete":return"marked the due date incomplete";case"set-date":return"set the due date to of ".concat(a.title," to ").concat(t.txt);case"remove-date":return"removed the due date from ".concat(a.title);case"add-checklist":return"added Checklist to ".concat(a.title);case"remove-checklist":return"removed Checklist from ".concat(a.title);case"add-member":return"added ".concat(t.txt," to ").concat(a.title);case"remove-member":return"removed ".concat(t.txt," from ").concat(a.title);case"add-self":return"joined task ".concat(a.title);case"remove-self":return"left task ".concat(a.title);case"add-to-archive":return"archived ".concat(a.title);case"remove-from-archive":return"returned ".concat(a.title," to board ");case"remove-task":return"deleted ".concat(a.title," from board");case"complete-todo":return"completed ".concat(t.txt," on ").concat(a.title);case"incomplete-todo":return"marked ".concat(t.txt," incomplete on ").concat(a.title);case"remove-attachment":return"deleted the ".concat(t.txt," attachment from ").concat(a.title);case"change-title":return"changed task title to ".concat(t.txt," ");default:return""}}},{key:"render",value:function(){var e,t=this.props,a=t.activity,n=t.isShowActivities,r=t.selectNotification,s=a.byMember;return!n&&"comment"!==a.type||!s?Object(H.jsx)(H.Fragment,{}):Object(H.jsxs)("div",{className:"activity-preview-container flex ".concat(a.isNotRead?"unread":""," ").concat(a.isNotify?"notify":""),onClick:a.isNotify?function(){r(a)}:void 0,children:[Object(H.jsx)("article",{className:"member-wrapper",children:(null===s||void 0===s?void 0:s.imgUrl)?Object(H.jsx)("img",{src:s.imgUrl,className:"member-img",alt:s.fullname[0].toUpperCase()}):Object(H.jsx)("div",{className:"member-img",style:{background:"rgb(223, 225, 230)",color:"inherit"},children:Object(H.jsx)("p",{className:"member-letter preview",children:(null===s||void 0===s||null===(e=s.fullname)||void 0===e?void 0:e[0])||""})})}),"comment"===a.type&&Object(H.jsxs)("div",{className:"comment-preview",children:[Object(H.jsxs)("div",{className:"comment-by-user",children:[Object(H.jsx)("span",{className:"member-name",children:s.fullname}),Object(H.jsx)("span",{className:"comment-created-at",children:oe.timeSince(a.createdAt)})]}),Object(H.jsx)("div",{className:"comment-content",children:Object(H.jsx)("p",{className:"comment-txt",children:a.txt})})]}),"comment"!==a.type&&Object(H.jsxs)("div",{className:"activity-preview",children:[Object(H.jsxs)("div",{className:"activity-by-user",children:[Object(H.jsx)("span",{className:"member-name",children:s.fullname}),Object(H.jsx)("span",{className:"activity-content",children:this.activityToShow})]}),Object(H.jsx)("div",{className:"activity-created-at-container",children:Object(H.jsx)("span",{className:"activity-created-at",children:oe.timeSince(a.createdAt)})})]})]})}}]),a}(n.Component);function Nn(e){var t=e.CommAndAct,a=e.isShowActivities,n=e.currTask,r=e.selectNotification;return Object(H.jsx)("div",{className:"activities-list",children:t.map((function(e){return Object(H.jsx)(yn,{activity:e,isShowActivities:a,currTask:n,selectNotification:r},e.id)}))})}var wn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isShowActivities:!1},e.onToggleComments=function(){e.setState({isShowActivities:!e.state.isShowActivities})},e.getTaskCommentsAndActivitiesSorted=function(){var t=e.props,a=t.currTask,n=t.activities,r=[];return a.comments&&a.comments.length&&r.push.apply(r,Object(u.a)(a.comments)),n&&n.length&&n.forEach((function(e){e.task.id===a.id&&r.push(e)})),r.length?(r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0})),r):null},e.addComment=function(t,a){var n=e.props.currTask;n.comments||(n.comments=[]);var r={id:oe.makeId(),txt:t,createdAt:Date.now(),type:"comment",byMember:a};n.comments.push(r),e.props.updateTaskDetails(n)},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.state.isShowActivities,t=this.props,a=t.currTask,n=t.loggedinUser,r=this.getTaskCommentsAndActivitiesSorted();return Object(H.jsxs)("div",{className:"task-activities flex column",children:[Object(H.jsxs)("div",{className:"window-modal-title flex space-between",children:[Object(H.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(H.jsx)(xn.a,{}),Object(H.jsx)("h3",{children:"Activity"})]}),Object(H.jsx)("button",{className:"activity-toggle-btn",onClick:this.onToggleComments,children:e?"Hide details":"Show details"})]}),Object(H.jsx)(kn,{currTask:a,loggedinUser:n,addComment:this.addComment}),r&&r.length&&Object(H.jsx)(Nn,{CommAndAct:r,isShowActivities:e,currTask:a})]})}}]),a}(n.Component),Cn=a(247),Dn=a.n(Cn),Tn=a(246),Sn=a.n(Tn),Mn=a(248),An=a.n(Mn),In=a(249),En=a.n(In),Pn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.joinTask,n=t.toggleIsArchive,r=t.deleteTask,s=t.isArchive,c=t.currTaskDetails,o=t.loggedinUser,i=t.setPosition,l=t.togglePopover,d=c&&o?!!(null===(e=c.members)||void 0===e?void 0:e.find((function(e){return e._id===o._id}))):null;return Object(H.jsx)("aside",{className:"task-details-sidebar flex column full",children:Object(H.jsxs)("div",{className:"actions-wrapper flex",children:[!d&&Object(H.jsxs)("div",{className:"suggested flex column",children:[Object(H.jsx)("h4",{children:"SUGGESTED"}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:a,children:Object(H.jsxs)("div",{className:"action-btn-content flex",children:[Object(H.jsx)(_t.a,{}),Object(H.jsx)("span",{children:"Join"})]})})]}),Object(H.jsxs)("div",{className:"add-to-card flex column",children:[Object(H.jsx)("h4",{children:"ADD TO CARD"}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"MEMBERS"}),l()},children:Object(H.jsxs)("div",{className:" action-btn-content flex",children:[Object(H.jsx)(Sn.a,{}),Object(H.jsx)("span",{children:"Members"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),l()},children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(Ut.a,{}),Object(H.jsx)("span",{children:"Labels"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"CHECKLIST"}),l()},children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(Dn.a,{}),Object(H.jsx)("span",{children:"Checklist"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"DATE"}),l()},children:Object(H.jsxs)("div",{className:" action-btn-content flex ",children:[Object(H.jsx)(Vt.a,{}),Object(H.jsx)("span",{children:"Date"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"ATTACHMENT"}),l()},children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(Mt.a,{}),Object(H.jsx)("span",{children:"Attachment"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"COVER"}),l()},children:Object(H.jsxs)("div",{className:" action-btn-content flex ",children:[Object(H.jsx)(Ft.a,{}),Object(H.jsx)("span",{children:"Cover"})]})})]}),Object(H.jsxs)("div",{className:"actions flex column",children:[Object(H.jsx)("h4",{children:"ACTIONS"}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"MOVE"}),l()},children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(Ht.a,{}),Object(H.jsx)("span",{children:"Move"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:function(e){i({pos:{pageX:e.pageX,pageY:e.pageY},type:"COPY"}),l()},children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(Yt.a,{}),Object(H.jsx)("span",{children:"Copy"})]})}),Object(H.jsx)("button",{className:"secondary-btn action-btn",onClick:n,children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[s?Object(H.jsx)(An.a,{}):Object(H.jsx)(It.a,{}),Object(H.jsx)("span",{children:s?"Return to board":"Archive"})]})}),s&&Object(H.jsx)("button",{className:"secondary-btn action-btn danger-btn",style:{color:"#fff"},onClick:r,children:Object(H.jsxs)("div",{className:"action-btn-content flex ",children:[Object(H.jsx)(En.a,{style:{color:"#fff"}}),Object(H.jsx)("span",{children:"Delete"})]})})]})]})})}}]),a}(n.Component);var Bn={setPosition:Xe,togglePopover:He,setPopoverMenu:Ve},Un=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,loggedinUser:e.userModule.loggedinUser,board:e.boardModule.board}}),Bn)(Pn);var Ln={setPosition:Xe,togglePopover:He},_n=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Ln)((function(e){var t=e.currTaskDetails,a=e.board,n=e.setPosition,r=e.togglePopover,s=a.labels.filter((function(e){return t.labelIds.includes(e.id)}));return 0===s.length?Object(H.jsx)(H.Fragment,{}):Object(H.jsxs)("div",{className:"task-details-header-labels item-container flex column",children:[Object(H.jsx)("h3",{className:"task-details-header-title",children:"Labels"}),Object(H.jsxs)("div",{className:"labels-container flex wrap",children:[s.map((function(e){return Object(H.jsx)("span",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),r()},className:"label",style:{backgroundColor:e.color},children:e.title},e.id)})),Object(H.jsx)("button",{className:"secondary-btn",onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"LABELS"}),r()},children:Object(H.jsx)(Pe.a,{})})]})]})}));var Rn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),null)((function(e){var t=e.currTaskDetails;return t.members&&0!==t.members.length?Object(H.jsxs)("div",{className:"task-details-header-members flex column",children:[Object(H.jsx)("h4",{className:"task-details-header-title",children:" Members"}),Object(H.jsx)("div",{className:"container flex wrap",children:Object(H.jsx)(qe,{members:t.members,isInDetails:!0})})]}):Object(H.jsx)(H.Fragment,{})})),Fn=a(250),Gn=a.n(Fn),Yn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={formatedDate:"",dueDate:null,isTaskDone:!1},e.componentDidMount=function(){var t=e.props,a=t.board,n=t.currTaskDetails,r=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===n.id}))})),s=n.dueDate,c=n.isDone,o=e.dueDateFormat(n.dueDate);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{formatedDate:o,dueDate:s,isTaskDone:c,currGroup:r})}))},e.onToggleTaskDone=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!e.state.isTaskDone,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isTaskDone:a})})),n=e.props,r=n.board,s=n.saveTaskDetails,c=n.currTaskDetails,o=n.addActivity,i=n.setCurrTaskDetails,l=e.state.currGroup,c.isDone=!c.isDone,i(c),t.next=8,s(r,l,c);case 8:if(!a){t.next=13;break}return t.next=11,o(r,c,"due-date-complete");case 11:t.next=15;break;case 13:return t.next=15,o(r,c,"due-date-incomplete");case 15:case"end":return t.stop()}}),t)}))),e.dueDateFormat=function(e){var t=(new Date).getFullYear(),a=new Date(e).getFullYear(),n="";return n+="".concat(new Date(e).toLocaleString("en-GB",{day:"numeric"})," "),n+="".concat(new Date(e).toLocaleString("en-GB",{month:"short"})," at "),a!==t&&(n+="".concat(a," ")),n+="".concat(new Date(e).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0}).toLocaleUpperCase())},e.getDueStatus=function(){var t=Date.now(),a=e.props.currTaskDetails,n="";if(a.isDone)n="done";else if(t>a.dueDate)n="overdue";else{a.dueDate-t<864e5&&(n="due-soon")}return n},e}return Object(R.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.state.dueDate,a=this.props.currTaskDetails;if(t!==a.dueDate){var n=a.dueDate,r=this.dueDateFormat(a.dueDate);this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{dueDate:n,formatedDate:r})}))}}},{key:"dueMsg",get:function(){switch(this.getDueStatus()){case"done":return"COMPLETE";case"due-soon":return"DUE SOON";case"overdue":return"OVERDUE";default:return""}}},{key:"render",value:function(){var e=this.props,t=e.currTaskDetails,a=e.setPosition,n=e.togglePopover,r=this.state,s=r.formatedDate,c=r.isTaskDone,o=this.getDueStatus();return t.dueDate&&0!==t.dueDate.length?Object(H.jsxs)("div",{className:"task-details-header-date item-container flex column",children:[Object(H.jsx)("h3",{className:"task-details-header-title",children:"DUE DATE"}),Object(H.jsxs)("div",{className:"date-container flex wrap align-center",children:[c&&Object(H.jsx)(sn.a,{onClick:this.onToggleTaskDone,className:"todo-check pointer"}),!c&&Object(H.jsx)(nn.a,{onClick:this.onToggleTaskDone,className:"pointer"}),Object(H.jsxs)("button",{className:"secondary-btn date-btn flex align-center",children:[Object(H.jsx)("span",{className:"date-context",onClick:function(e){a({pos:{pageX:e.pageX,pageY:e.pageY},type:"DATE"}),n()},children:s}),Object(H.jsx)("span",{className:"drop-down-icon",children:Object(H.jsx)(Gn.a,{})}),Object(H.jsx)("span",{className:"due-msg ".concat(o),children:this.dueMsg})]})]})]}):Object(H.jsx)(H.Fragment,{})}}]),a}(n.Component);var Xn={setPosition:Xe,saveTaskDetails:De,togglePopover:He,addActivity:Ce,setCurrTaskDetails:Ge},Hn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Xn)(Yn),Wn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedMembers:null,selectedLabels:null,selectedDate:null},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedDate;this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{selectedDate:e})}))}},{key:"render",value:function(){return Object(H.jsxs)("div",{className:"task-details-header flex",children:[Object(H.jsx)(Rn,{}),Object(H.jsx)(_n,{}),Object(H.jsx)(Hn,{})]})}}]),a}(n.Component);var Vn=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),null)(Wn),zn=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currTask:null,currGroup:null},e.contentEl=null,e.componentDidMount=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params,r=n.boardId,s=n.taskId,c=n.listId,o=e.props,i=o.board,l=o.setCurrTaskDetails,d=o.setPopoverMenu,i){t.next=5;break}return t.next=5,e.props.loadBoard(r);case 5:u=null===(a=e.props.board)||void 0===a?void 0:a.groups.find((function(e){return e.id===c})),p=null===u||void 0===u?void 0:u.tasks.find((function(e){return e.id===s})),l(p),d(!1),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:u,currTask:p})}));case 10:case"end":return t.stop()}}),t)}))),e.updateTaskDetails=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.currGroup,r=e.props,s=r.board,c=r.saveTaskDetails,t.next=4,c(s,n,a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleOverlay=function(){e.props.history.goBack()},e.setTaksDetailsTitle=function(t){var a=e.props,n=a.currTaskDetails,r=a.setCurrTaskDetails;n.title=t,r(n),e.updateTaskDetails(n)},e.joinTask=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.board,r=a.currTaskDetails,s=a.loggedinUser,c=a.addActivity,o=a.setCurrTaskDetails,i=(i=r.members)||[],l=n.members.map((function(e){return e._id})),s){t.next=6;break}return t.abrupt("return");case 6:return l.includes(s._id)||n.members.push(s),i.map((function(e){return e._id})).includes(s._id)||i.push(s),r.members=i,o(r),t.next=13,c(n,r,"add-self");case 13:e.updateTaskDetails(r);case 14:case"end":return t.stop()}}),t)}))),e.deleteTask=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.currGroup,n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveBoard,o=n.addActivity,i=r.groups.indexOf(a),a.tasks=a.tasks.filter((function(e){return e.id!==s.id})),r.groups[i]=a,t.next=7,o(r,s,"remove-task");case 7:return t.next=9,c(r);case 9:e.props.history.goBack();case 10:case"end":return t.stop()}}),t)}))),e.toggleIsArchive=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.board,r=a.currTaskDetails,s=a.addActivity,c=a.setCurrTaskDetails,r.isArchive=(null===r||void 0===r?void 0:r.isArchive)||!1,r.isArchive=!r.isArchive,c(r),!r.isArchive){t.next=9;break}return t.next=7,s(n,r,"add-to-archive");case 7:t.next=11;break;case 9:return t.next=11,s(n,r,"remove-from-archive");case 11:e.updateTaskDetails(r);case 12:case"end":return t.stop()}}),t)}))),e}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setCurrTaskDetails(null),this.props.setPosition({pageX:null,pageY:null,type:null}),this.props.setPopover(!1)}},{key:"render",value:function(){var e,t=this,a=this.state.currGroup,n=this.props,r=n.board,s=n.currTaskDetails,c=n.loggedinUser;if(!s||!r||!a)return Object(H.jsx)(H.Fragment,{});var o=s.style;s.style=o||{bgColor:null,bgUrl:null};var i=s.style,l=i.bgColor,d=i.bgUrl,u=s.isArchive;return Object(H.jsxs)("div",{style:{position:"fixed",inset:0,height:"100vh",overflowY:"auto",zIndex:90},children:[Object(H.jsx)("div",{className:"overlay show",onClick:function(){return t.props.history.push("/board/".concat(r._id))}}),Object(H.jsxs)("section",{className:"task-details flex column",children:[Object(H.jsx)("button",{onClick:function(){return t.props.history.push("/board/".concat(r._id))},className:"close-task-details ".concat(l?"cover":""),children:Object(H.jsx)(lt.a,{})}),(l||d)&&Object(H.jsx)(Ga,{}),u&&Object(H.jsxs)("div",{className:"task-details-archived flex",children:[Object(H.jsx)("i",{className:"fas fa-archive icon-sm"}),Object(H.jsx)("h3",{children:"This card is archived."})]}),Object(H.jsx)(Ra,{taskTitle:s.title,setTaksDetailsTitle:this.setTaksDetailsTitle,taskList:(null===(e=r.groups.find((function(e){return e.tasks.some((function(e){return e.id===s.id}))})))||void 0===e?void 0:e.title)||""}),Object(H.jsxs)("div",{className:"task-details-body flex",children:[Object(H.jsxs)("div",{className:"task-details-main flex column",children:[Object(H.jsx)(Vn,{toggleTaskDone:this.toggleTaskDone}),Object(H.jsx)(Ha,{currTask:s,updateTaskDetails:this.updateTaskDetails}),Object(H.jsx)(tn,{}),Object(H.jsx)(On,{}),Object(H.jsx)(wn,{currTask:s,loggedinUser:c,activities:r.activities,updateTaskDetails:this.updateTaskDetails})]}),Object(H.jsx)(Un,{joinTask:this.joinTask,deleteTask:this.deleteTask,toggleIsArchive:this.toggleIsArchive,isArchive:u})]})]})]})}}]),a}(n.Component);var Jn={saveBoard:ye,saveTaskDetails:De,setCurrTaskDetails:Ge,setPopover:We,setPosition:Xe,setPopoverMenu:Ve,addActivity:Ce,loadBoard:ke},Kn=Object(i.b)((function(e){return{board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser,currTaskDetails:e.appModule.currTaskDetails}}),Jn)(zn),qn=a(108),Zn=a.n(qn),Qn=a(251);var $n={onLogin:_e,onSignup:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error when signing up",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},er=Object(i.b)(null,$n)((function(e){var t=Object(n.useState)(""),a=Object(Q.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(Q.a)(c,2),i=o[0],l=o[1],d=Object(n.useState)(""),u=Object(Q.a)(d,2),b=u[0],p=u[1],j=Object(n.useState)(!0),f=Object(Q.a)(j,2),m=f[0],O=f[1],g=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.profileObj.name,r="".concat(a.profileObj.givenName," "),s=a.profileObj.googleId,c=a.profileObj.imageUrl,!m){t.next=9;break}return t.next=7,e.onLogin({username:r,password:s});case 7:t.next=11;break;case 9:return t.next=11,e.onSignup({username:r,password:s,imgUrl:c,fullname:n});case 11:e.history.push("/workspace/");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(v.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),r.trim()&&i.trim()&&(m?(e.onLogin({username:r,password:i}),e.history.push("/workspace")):(e.onSignup({username:r,password:i,fullname:b,imgUrl:""}),e.history.push("/workspace")));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(H.jsxs)("div",{className:"login-signup  flex column align-center",children:[Object(H.jsxs)("div",{className:"logo flex ",children:[Object(H.jsx)(Zn.a,{className:"logo-icon"}),Object(H.jsx)("h1",{children:"Trellex"})]}),Object(H.jsxs)("div",{className:"login-container flex column",children:[m?Object(H.jsx)("p",{children:"Log in to Trellex"}):Object(H.jsx)("p",{children:"Sign up"}),Object(H.jsxs)("form",{className:"flex column",onSubmit:x,children:[Object(H.jsx)("input",{type:"txt",value:r,onChange:function(e){return s(e.target.value)},placeholder:"Enter Username"}),!m&&Object(H.jsx)("input",{type:"txt",value:b,onChange:function(e){return p(e.target.value)},placeholder:"Enter Full Name"}),Object(H.jsx)("input",{type:"password",value:i,onChange:function(e){return l(e.target.value)},placeholder:"Enter Password"}),Object(H.jsx)("button",{className:"login-submit",children:m?"Log me in":"Sign me up"}),Object(H.jsx)(Qn.GoogleLogin,{clientId:"1066940480428-m4n85h2lafgf2m7v5j7prda0tmigel93.apps.googleusercontent.com",buttonText:m?"Login with Google ":"Sign up with Google",onSuccess:g,onFailure:function(e){console.dir(e)},cookiePolicy:"single_host_origin"})]}),Object(H.jsx)("p",{onClick:function(){return O(!m)},children:m?"Or sign up...":"Back to Login"})]})]})})),tr=a(97);function ar(e){var t=e.board,a=t.members,n={};a.forEach((function(e){n[e.fullname]=0}));for(var r=function(e){t.groups.forEach((function(t){t.tasks.forEach((function(t){t.members&&t.members.length&&t.members.forEach((function(t){t.fullname===a[e].fullname&&n[t.fullname]++}))}))}))},s=0;s<a.length;s++)r(s);var c={labels:Object.keys(n),datasets:[{label:"Tasks per member",data:Object.values(n),backgroundColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};return Object(H.jsx)(tr.a,{data:c,options:{scales:{x:{ticks:{color:"white",font:{family:"Segoe UI",size:15}}},y:{ticks:{color:"white",font:{family:"Segoe UI",size:15}}}},elements:{bar:{borderWidth:2}},responsive:!0,plugins:{title:{display:!0,text:"Tasks per member",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}},datalabels:{anchor:"end",align:"end",offset:-2,color:"#000000",font:{size:12}},legend:{display:!1}},maintainAspectRatio:!1},width:250,height:450})}function nr(e){var t=e.board,a={labels:t.labels.map((function(e){return e.title})),datasets:[{label:"# of labels",data:function(){for(var e=t.labels.map((function(e){return e.id})),a=[],n=0;n<e.length;n++)a.push(0);for(var r=0;r<t.groups.length;r++)for(var s=0;s<t.groups[r].tasks.length;s++)for(var c=0;c<t.groups[r].tasks[s].labelIds.length;c++)e.includes(t.groups[r].tasks[s].labelIds[c])&&a[e.indexOf(t.groups[r].tasks[s].labelIds[c])]++;return a}(),backgroundColor:Object(u.a)(t.labels.map((function(e){return e.color}))),borderColor:Object(u.a)(t.labels.map((function(e){return e.color}))),borderWidth:3}]};return Object(H.jsx)(tr.b,{data:a,width:350,height:350,options:{responsive:!0,plugins:{title:{display:!0,text:"Tasks by labels",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}},legend:{position:"right",labels:{color:"rgba(255, 255, 255, 0.897)",boxWidth:14,boxHeight:14,font:{size:14,family:"Segoe UI"}}}},maintainAspectRatio:!1}})}var rr=function(e){var t={labels:Object(u.a)(e.taskDetails.sortedNames),datasets:[{label:"Activities",data:Object(u.a)(e.taskDetails.sortedAmount),backgroundColor:["#c277e0","#61bd4f","#ff9e1a","#334563"],borderColor:["#c277e0","darkgreen","#ff9e1a","#334563"],borderWidth:1}]};return Object(H.jsx)("div",{className:"chart-activity",children:Object(H.jsx)(tr.c,{data:t,options:{indexAxis:"x",elements:{bar:{borderWidth:2}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Member activity",color:"rgba(255, 255, 255, 0.897)",font:{size:"30",family:"Segoe UI"}}},scales:{x:{ticks:{color:"rgba(255, 255, 255, 0.897)",font:{family:"Segoe UI",size:15}}},y:{ticks:{color:"rgba(255, 255, 255, 0.897)",title:"Activity",font:{family:"Segoe UI",size:15}}}},grid:{color:"rgba(255, 255, 255, 0.897)"}},height:280})})},sr=a(254),cr=a.n(sr);var or={loadBoard:ke},ir=[{path:"/workspace",component:Ie,label:"Workspace",isExact:!0},{path:"/board/:boardId",component:Ua,label:"Board"},{path:"/board/:boardId/dashboard",component:Object(i.b)((function(e){return{board:e.boardModule.board}}),or)((function(e){var t;Object(n.useEffect)((function(){if(!(null===e||void 0===e?void 0:e.board)){var t=e.match.params.boardId;e.loadBoard(t)}}),[e]);var a=e.board,r=function(){if(e.board){var t=0,n=0,r=0,s=0,c=0,o=0,i=0,l=0,d={};a.groups.length&&(null===a||void 0===a||a.activities.forEach((function(e){var t;e.byMember&&(d[null===(t=e.byMember)||void 0===t?void 0:t.fullname]=d[e.byMember.fullname]?d[e.byMember.fullname]+1:1)})),a.groups.forEach((function(e){null===e||void 0===e||e.tasks.forEach((function(e){e.checklists&&(c+=e.checklists.length,e.checklists.forEach((function(e){var t=e.todos.length,a=0;i+=e.todos.length,e.todos.forEach((function(e){e.isDone&&(l++,a++)})),t===a&&o++}))),e.isArchive?n+=1:t+=1,s+=(null===e||void 0===e?void 0:e.isDone)?1:0,r+=(null===e||void 0===e?void 0:e.dueDate)<Date.now()&&!e.isDone?1:0}))})));var u=Object.entries(d).sort((function(e,t){return t[1]-e[1]})),b=u.map((function(e){return e[0]})),p=u.map((function(e){return e[1]}));return{tasks:t,archivedTasks:n,overDueTasks:r,doneTasks:s,checklists:c,doneChecklists:o,todos:i,doneTodos:l,sortedNames:b,sortedAmount:p}}}();return e.board?Object(H.jsxs)("section",{className:"dashboard-overlay flex column fade-in",children:[Object(H.jsx)("button",{onClick:function(){e.history.goBack()},className:"close-btn clean-btn",children:Object(H.jsx)(lt.a,{})}),Object(H.jsxs)("div",{className:"dashboard-container flex column ",children:[Object(H.jsxs)("div",{className:"header flex column justify-center align-center",children:[Object(H.jsx)("h1",{className:"dash-title",children:a.title}),Object(H.jsxs)("p",{className:"date",children:["Created at ",new Date(a.createdAt).toLocaleString()]})]}),Object(H.jsxs)("div",{className:"info-container flex align-center",children:[Object(H.jsxs)("div",{className:"info-box flex",children:[Object(H.jsxs)("div",{className:"flex column big-num-box",children:[Object(H.jsx)("p",{className:"info-num",children:null===(t=a.members)||void 0===t?void 0:t.length}),Object(H.jsx)("p",{className:"below-num",children:"Members"})]}),Object(H.jsx)("div",{className:"flex column details",children:Object(H.jsx)(cr.a,{className:"icon"})})]}),Object(H.jsxs)("div",{className:"info-box flex",children:[Object(H.jsxs)("div",{className:"flex column big-num-box",children:[Object(H.jsx)("p",{className:"info-num",children:r.tasks}),Object(H.jsx)("p",{className:"below-num",children:"Tasks"})]}),Object(H.jsxs)("div",{className:"flex column details",children:[Object(H.jsxs)("p",{className:"green",children:[r.doneTasks," Completed"]}),Object(H.jsxs)("p",{className:"red",children:[r.overDueTasks," Overdue "]}),Object(H.jsxs)("p",{className:"yellow",children:[r.archivedTasks," Archived "]})]})]}),Object(H.jsxs)("div",{className:"info-box flex",children:[Object(H.jsxs)("div",{className:"flex column big-num-box",children:[Object(H.jsx)("p",{className:"info-num",children:r.checklists}),Object(H.jsx)("p",{className:"below-num",children:"Checklist".concat(1!==r.checklists?"s":"")})]}),Object(H.jsxs)("div",{className:"flex column details",children:[Object(H.jsxs)("p",{className:"green",children:[r.doneChecklists," Completed"]}),Object(H.jsxs)("p",{className:"yellow",children:[r.todos," Todos "]}),Object(H.jsxs)("p",{className:"red",children:[r.todos-r.doneTodos," Open todos"]})]})]})]}),Object(H.jsxs)("div",{className:"chart-container flex ",children:[Object(H.jsx)("div",{className:"chart flex align-center",children:Object(H.jsx)(nr,{board:a})}),Object(H.jsx)("div",{className:"chart flex align-center",children:Object(H.jsx)(rr,{taskDetails:r})}),Object(H.jsx)("div",{className:"chart flex align-center",children:Object(H.jsx)(ar,{board:a})})]})]})]}):Object(H.jsx)("section",{className:"dashboard-overlay flex column ",children:Object(H.jsx)(ce,{})})})),label:"Board",isExact:!0},{path:"/board/:boardId/:listId/:taskId",component:Kn,label:"Task Details"},{path:"/board/",component:Ua,label:"Board",isExact:!0},{path:"/login",component:er,isExact:!0},{path:"/",component:W,label:"Home \ud83c\udfe0",isExact:!0}],lr=a(255),dr=a.n(lr),ur=a(256),br=a.n(ur);var pr={addBoard:Ne,setPosition:Xe,togglePopover:He,setPopoverMenu:Ve},jr=Object(Y.e)(Object(i.b)((function(e){return{user:e.userModule.loggedinUser,boards:e.boardModule.boards,userNotifications:e.userModule.userNotifications}}),pr)((function(e){var t=Object(n.useState)(!1),a=Object(Q.a)(t,2),r=a[0],s=a[1],c=function(){var t=Object(v.a)(h.a.mark((function t(a,n,r){var c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addBoard(a,n,r);case 2:c=t.sent,s(!1),e.history.push("/board/".concat(c._id));case 5:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),i=e.location.pathname.includes("board");return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("header",{className:"main-header flex align-center ".concat(i?"on-board":""),children:[Object(H.jsxs)("div",{className:"header-btn-container flex",children:[Object(H.jsx)(o.b,{to:"/",className:"header-btn",children:Object(H.jsx)(dr.a,{})}),Object(H.jsxs)(o.b,{to:"/workspace",className:"header-btn boards",children:[Object(H.jsx)(Zn.a,{className:"icon"}),"Boards"]})]}),Object(H.jsx)(o.b,{to:"/",className:"clean-link",children:Object(H.jsxs)("div",{className:"logo",children:[Object(H.jsx)(Zn.a,{className:"logo-icon"}),Object(H.jsx)("h1",{children:"Trellex"})]})}),e.user?Object(H.jsxs)("div",{className:"header-btn-container flex",children:[Object(H.jsx)("button",{className:"header-btn",onClick:function(){return s(!r)},children:Object(H.jsx)(Pe.a,{className:"icon"})}),Object(H.jsx)("button",{className:"header-btn notify-btn",style:{opacity:i?1:.4,pointerEvents:i?"auto":"none"},onClick:function(t){i&&(e.setPosition({pos:{pageX:t.pageX,pageY:t.pageY},type:"NOTIFICATION"}),e.setPopoverMenu(!0),e.togglePopover())},children:Object(H.jsx)(br.a,{className:"icon"})}),Object(H.jsx)(qe,{members:[e.user],isInHeader:!0})]}):Object(H.jsx)("div",{className:"header-btn-container flex login",children:Object(H.jsx)(o.b,{className:"clean-link",to:"/login",children:Object(H.jsx)("button",{className:"header-btn boards login",children:"Login"})})}),Object(H.jsx)("div",{className:"overlay ".concat(r?"show":""),onClick:function(){return s(!1)}})]}),r&&Object(H.jsx)(ae,{boardMode:"true",setCreateShown:s,onAdd:c})]})}))),hr=a(257),vr=a.n(hr);function fr(e){var t=e.label,a=e.labelsId,n=e.toggleLabelCheck,r=e.toggleIsEditCreate,s=e.setLabelEdit,c=e.isFilter;e.isLabelFilterSelected;return Object(H.jsx)(H.Fragment,{children:c?Object(H.jsx)("li",{className:"flex",onClick:function(){n(t.id)},children:Object(H.jsxs)("div",{className:"label-popover-preview flex",style:{backgroundColor:t.color},children:[Object(H.jsx)("span",{children:t.title}),a.length>0&&a.includes(t.id)&&Object(H.jsx)("span",{style:{lineHeight:"1rem"},children:Object(H.jsx)(Qe.a,{style:{width:"16px",height:"16px"}})})]})},t.id):Object(H.jsxs)("li",{className:"flex",onClick:function(){n(t.id)},children:[Object(H.jsxs)("div",{className:"label-popover-preview flex",style:{backgroundColor:t.color},children:[Object(H.jsx)("span",{children:t.title}),a.length>0&&a.includes(t.id)&&Object(H.jsx)("span",{style:{lineHeight:"1rem"},children:Object(H.jsx)(Qe.a,{style:{width:"16px",height:"16px"}})})]}),Object(H.jsx)("div",{className:"flex align-center justify-center",children:Object(H.jsx)(vr.a,{style:{width:"16px",height:"16px",color:"#42526e"},onClick:function(e){e.stopPropagation(),r(),s(t)}})})]},t.id)})}function mr(e){var t=e.labelIds,a=e.labels,n=e.handleChange,r=e.toggleIsCreate,s=e.toggleLabelCheck,c=e.search,o=e.setLabelEdit,i=e.toggleIsEditCreate;return Object(H.jsxs)("div",{className:"popover-labels",children:[Object(H.jsx)("input",{type:"search",placeholder:"Search Labels",onChange:n,value:c}),Object(H.jsx)("h4",{children:"LABELS"}),Object(H.jsx)("ul",{className:"clean-list",children:a&&a.length>0&&a.filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(H.jsx)(fr,{label:e,labelsId:t,toggleLabelCheck:s,toggleIsEditCreate:i,setLabelEdit:o,toggleIsCreate:r},e.id)}))}),Object(H.jsx)("button",{className:"secondary-btn",onClick:i,children:"Create a new label"})]})}var Or=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={photos:null},e.colors=["#61bd4f","#f2d600","#ff9e1a","#eb5a46","#c277e0","#0279bf","#52e898","#ff78cb","#334563","#b3bac5"],e.gradients=["linear-gradient(to bottom, #000000, #434343)","linear-gradient(to right, #2980b9, #2c3e50)","linear-gradient(to right, #3494e6, #ec6ead)","linear-gradient(to left, #2f7336, #aa3a38)","linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)","linear-gradient(to bottom, #e52d27, #b31217)"],e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.queryPhotos();case 2:t=e.sent,this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{photos:t})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.search===this.props.search){e.next=5;break}return e.next=3,le.queryPhotos(this.props.search);case 3:a=e.sent,this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{photos:a})}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.selectedColor,n=e.isGradient,r=e.isImages,s=this.state.photos;return Object(H.jsxs)("div",{className:"color-palette",children:[!r&&this.colors.map((function(e){return Object(H.jsxs)("label",{className:"flex align-center justify-center",style:{background:e},name:"label-color",htmlFor:"color-".concat(e),children:[Object(H.jsx)("input",{type:"radio",name:"color",id:"color-".concat(e),value:e,onClick:t}),a===e&&Object(H.jsx)(Qe.a,{style:{width:"16px",height:"16px",color:"white"}},e)]},e)})),n&&!r&&this.gradients.map((function(e){return Object(H.jsxs)("label",{className:"flex align-center justify-center",style:{background:e},name:"label-color",htmlFor:"gradient-".concat(e),children:[Object(H.jsx)("input",{type:"radio",name:"color",id:"gradient-".concat(e),value:e,onClick:t}),a===e&&Object(H.jsx)(Qe.a,{style:{width:"16px",height:"16px",color:"white"}},e)]},e)})),r&&s&&s.map((function(e,n){return Object(H.jsxs)("label",{className:"flex align-center justify-center",style:{width:"155px",height:"110px",backgroundImage:"url(".concat(e.urls.regular),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},name:"label-color",htmlFor:"photo-".concat(n),children:[Object(H.jsx)("input",{type:"radio",name:"color",id:"photo-".concat(n),value:e.urls.full,onClick:t}),a===e.url&&Object(H.jsx)(Qe.a,{style:{width:"16px",height:"16px",color:"white"}},n)]},n)}))]})}}]),a}(r.a.Component),gr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",color:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(qa.a)({},n,r))},e.onSubmitEditLabel=function(){e.state.title&&e.state.color&&e.props.submitLabel(Object(b.a)({},e.state))},e.onSubmitCreate=function(){e.state.title&&e.state.color&&e.props.submitCreateLabel(Object(b.a)({},e.state))},e.onRemoveLabel=function(){e.props.removeLabel(Object(b.a)({},e.state))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.label;this.setState({title:(null===e||void 0===e?void 0:e.title)||"",color:(null===e||void 0===e?void 0:e.color)||"",id:(null===e||void 0===e?void 0:e.id)||""})}},{key:"componentWillUnmount",value:function(){this.setState({title:"",color:"",id:""})}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.color,n=this.props.label;return Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("div",{className:"label-add-content",children:[Object(H.jsx)("label",{htmlFor:"label-input",children:"Name"}),Object(H.jsx)("input",{id:"label-input",type:"text",name:"title",value:t,onChange:this.handleChange,className:"pop-over-input"}),Object(H.jsx)("h4",{children:"Color"}),Object(H.jsx)(Or,{handleChange:this.handleChange,selectedColor:a}),Object(H.jsxs)("div",{className:"flex space-between",children:[Object(H.jsx)("button",{className:"primary-btn",onClick:this.onSubmitEditLabel,children:n&&n.title?"Save":"Create"}),n.title&&Object(H.jsx)("button",{className:"danger-btn",onClick:this.onRemoveLabel,children:"Delete"})]})]})})}}]),a}(n.Component),xr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:"",isEditCreate:!1,label:{title:"",color:""},labels:null,labelIds:null},e.handleChange=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.toggleLabelCheck=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currTaskDetails,s=n.board,c=n.saveTaskDetails,o=n.setCurrTaskDetails,i=e.state.currGroup,l=r.labelIds.includes(a)?r.labelIds.filter((function(e){return e!==a})):[].concat(Object(u.a)(r.labelIds),[a]),r.labelIds=l,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labelIds:l})})),o(r),t.next=8,c(s,i,r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setLabelEdit=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{label:t})}))},e.submitLabel=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,a.id?c=r.labels.map((function(e){return e.id===a.id?a:e})):(a.id=oe.makeId(),c=[].concat(Object(u.a)(r.labels),[a])),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labels:c})})),e.toggleIsEditCreate(),r.labels=c,t.next=7,s(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeLabel=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.saveBoard,c=n.currTaskDetails,o=n.setCurrTaskDetails,i=e.state.currGroup,l=r.labels.filter((function(e){return e.id!==a.id})),c.labelIds=c.labelIds.filter((function(e){return e!==a.id})),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{labels:l})})),e.toggleIsEditCreate(),r.labels=l,o(c),t.next=10,De(r,i,c);case 10:return t.next=12,s(r);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleIsEditCreate=function(){e.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{isEditCreate:!e.state.isEditCreate})}))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.board,n=t.currTaskDetails,r=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===n.id}))}));this.setState((function(t){return Object(b.a)(Object(b.a)({},t),{},{labels:e.props.board.labels,labelIds:e.props.currTaskDetails.labelIds,currGroup:r})}))}},{key:"componentDidUpdate",value:function(e,t){t.isEditCreate&&this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isEditCreate:!1,label:{color:"",title:""}})}))}},{key:"render",value:function(){var e=this.props,t=e.currTaskDetails,a=e.title,n=this.state,r=n.search,s=n.label,c=n.labels,o=n.isEditCreate;return t&&c?Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)(za,{title:a,children:[!o&&Object(H.jsx)(mr,{labels:c,labelIds:t.labelIds,search:r,handleChange:this.handleChange,toggleLabelCheck:this.toggleLabelCheck,toggleIsEditCreate:this.toggleIsEditCreate,setLabelEdit:this.setLabelEdit}),o&&Object(H.jsx)(gr,{label:s,removeLabel:this.removeLabel,submitLabel:this.submitLabel})]})}):Object(H.jsx)(H.Fragment,{})}}]),a}(n.Component);var kr={saveTaskDetails:De,saveBoard:ye,setCurrTaskDetails:Ge},yr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),kr)(xr),Nr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleSearch=function(t){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:t.target.value})}))},e.toggleMemberCheck=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.board,s=n.currTaskDetails,c=n.addActivity,o=n.loggedinUser,i=n.setCurrTaskDetails,l=e.state.currGroup,s.members=(null===s||void 0===s?void 0:s.members)||[],d=s.members.map((function(e){return e._id}))||[],p=d.includes(a._id)?s.members.filter((function(e){return e._id!==a._id})):[].concat(Object(u.a)(s.members),[a]),s.members=p,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedMembers:p,selectedMembersIds:d})})),i(s),a._id!==o._id){t.next=13;break}return t.next=11,c(r,s,d.includes(a._id)?"remove-self":"add-self");case 11:t.next=15;break;case 13:return t.next=15,c(r,s,d.includes(a._id)?"remove-member":"add-member",a.fullname);case 15:return t.next=17,e.props.saveTaskDetails(r,l,s);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.board,r=t.currTaskDetails,s=this.state.search;return Object(H.jsx)(za,{title:a,children:Object(H.jsxs)("div",{className:"members-popover",children:[Object(H.jsx)("input",{type:"search",placeholder:"Search members",onChange:this.handleSearch}),Object(H.jsx)("h4",{children:"BOARD MEMBERS"}),Object(H.jsx)("ul",{className:"clean-list",children:n&&n.members.length>0&&n.members.filter((function(e){return e.fullname.toLowerCase().includes(s.toLowerCase())})).map((function(t,a){var s;return Object(H.jsx)($e,{toggleMemberCheck:e.toggleMemberCheck,member:t,selectedMembersIds:(null===(s=r.members)||void 0===s?void 0:s.map((function(e){return e._id})))||[],members:n.members},a)}))})]})})}}]),a}(n.Component);var wr={saveTaskDetails:De,addActivity:Ce,setCurrTaskDetails:Ge},Cr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,popover:e.appModule.popover,board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),wr)(Nr),Dr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={txt:""},e.handlechange=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:a})}))},e.clearState=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{txt:""})}))},e.onAddChecklist=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,r=n.board,s=n.saveTaskDetails,c=n.currTaskDetails,o=n.togglePopover,i=n.addActivity,l=n.setCurrTaskDetails,d=e.state.currGroup,c.checklists||(c.checklists=[]),(u={id:oe.makeId(),title:e.state.txt,todos:[]}).title||(u.title="Checklist"),c.checklists.push(u),o(),l(c),t.next=11,s(r,d,c);case 11:return e.clearState(),t.next=14,i(r,c,"add-checklist");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this.props.title,t=this.state.txt;return Object(H.jsx)("div",{className:"checklist-container",children:Object(H.jsx)(za,{title:e,children:Object(H.jsx)("div",{children:Object(H.jsxs)("form",{className:"checklist-form",onSubmit:this.onAddChecklist,children:[Object(H.jsx)("label",{htmlFor:"checklist",className:"pop-over-label",children:"Title"}),Object(H.jsx)("input",{className:"checklist-input",id:"checklist",type:"text",value:t,onChange:this.handlechange,placeholder:"Enter a title...",autoFocus:!0}),Object(H.jsx)("button",{type:"submit",className:"nch-button add-checklist-btn",children:"Add"})]})})})})}}]),a}(n.Component);var Tr={saveTaskDetails:De,saveBoard:ye,togglePopover:He,addActivity:Ce,setCurrTaskDetails:Ge},Sr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Tr)(Dr),Mr=a(33),Ar=a(535),Ir=a(260),Er=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={date:null},e.handleChange=function(t){e.setState({date:t})},e.onSaveDueDate=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.togglePopover,c=n.saveTaskDetails,o=n.currTaskDetails,i=n.addActivity,l=n.setCurrTaskDetails,d=e.state.currGroup,o.dueDate=a?Date.parse(a):null,s(),l(o),t.next=7,c(r,d,o);case 7:if(!a){t.next=12;break}return t.next=10,i(r,o,"set-date",e.dueDateFormat(o.dueDate));case 10:t.next=14;break;case 12:return t.next=14,i(r,o,"remove-date");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dueDateFormat=function(e){var t=(new Date).getFullYear(),a=new Date(e).getFullYear(),n="";return n+="".concat(new Date(e).toLocaleString("en-GB",{day:"numeric"})," "),n+="".concat(new Date(e).toLocaleString("en-GB",{month:"short"})," at "),a!==t&&(n+="".concat(a," ")),n+="".concat(new Date(e).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0}).toLocaleUpperCase())},e.onRemoveDate=function(){e.onSaveDueDate(null)},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=a.dueDate?new Date(a.dueDate):new Date;this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{date:r,currGroup:n})}))}},{key:"render",value:function(){var e=this,t=this.props.title,a=this.state.date;return Object(H.jsx)("div",{className:"date-picker-container",children:Object(H.jsxs)(za,{title:t,children:[Object(H.jsx)("div",{children:Object(H.jsx)(Mr.a,{utils:Ir.a,children:Object(H.jsx)(Ar.a,{autoOk:!0,variant:"static",value:a,openTo:"date",color:"white",onChange:this.handleChange})})}),Object(H.jsxs)("div",{className:"btn-container flex column",children:[Object(H.jsx)("button",{className:"primary-btn",onClick:function(){return e.onSaveDueDate(a)},children:"Save"}),Object(H.jsx)("button",{className:"secondary-btn",onClick:this.onRemoveDate,children:"Remove"})]})]})})}}]),a}(n.Component);var Pr={saveTaskDetails:De,saveBoard:ye,togglePopover:He,addActivity:Ce,setCurrTaskDetails:Ge},Br=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Pr)(Er),Ur=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={webUrlSrc:"",webUrlName:""},e.uploadFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,b,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.board,s=n.currTaskDetails,c=n.saveTaskDetails,o=n.togglePopover,i=n.setCurrTaskDetails,l=e.state.currGroup,d=s.attachments,t.prev=3,t.next=6,pa.uploadFile(a);case 6:return b=t.sent,p={name:b.original_filename,id:b.asset_id,createdAt:Date.now(),url:b.secure_url},s.attachments=d?[].concat(Object(u.a)(d),[p]):[p],o(),i(s),t.next=13,c(r,l,s);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.log("error while connect server",t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e){return t.apply(this,arguments)}}(),e.clearState=function(){e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{webUrlSrc:"",webUrlName:""})}))},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(qa.a)({},r,n))}))},e.onAttachmentClick=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,b,p,j;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,n=a.webUrlSrc,r=a.webUrlName,s=a.currGroup,c=e.props,o=c.board,i=c.currTaskDetails,l=c.saveTaskDetails,d=c.togglePopover,b=c.setCurrTaskDetails,p=i.attachments,!n){t.next=11;break}return j={id:oe.makeId(),name:r||n,url:n.startsWith("http")?n:"https://"+n,createdAt:Date.now(),isWeb:!0},i.attachments=p?[].concat(Object(u.a)(p),[j]):[j],d(),b(i),t.next=10,l(o,s,i);case 10:e.clearState();case 11:case"end":return t.stop()}}),t)}))),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:n})}))}},{key:"render",value:function(){var e=this.props.title,t=this.state,a=t.webUrlSrc,n=t.webUrlName;return Object(H.jsx)(za,{title:e,children:Object(H.jsxs)("div",{className:"attachment-container",children:[Object(H.jsxs)("div",{className:"upload-preview",children:[Object(H.jsx)("label",{htmlFor:"file-upload",children:"Computer"}),Object(H.jsx)("input",{type:"file",onChange:this.uploadFile,accept:"img/*",id:"file-upload"})]}),Object(H.jsx)("label",{htmlFor:"url-upload",children:"Attach a link"}),Object(H.jsx)("input",{type:"text",id:"url-upload",placeholder:"Enter link url",value:a,name:"webUrlSrc",onChange:this.handleChange}),a&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("label",{htmlFor:"url-name-optional",children:"Link name (optional)"}),Object(H.jsx)("input",{type:"text",id:"url-name-optional",name:"webUrlName",value:n,placeholder:"Enter link name",onChange:this.handleChange})]}),Object(H.jsx)("button",{className:"primary-btn",onClick:this.onAttachmentClick,children:"Attach"})]})})}}]),a}(n.Component);var Lr={saveTaskDetails:De,saveBoard:ye,togglePopover:He,setCurrTaskDetails:Ge},_r=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Lr)(Ur),Rr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isHeaderSelected:null,isFullSelected:!1,selectedColor:!1,selectedPhoto:null},e.setHeaderSelected=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.currTaskDetails,r=a.saveTaskDetails,s=a.board,c=a.setCurrTaskDetails,o=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,isFullSelected:!1})})),n.style.coverMode="header",c(n),t.next=7,r(s,o,n);case 7:case"end":return t.stop()}}),t)}))),e.setFullSelected=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.currTaskDetails,r=a.board,s=a.saveTaskDetails,c=a.setCurrTaskDetails,o=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!0,isHeaderSelected:!1})})),n.style.coverMode="full",c(n),t.next=7,s(r,o,n);case 7:case"end":return t.stop()}}),t)}))),e.removeCover=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.saveTaskDetails,r=a.currTaskDetails,s=a.board,c=a.setCurrTaskDetails,o=e.state.currGroup,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!1,isHeaderSelected:!1})})),r.style.coverMode=null,r.style.bgColor=null,r.style.bgUrl=null,c(r),t.next=9,n(s,o,r);case 9:case"end":return t.stop()}}),t)}))),e.uploadFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.props,r=n.currTaskDetails,s=n.saveTaskDetails,c=n.board,o=n.setCurrTaskDetails,i=e.state.currGroup,t.next=5,pa.uploadFile(a);case 5:return l=t.sent,r.style.bgUrl=l.secure_url,o(r),t.next=10,s(c,i,r);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeFile=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currTaskDetails,s=n.saveTaskDetails,c=n.board,o=n.setCurrTaskDetails,i=e.state.currGroup,l=r.attachments,d=l.filter((function(e){return e.id!==a})),r.attachments=d,o(r),t.next=8,s(c,i,r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,d,u,p;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.saveTaskDetails,s=n.currTaskDetails,c=n.board,o=n.setCurrTaskDetails,i=e.state,l=i.isFullSelected,d=i.isHeaderSelected,u=i.currGroup,p=a.target.value,l||d?e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedColor:p})})):(e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,selectedColor:p})})),s.style.coverMode="header"),s.style.bgColor=p,o(s),t.next=8,r(c,u,s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))}));switch(a.style||(a.style={coverMode:"",bgColor:null,bgUrl:null}),a.style.coverMode){case"header":this.setState((function(e){var t,r;return Object(b.a)(Object(b.a)({},e),{},{isHeaderSelected:!0,selectedColor:(null===(t=a.style)||void 0===t?void 0:t.bgColor)||"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(r=a.style)||void 0===r?void 0:r.bgUrl)||null,currGroup:n})}));break;case"full":this.setState((function(e){var t,r;return Object(b.a)(Object(b.a)({},e),{},{isFullSelected:!0,selectedColor:(null===(t=a.style)||void 0===t?void 0:t.bgColor)||"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(r=a.style)||void 0===r?void 0:r.bgUrl)||null,currGroup:n})}));break;default:this.setState((function(e){var t;return Object(b.a)(Object(b.a)({},e),{},{selectedColor:"rgba(94, 108, 132, 0.3)",selectedPhoto:(null===(t=a.style)||void 0===t?void 0:t.bgUrl)||null,currGroup:n})}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.isHeaderSelected,n=t.isFullSelected,r=this.props,s=r.title,c=r.currTaskDetails.style,o=c.bgColor,i=c.bgUrl;return Object(H.jsx)(za,{title:s,children:Object(H.jsxs)("div",{className:"cover-popover",children:[Object(H.jsx)("h4",{children:"SIZE"}),Object(H.jsxs)("div",{className:"cover-options flex space-between align-center",children:[Object(H.jsx)("div",{className:"header-cover-preview ".concat(a?"selected":""),onClick:function(){e.setHeaderSelected()},children:i?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"header-section",style:{backgroundImage:"url(".concat(i),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}),Object(H.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative"},children:[Object(H.jsx)("div",{className:"line",style:{width:"122px"}}),Object(H.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}}),Object(H.jsx)("div",{className:"dot"})]})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("div",{className:"header-section",style:{backgroundColor:o}}),Object(H.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative"},children:[Object(H.jsx)("div",{className:"line",style:{width:"122px"}}),Object(H.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}}),Object(H.jsx)("div",{className:"dot"})]})]})}),i?Object(H.jsx)("div",{onClick:function(){return e.setFullSelected()},className:"full-cover-preview ".concat(n?"selected":""),style:{display:"flex",backgroundImage:"url(".concat(i),backgroundSize:"contain"},children:Object(H.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative",alignSelf:"flex-end"},children:[Object(H.jsx)("div",{className:"line",style:{width:"122px"}}),Object(H.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}})]})}):Object(H.jsx)("div",{onClick:function(){return e.setFullSelected()},className:"full-cover-preview ".concat(n?"selected":""),style:{backgroundColor:o,display:"flex"},children:Object(H.jsxs)("div",{style:{padding:"6px 4px 4px 6px",position:"relative",alignSelf:"flex-end"},children:[Object(H.jsx)("div",{className:"line",style:{width:"122px"}}),Object(H.jsx)("div",{className:"line",style:{width:"98px",marginTop:"4px"}})]})})]}),Object(H.jsx)("div",{className:"flex",children:Object(H.jsx)("button",{className:"secondary-btn full",onClick:this.removeCover,children:"Remove Cover"})}),Object(H.jsx)("h4",{children:"COLOR"}),Object(H.jsx)(Or,{handleChange:this.handleChange,selectedColor:o}),Object(H.jsx)("h4",{children:"ATTACHMENT"}),Object(H.jsxs)("div",{className:"upload-preview",children:[Object(H.jsx)("label",{className:"secondary-btn",htmlFor:"file-upload",children:"Upload a cover image"}),Object(H.jsx)("input",{type:"file",onChange:this.uploadFile,accept:"img/*",id:"file-upload"})]})]})})}}]),a}(r.a.Component);var Fr={saveTaskDetails:De,setCurrTaskDetails:Ge},Gr=Object(i.b)((function(e){return{currTaskDetails:e.appModule.currTaskDetails,board:e.boardModule.board}}),Fr)(Rr),Yr=a(537),Xr=a(539),Hr=a(540),Wr=a(534),Vr=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedGroup:null,selectedBoard:null,selectedPosition:null,taskTitle:""},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(qa.a)({},r,n))}))},e.handleBoardChange=function(t){var a=t.target.value,n=e.props.boards.find((function(e){return e._id===a}));e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedBoard:n})}))},e.handleGroupChange=function(t){var a=t.target.value,n=e.state.selectedBoard.groups.find((function(e){return e.id===a}));e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedGroup:n})}))},e.submitMoveSameBoard=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p,j,v,f,m,O,g;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.selectedBoard,r=a.selectedGroup,s=a.selectedPosition,c=a.taskTitle,o=a.currGroup,i=e.props,l=i.currTaskDetails,d=i.saveBoard,u=i.isCopy,p=i.togglePopover,j=n.groups.find((function(e){return e.id===o.id})),v=n.groups.indexOf(j),f=n.groups[v].tasks.find((function(e){return e.id===l.id})),m=n.groups[v].tasks.indexOf(f),O=u?Object(b.a)(Object(b.a)({},l),{},{id:oe.makeId(),title:c}):n.groups[v].tasks.splice(m,1),g=n.groups.indexOf(r),n.groups[g].tasks.splice(s,0,u?O:O[0]),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:r})})),p(),t.next=13,d(n);case 13:case"end":return t.stop()}}),t)}))),e.submitMoveAnotherBoard=Object(v.a)(h.a.mark((function t(){var a,n,r,s,c,o,i,l,d,u,p,j,v,f,m,O,g,x,k,y,N,w,C;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.selectedBoard,r=a.selectedGroup,s=a.selectedPosition,c=a.taskTitle,o=a.currGroup,i=e.props,l=i.currTaskDetails,d=i.saveBoard,u=i.board,p=i.boards,j=i.isCopy,v=i.togglePopover,f=p.find((function(e){return e._id===u._id})),m=p.indexOf(f),O=p[m].groups.find((function(e){return e.id===o.id})),g=p[m].groups.indexOf(O),x=p[m].groups[g].tasks.find((function(e){return e.id===l.id})),k=p[m].groups[g].tasks.indexOf(x),y=j?Object(b.a)(Object(b.a)({},l),{},{id:oe.makeId(),title:c}):p[m].groups[g].tasks.splice(k,1),N=p.indexOf(n),w=p[N].groups.find((function(e){return e.id===r.id})),C=p[N].groups.indexOf(w),p[N].groups[C].tasks.splice(s,0,j?y:y[0]),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{currGroup:r,selectedBoard:p[N]})})),v(),t.next=17,d(p[m]);case 17:return t.next=19,d(p[N]);case 19:case"end":return t.stop()}}),t)}))),e.onSubmit=function(){var t=e.state,a=t.selectedBoard,n=t.selectedGroup,r=t.taskTitle,s=e.props.board;a&&n&&r&&(s._id!==a._id?e.submitMoveAnotherBoard():e.submitMoveSameBoard())},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.board,a=e.currTaskDetails,n=t.groups.find((function(e){return e.tasks.some((function(e){return e.id===a.id}))})),r=n.tasks.find((function(e){return a.id===e.id})),s=n.tasks.indexOf(r);this.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{selectedBoard:t,selectedGroup:n,selectedPosition:s,taskTitle:a.title,currGroup:n})}))}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.boards,n=e.isCopy,r=this.state,s=r.selectedBoard,c=r.selectedGroup,o=r.selectedPosition,i=r.taskTitle;return s?Object(H.jsx)(za,{title:t,children:Object(H.jsxs)("div",{className:"popover-move-content",children:[n&&Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)("label",{children:"Title"}),Object(H.jsx)("input",{type:"text",value:i,name:"taskTitle",onChange:this.handleChange}),Object(H.jsx)("label",{children:"Copy to"})]}),Object(H.jsxs)("div",{className:"move-section flex wrap column",children:[Object(H.jsxs)(Wr.a,{variant:"filled",className:"choose-board clean-mui-arrow full",children:[Object(H.jsx)(Xr.a,{id:"selectedBoard",children:"Board"}),Object(H.jsx)(Yr.a,{labelId:"selectedBoard",id:"selectedBoard",value:s._id,name:"selectedBoard",inputProps:{MenuProps:{disableScrollLock:!0}},onChange:this.handleBoardChange,children:a.map((function(e){return Object(H.jsx)(Hr.a,{value:e._id,children:e.title},e._id)}))})]}),Object(H.jsxs)("div",{className:"flex",children:[Object(H.jsxs)(Wr.a,{variant:"filled",className:"choose-list clean-mui-arrow full",children:[Object(H.jsx)(Xr.a,{id:"selectedGroup",children:"List"}),Object(H.jsx)(Yr.a,{name:"selectedGroup",labelId:"selectedGroup",id:"selectedGroup",value:c.id,inputProps:{MenuProps:{disableScrollLock:!0}},disableUnderline:!0,onChange:this.handleGroupChange,children:s.groups.map((function(e){return Object(H.jsx)(Hr.a,{value:e.id,children:e.title},e.id)}))})]}),Object(H.jsxs)(Wr.a,{variant:"filled",className:"choose-position clean-mui-arrow ",children:[Object(H.jsx)(Xr.a,{id:"position-select",children:"Position"}),Object(H.jsx)(Yr.a,{name:"selectedPosition",labelId:"position-select",id:"position-select",value:o,inputProps:{MenuProps:{disableScrollLock:!0}},disableUnderline:!0,onChange:this.handleChange,children:c.tasks.length>0?Array.from(Array(c.tasks.length+1),(function(e,t){return Object(H.jsx)(Hr.a,{value:t,children:t},t)})):Object(H.jsx)(Hr.a,{value:0,children:0})})]})]})]}),Object(H.jsx)("button",{className:"primary-btn",onClick:this.onSubmit,children:n?"Create card":"Move"})]})}):Object(H.jsx)(H.Fragment,{})}}]),a}(n.Component);var zr={setCurrTaskDetails:Ge,saveBoard:ye,togglePopover:He},Jr=Object(i.b)((function(e){return{board:e.boardModule.board,boards:e.boardModule.boards,currTaskDetails:e.appModule.currTaskDetails}}),zr)(Vr),Kr=a(259),qr=a.n(Kr),Zr=a(258),Qr=a.n(Zr),$r=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.board,t=this.props,a=t.title,n=t.setPosition;if(!e)return Object(H.jsx)("div",{});var r=e.activities;r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0}));var s=e.style.bgImg;return Object(H.jsx)("div",{className:"board-menu",children:Object(H.jsx)(za,{title:a,children:Object(H.jsxs)("div",{className:"menu-details ",children:[Object(H.jsxs)("ul",{className:"clean-list menu-list",children:[Object(H.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_BACKGROUND"})},children:[s?Object(H.jsx)("span",{className:"menu-bg-span",style:{backgroundImage:"url(".concat(s),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}):Object(H.jsx)("span",{className:"menu-bg-span",style:{background:e.style.bgClr}}),Object(H.jsx)("span",{className:"menu-title",children:"Change background"})]}),Object(H.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_FILTER_CARDS"})},children:[Object(H.jsx)(Qr.a,{}),Object(H.jsx)("span",{className:"menu-title",children:"Search cards"})]}),Object(H.jsxs)("li",{onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_ARCHIVE"})},children:[Object(H.jsx)(qr.a,{}),Object(H.jsx)("span",{className:"menu-title",children:"Archive"})]})]}),Object(H.jsxs)("div",{className:"task-activities-header flex align-center",children:[Object(H.jsx)(xn.a,{}),Object(H.jsx)("h3",{className:"menu-activity",children:"Activity"})]}),Object(H.jsx)(Nn,{CommAndAct:r,isShowActivities:!0,currTask:null})]})})})}}]),a}(n.Component);var es={setPosition:Xe},ts=Object(i.b)((function(e){return{board:e.boardModule.board}}),es)($r);function as(e){var t=e.task,a=e.groupId,n=e.boardLabels,r=e.taskUrl,s=t.style,c=t.labelIds,i=t.dueDate,l=t.title,d=t.description,u=t.comments,b=t.attachments,p=t.checklists,j=t.media,h=function(e){var t=0,a=0;return p.forEach((function(e){t+=e.todos.length,e.todos.forEach((function(e){e.isDone&&(a+=1)}))})),e?t===a:"".concat(a,"/").concat(t)};return Object(H.jsx)(o.b,{to:r,className:"clean-link",children:Object(H.jsxs)("article",{className:"task-preview-container edit",style:{borderRadius:3,minWidth:240},children:[(null===s||void 0===s?void 0:s.bgUrl)&&Object(H.jsx)("img",{className:"task-cover-img",src:s.bgUrl,style:{backgroundColor:"white",borderRadius:"3px",objectFit:"contain",maxHeight:240},alt:""}),(null===s||void 0===s?void 0:s.bgColor)&&!(null===s||void 0===s?void 0:s.bgUrl)&&Object(H.jsx)("div",{className:"task-cover",style:{background:t.style.bgColor}}),Object(H.jsxs)("div",{className:"task-preview clean-link ",style:(null===s||void 0===s?void 0:s.bgUrl)&&{position:"relative",top:"-8px",marginBottom:"-8px",borderRadius:"0 0 3px 3px"},children:[(null===c||void 0===c?void 0:c.length)>0&&Object(H.jsx)(ht,{labelIds:c,boardLabels:n}),(null===j||void 0===j?void 0:j.videoUrl)&&Object(H.jsx)("div",{className:"video flex",onDrag:function(e){return e.stopPropagation()},children:Object(H.jsx)("video",{width:"100%",controls:!0,children:Object(H.jsx)("source",{src:t.media.videoUrl,type:"video/mp4"})})}),(null===j||void 0===j?void 0:j.audioUrl)&&Object(H.jsx)("div",{className:"audio",children:Object(H.jsx)("audio",{controls:!0,src:t.media.audioUrl})}),Object(H.jsx)("p",{className:"task-title",children:l}),Object(H.jsxs)("div",{className:"task-preview-icons flex align-center",children:[i&&Object(H.jsx)(Nt,{dueDate:i,isDone:t.isDone,taskId:t.id,groupId:a,noHover:!0}),(null===d||void 0===d?void 0:d.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Ct.a,{className:"icon"})}),(null===u||void 0===u?void 0:u.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Tt.a,{className:"icon msg"}),txt:u.length}),(null===b||void 0===b?void 0:b.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(Mt.a,{className:"icon attach"}),txt:b.length}),(null===p||void 0===p?void 0:p.length)>0&&Object(H.jsx)(vt,{icon:Object(H.jsx)(kt.a,{className:"icon"}),txt:h(),isDone:h(!0)}),(null===t||void 0===t?void 0:t.members)&&Object(H.jsx)(qe,{members:t.members,isInPreview:!0})]})]})]})})}var ns=a(95),rs=a.n(ns);var ss={setPosition:Xe},cs=Object(i.b)((function(e){return{board:e.boardModule.board}}),ss)((function(e){var t=e.board,a=e.setPosition,n=t.groups.map((function(e){return e.tasks})).flat();return n=n.filter((function(e){return e.isArchive})),Object(H.jsx)("div",{className:"board-menu",children:Object(H.jsx)(za,{title:"Archive",children:Object(H.jsxs)("div",{className:"pop-over-archive",children:[Object(H.jsx)("span",{className:"back",onClick:function(e){a({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(H.jsx)(rs.a,{})}),Object(H.jsx)("div",{className:"card-preview-container",children:n.map((function(e){var a=t.groups.find((function(t){return t.tasks.some((function(t){return t.id===e.id}))}));return Object(H.jsx)(as,{task:e,id:e.id,index:e.orgIdx,groupId:a.id,boardId:t._id,boardLabels:t.labels,taskUrl:"/board/".concat(t._id,"/").concat(a.id,"/").concat(e.id)},e.id)}))})]})})})})),os=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleChange=function(t){var a=e.props,n=a.board,r=a.saveBoard,s=t.target.value;s.includes("http")?(n.style.bgImg=s,n.style.bgClr=null):(n.style.bgClr=s,n.style.bgImg=null),r(n)},e.handleSearch=function(t){var a=t.target.value;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{search:a})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props,t=e.board,a=e.title,n=e.setPosition;if(!t)return Object(H.jsx)(H.Fragment,{});var r=this.state.search;return Object(H.jsx)("div",{className:"board-menu",children:Object(H.jsxs)(za,{title:a,children:[Object(H.jsx)("span",{className:"back",onClick:function(e){n({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(H.jsx)(rs.a,{})}),Object(H.jsx)("div",{className:"pop-over-background",children:Object(H.jsxs)("div",{className:"background-styles-container",children:[Object(H.jsx)("h4",{children:"Colors"}),Object(H.jsx)(Or,{selectedColor:t.style.bgClr,isGradient:!0,handleChange:this.handleChange}),Object(H.jsx)("h4",{children:"Images"}),Object(H.jsx)("input",{type:"search",value:r,name:"search",onChange:this.handleSearch}),Object(H.jsx)(Or,{selectedColor:t.style.bgClr,isImages:!0,search:r,handleSearch:this.handleSearch,handleChange:this.handleChange})]})})]})})}}]),a}(r.a.Component);var is={saveBoard:ye,setPosition:Xe},ls=Object(i.b)((function(e){return{board:e.boardModule.board}}),is)(os),ds=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userNotifications:null,boardId:null},e.componentDidMount=function(){e.setNotifications()},e.setNotifications=function(){var t=e.props.board,a=e.props.loggedinUser;if(t){var n=[];t.groups.forEach((function(e){e.tasks.forEach((function(e){e.members&&e.members.length&&e.members.forEach((function(t){t._id===a._id&&n.push(e.id)}))}))}));var r=t.activities.filter((function(e){return n.includes(e.task.id)}));(r=JSON.parse(JSON.stringify(r))).forEach((function(e){e.isNotRead=!0,e.isNotify=!0})),r.sort((function(e,t){return e.createdAt<t.createdAt?1:t.createdAt<e.createdAt?-1:0})),e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{userNotifications:r,boardId:t._id})}))}},e.componentDidUpdate=function(){var t=e.props.board,a=e.state.boardId;t&&t._id!==a&&e.setNotifications()},e.selectNotification=function(t){var a=e.props.board,n=a.groups.find((function(e){return e.tasks.some((function(e){return e.id===t.task.id}))}));t.isNotRead=!1,e.NotifyUpdate(t),e.props.history.push("/board/".concat(a._id,"/").concat(n.id,"/").concat(t.task.id))},e.NotifyUpdate=function(t){var a=e.state.userNotifications,n=a.findIndex((function(e){return e.id===t.id}));a[n]=t,e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{userNotifications:a})}))},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.title,t=this.state.userNotifications;return t?Object(H.jsx)("div",{className:"board-menu notification-popover",children:Object(H.jsx)(za,{title:e,children:Object(H.jsx)(Nn,{CommAndAct:t,isShowActivities:!0,currTask:null,selectNotification:this.selectNotification})})}):Object(H.jsx)(H.Fragment,{})}}]),a}(r.a.Component);var us=Object(Y.e)(Object(i.b)((function(e){return{board:e.boardModule.board,loggedinUser:e.userModule.loggedinUser}}),null)(ds)),bs=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){var e;Object(_.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{search:"",labels:[],members:[]}},e.handleSearch=function(t){var a=e.props,n=a.loadBoard,r=a.board,s=a.setFilterBy,c=t.target,o=c.value,i=c.name;e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},Object(qa.a)({},i,o))})}),(function(){s(e.state.filterBy),n(r._id)}))},e.toggleLabelCheck=function(t){var a=e.props,n=a.board,r=a.loadBoard,s=a.setFilterBy,c=e.state.filterBy,o=c.labels.includes(t)?c.labels.filter((function(e){return e!==t})):[].concat(Object(u.a)(c.labels),[t]);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},{labels:o})})}),(function(){s(e.state.filterBy),r(n._id)}))},e.toggleMemberCheck=function(t){var a=e.props,n=a.board,r=a.loadBoard,s=a.setFilterBy,c=e.state.filterBy,o=c.members.includes(t._id)?c.members.filter((function(e){return e!==t._id})):[].concat(Object(u.a)(c.members),[t._id]);e.setState((function(e){return Object(b.a)(Object(b.a)({},e),{},{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},{members:o})})}),(function(){s(e.state.filterBy),r(n._id)}))},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e,t,a;this.setState({filterBy:{search:(null===(e=this.props.filterBy)||void 0===e?void 0:e.search)||"",labels:(null===(t=this.props.filterBy)||void 0===t?void 0:t.labels)||[],members:(null===(a=this.props.filterBy)||void 0===a?void 0:a.members)||[]}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.title,r=t.setPosition;if(!a)return Object(H.jsx)(H.Fragment,{});var s=this.state.filterBy;return Object(H.jsx)("div",{className:"board-menu",children:Object(H.jsxs)(za,{title:n,children:[Object(H.jsx)("span",{className:"back",onClick:function(e){r({pos:{pageX:e.pageX,pageY:e.pageY},type:"BOARD_SHOW_MENU"})},children:Object(H.jsx)(rs.a,{})}),Object(H.jsxs)("div",{className:"popover-filter",children:[Object(H.jsx)("p",{children:"Search by task title"}),Object(H.jsx)("input",{type:"search",value:s.search,name:"search",onChange:this.handleSearch,placeholder:"Enter task title",autoFocus:!0}),Object(H.jsx)("hr",{}),Object(H.jsx)("p",{children:"Filter by task labels"}),a.labels.map((function(t){return Object(H.jsx)(fr,{label:t,labelsId:s.labels,isFilter:!0,toggleLabelCheck:e.toggleLabelCheck},t.id)})),Object(H.jsx)("hr",{}),Object(H.jsx)("p",{children:"Filter by members"}),a.members.map((function(t){return Object(H.jsx)($e,{member:t,selectedMembersIds:s.members,toggleMemberCheck:e.toggleMemberCheck},t._id)}))]})]})})}}]),a}(r.a.Component);var ps={setPosition:Xe,loadBoard:ke,setFilterBy:Se},js=Object(i.b)((function(e){return{board:e.boardModule.board,filterBy:e.boardModule.filterBy}}),ps)(bs);var hs=Object(i.b)((function(e){return{popover:e.appModule.popover}}),null)((function(e){switch(e.popover.pos.type){case"LABELS":return Object(H.jsx)(yr,Object(b.a)(Object(b.a)({},e),{},{title:"Labels"}));case"MEMBERS":return Object(H.jsx)(Cr,Object(b.a)(Object(b.a)({},e),{},{title:"Members"}));case"CHECKLIST":return Object(H.jsx)(Sr,Object(b.a)(Object(b.a)({},e),{},{title:"Checklist"}));case"DATE":return Object(H.jsx)(Br,Object(b.a)(Object(b.a)({},e),{},{title:"Date"}));case"ATTACHMENT":return Object(H.jsx)(_r,Object(b.a)(Object(b.a)({},e),{},{title:"Attach from..."}));case"COVER":return Object(H.jsx)(Gr,Object(b.a)(Object(b.a)({},e),{},{title:"Cover"}));case"MOVE":return Object(H.jsx)(Jr,Object(b.a)(Object(b.a)({},e),{},{isCopy:!1,title:"Move to"}));case"COPY":return Object(H.jsx)(Jr,Object(b.a)(Object(b.a)({},e),{},{isCopy:!0,title:"Copy"}));case"BOARD_SHOW_MENU":return Object(H.jsx)(ts,Object(b.a)(Object(b.a)({},e),{},{title:"Menu"}));case"BOARD_SHOW_ARCHIVE":return Object(H.jsx)(cs,Object(b.a)(Object(b.a)({},e),{},{title:"Archive"}));case"BOARD_SHOW_BACKGROUND":return Object(H.jsx)(ls,Object(b.a)(Object(b.a)({},e),{},{title:"Change background"}));case"BOARD_FILTER_CARDS":return Object(H.jsx)(js,Object(b.a)(Object(b.a)({},e),{},{title:"Search cards"}));case"NOTIFICATION":return Object(H.jsx)(us,Object(b.a)(Object(b.a)({},e),{},{title:"Notifications"}));default:return Object(H.jsx)(H.Fragment,{})}})),vs=function(e){Object(F.a)(a,e);var t=Object(G.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(R.a)(a,[{key:"componentWillUnmount",value:function(){J.terminate()}},{key:"render",value:function(){return Object(H.jsxs)("div",{children:[Object(H.jsx)(jr,{}),Object(H.jsx)("main",{children:ir.map((function(e){return Object(H.jsx)(Y.a,{exact:e.isExact,component:e.component,path:e.path},e.path)}))}),Object(H.jsx)(hs,{})]})}}]),a}(r.a.Component),fs=(a(488),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function ms(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(i.a,{store:L,children:Object(H.jsx)(o.a,{children:Object(H.jsx)(vs,{})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");fs?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ms(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ms(t,e)}))}}()}},[[489,1,2]]]);
//# sourceMappingURL=main.3d259208.chunk.js.map