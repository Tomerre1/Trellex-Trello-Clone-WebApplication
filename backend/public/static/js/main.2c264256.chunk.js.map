{"version":3,"sources":["store/board.reducer.js","services/http.service.js","services/user.service.js","store/user.reducer.js","store/app.reducer.js","store/store.js","assets/img/hero.png","assets/img/reactRedux.jpg","assets/img/nodejs.png","assets/img/mongo.png","assets/img/socket.jpg","assets/img/express.png","pages/Homepage.jsx","assets/img/rbdnd.png","services/socket.service.js","cmps/Workspace/BoardPreview.jsx","cmps/Workspace/BoardAddPalette.jsx","cmps/Workspace/BoardPreviewAdd.jsx","cmps/Workspace/BoardList.jsx","cmps/LoaderSpinner.jsx","services/util.service.js","services/board.service.js","store/board.actions.js","pages/Workspace.jsx","services/event-bus.service.js","store/user.actions.js","cmps/MemberPopup.jsx","store/app.actions.js","cmps/MemberPreview.jsx","cmps/MemberList.jsx","cmps/Popover/PopoverMemberPreview.jsx","cmps/MembersAddToBoard.jsx","cmps/BoardHeader.jsx","cmps/Group/AddNewGroup.jsx","cmps/TaskPreview/TaskLabels.jsx","cmps/TaskPreview/TaskDetailsPreview.jsx","cmps/TaskPreview/TaskDatePreview.jsx","cmps/TaskPreview/TaskActions.jsx","cmps/TaskPreview/TaskPreviewEdit.jsx","cmps/TaskPreview.jsx","cmps/TaskPreviewList.jsx","services/cloudinary-service.js","cmps/MediaRecord.jsx","cmps/Group/GroupFooter.jsx","cmps/Group/HeaderTitle.jsx","cmps/Group/GroupActions.jsx","cmps/GroupDetails.jsx","cmps/GroupList.jsx","pages/BoardApp.jsx","cmps/TaskHeader.jsx","cmps/TaskCardCover.jsx","cmps/TaskDescription.jsx","cmps/Popover/Popover.jsx","cmps/CheckDeletePopover.jsx","cmps/EditAttachmentPopover.jsx","cmps/TaskAttachmentPreview.jsx","cmps/TaskAttachment.jsx","cmps/TodoPreview.jsx","cmps/TodoList.jsx","cmps/TodoAdd.jsx","cmps/ProgressBar.jsx","cmps/TaskChecklistPreview.jsx","cmps/TaskChecklist.jsx","cmps/AddComment.jsx","cmps/ActivityPreview.jsx","cmps/ActivitiesList.jsx","cmps/TaskActivities.jsx","cmps/TaskActionsMenu.jsx","cmps/TaskHeaderLabels.jsx","cmps/TaskHeaderMembers.jsx","cmps/TaskHeaderDate.jsx","cmps/TaskHeaderDetails.jsx","pages/TaskDetails.jsx","pages/LoginSignup.jsx","cmps/Dashboard/BarChart.jsx","cmps/Dashboard/DoughnutChart.jsx","cmps/Dashboard/ActivityChart.jsx","cmps/Dashboard/Dashboard.jsx","routes.js","cmps/AppHeader.jsx","cmps/Popover/PopoverLabelPreview.jsx","cmps/Popover/PopoverLabelsListPreview.jsx","cmps/ColorPalette.jsx","cmps/Popover/PopoverLabelCreateEdit.jsx","cmps/Popover/PopoverLabels.jsx","cmps/Popover/PopoverMembers.jsx","cmps/Popover/PopoverChecklist.jsx","cmps/Popover/PopoverDate.jsx","cmps/Popover/PopoverAttachment.jsx","cmps/Popover/PopoverCover.jsx","cmps/Popover/PopoverMoveCopy.jsx","cmps/Popover/PopoverMenu.jsx","cmps/TaskPreview/TaskMenuPreview.jsx","cmps/Popover/PopoverMenuArchive.jsx","cmps/Popover/PopoverMenuBackground.jsx","cmps/Popover/PopoverNotification.jsx","cmps/Popover/PopoverMenuSearchCard.jsx","cmps/Popover/PopoverDynamicCmp.jsx","root-cmp.jsx","serviceWorkerRegistration.js","index.js"],"names":["initialState","boards","board","filterBy","search","labels","members","areLabelsExpanded","BASE_URL","axios","Axios","create","withCredentials","httpService","endpoint","data","ajax","a","method","url","params","res","console","log","dir","response","status","sessionStorage","clear","STORAGE_KEY_LOGGEDIN_USER","userService","login","logout","signup","getLoggedinUser","JSON","parse","getItem","getUsers","users","userCred","user","_saveLocalUser","setItem","stringify","loggedinUser","currTaskDetails","isDragDisabled","popover","pos","posX","posY","type","isOpen","isMenu","rootReducer","combineReducers","boardModule","state","action","newState","map","_id","filter","boardId","userModule","appModule","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Homepage","className","onClick","props","history","push","src","heroImg","alt","reactImg","nodeImg","expressImg","socketImg","mongoImg","Component","socketService","socket","setup","io","on","eventName","cb","off","removeAllListeners","emit","terminate","createSocketService","review","BoardPreview","saveBoard","onToggleStar","newBoard","isFavorite","err","to","style","background","bgImg","bgClr","title","color","BoardAddPalette","setBgClr","setBgImg","useState","selected","setSelected","border","name","htmlFor","id","value","ev","target","imgUrl","backgroundSize","BoardPreviewAdd","setTitle","isEditMode","toggleEditMode","boardMode","onChange","placeholder","preventDefault","trim","onAdd","setCreateShown","BoardList","onRemove","idx","starred","LoaderSpinner","height","width","timeout","utilService","makeId","length","txt","possible","i","charAt","Math","floor","random","makeLorem","size","words","getRandomIntInclusive","min","max","ceil","delay","ms","Promise","resolve","setTimeout","timeSince","date","seconds","Date","interval","APP_ID","boardService","query","getById","save","updateTask","group","task","groupNeedToUpdate","groups","find","currGroup","groupIndex","indexOf","taskNeedToUpdate","tasks","currTask","taskIndex","addTask","removeTask","addGroup","removeGroup","createActivity","activityType","activity","createdAt","now","byMember","updateTaskByIds","queryPhotos","get","photos","results","updatedBoard","savedBoard","taskTitle","groupId","audioUrl","videoUrl","newTask","isWeb","media","findIndex","taskId","groupIdx","newGroup","taskIdx","taskToFind","loadBoards","dispatch","loadBoard","Error","addBoard","addActivity","activities","saveTaskDetails","setFilterBy","_Workspace","componentDidMount","this","some","removeBoard","mapDispatchToProps","remove","Workspace","connect","eventBusService","listener","callListener","detail","addEventListener","removeEventListener","dispatchEvent","CustomEvent","showUserMsg","showErrorMsg","onLogin","credentials","myBus","onLogout","then","catch","MemberPopup","member","togglePopOpen","isInHeader","isInBoardList","removeUserFromBoard","userIdx","mmbr","splice","position","top","left","inset","backgroundColor","zIndex","fullname","toUpperCase","username","setCurrTaskDetails","toggleDragDisable","setPosition","togglePopover","setPopover","setPopoverMenu","MemberPreview","isInPreview","isPopOpen","pageX","pageY","MemberList","isInDetails","event","PopoverMemberPreview","selectedMembersIds","toggleMemberCheck","marginInlineEnd","includes","_MembersAddToBoard","handleSearch","e","setState","prevState","boardUsers","addUserToBoard","password","getFilteredUsers","every","filteredUsers","componentDidUpdate","prevProps","forceUpdate","setMembersPopup","toLowerCase","MembersAddToBoard","BoardHeader","isTitleEdit","setTitleEdit","setWidth","isMembersPopup","spanRef","useRef","useEffect","current","offsetWidth","onSubmit","ref","autoFocus","onBlur","updateTitle","handleText","minWidth","alignItems","stopPropagation","paddingRight","AddNewGroup","withRouter","match","isClicked","setIsClicked","btnText","setBtnText","toggleIsClicked","toggleExpandLabels","TaskLabels","labelIds","boardLabels","labelId","label","TaskDetailsPreview","isDone","icon","TaskDatePreview","isMouseOver","setMouseOver","setIsDone","toggleIsDone","dueDate","onMouseEnter","noHover","onMouseLeave","toLocaleDateString","undefined","month","day","_TaskActions","selectedAction","componentWillUnmount","isPopoverOpen","setActiveAction","parentElement","dataset","sendToArchive","isArchive","toggleMenu","popoverDispatch","menuPos","taskUrl","TaskActions","TaskPreviewEdit","getChecklistData","description","comments","attachments","checklists","todos","doneTodos","editTitle","setEditTitle","updateTaskName","borderRadius","bgUrl","objectFit","maxHeight","bgColor","marginBottom","TaskPreview","index","isMenuShown","toggleMenuShown","setMenuPos","getBoundingClientRect","right","innerHeight","bottom","calcPos","forEach","checklist","todo","coverMode","draggableId","provided","innerRef","draggableProps","dragHandleProps","zIndx","boxShadow","onDrag","controls","TaskPreviewList","filteredTasks","orgIdx","taskMembersIds","droppableId","droppableProps","visibilty","opacity","cloudinaryService","uploadFile","blob","CLOUD_NAME","PRESET_NAME","UPLOAD_URL","formData","FormData","append","files","fetch","body","json","error","_MediaRecord","record","isOverlay","startRecording","stopRecording","onStop","setMediaType","secure_url","setOverlay","StyledFab","styled","Fab","setAudioPath","maxWidth","padding","isFlipped","countdownTime","mimeType","constraints","audio","video","resizeMode","exact","ideal","aspectRatio","onRecordingComplete","strokeColor","Grid","item","container","justify","xs","display","flexDirection","justifyContent","React","MediaRecord","GroupFooter","setTaskTitle","mediaType","setType","onAddTask","ids","scrollToBottom","HeaderTitle","groupTitle","saveTitle","grpIdx","grp","GroupActions","GroupDetails","isAddNew","elRef","innerWidth","scrollTo","scrollHeight","behavior","snapshot","fontSize","GroupList","direction","_BoardApp","isMenuOpen","currentTarget","_loadBoard","loadUsers","clearBoard","setCurrentTarget","onDragEnd","result","destination","source","handleDrag","droppableIdStart","droppableIdEnd","droppableIndexStart","droppableIndexEnd","tempBoard","groupStart","groupEnd","BoardApp","TaskHeader","setTaksDetailsTitle","taskList","onKeyDown","key","textDecoration","fontWeight","TaskCardCover","TaskDescription","onSaveDescription","updateTaskDetails","handleChange","onToggleEdit","onEditMode","selectedInput","focus","input","_Popover","visible","contentEl","toggleVisibility","onSetPopoverPos","elRect","setPopoverPos","getContentStyles","transition","children","el","Popover","_CheckDeletePopover","typeTitle","substr","CheckDeletePopover","EditAttachmentPopover","urlName","attachment","onAttachmentUpdate","updateAttachment","attachName","class","_TaskAttachmentPreview","isPopover","isEditPopover","toggleBgUrl","toggleEditPopover","removeAttach","attachs","currAttach","setCover","removeCover","pathname","TaskAttachmentPreview","TaskAttachment","Fragment","_TodoPreview","todoTitle","onToggleEditMode","onSaveTodo","onToggleTodoIsDone","onRemoveTodo","onUndoChange","TodoPreview","TodoList","TodoAdd","onTodoAdd","addTodo","clearState","ProgressBar","completed","doneTodosCalc","parseInt","_TaskChecklistPreview","checklistIdx","todoIdx","currTodo","isDoneTodos","removeChecklist","TaskChecklistPreview","_TaskChecklist","TaskChecklist","AddComment","onAddComment","addComment","ActivityPreview","isShowActivities","selectNotification","isNotRead","isNotify","activityToShow","ActivitiesList","CommAndAct","TaskActivities","onToggleComments","getTaskCommentsAndActivitiesSorted","sort","b","comment","_TaskActionsMenu","joinTask","toggleIsArchive","deleteTask","loggedinUserIsJoin","TaskActionsMenu","TaskHeaderLabels","TaskHeaderMembers","_TaskHeaderDate","formatedDate","isTaskDone","dueDateFormat","onToggleTaskDone","currYear","getFullYear","dueYear","strDate","toLocaleString","hour","minute","hour12","toLocaleUpperCase","getDueStatus","dueStatus","dueMsg","TaskHeaderDate","_TaskHeaderDetails","selectedMembers","selectedLabels","selectedDate","TaskHeaderDetails","_TaskDetails","listId","list","toggleOverlay","goBack","boardMemberIds","currGroupIdx","overflowY","toggleTaskDone","TaskDetails","onSignup","LoginSignup","setUsername","setPassword","setFullname","isLogin","setIsLogin","onSuccess","profileObj","givenName","googleId","imageUrl","clientId","buttonText","onFailure","cookiePolicy","BarChart","taskPerMember","currMember","Object","keys","datasets","values","borderColor","borderWidth","options","scales","x","ticks","font","family","y","elements","bar","responsive","plugins","text","datalabels","anchor","align","offset","legend","maintainAspectRatio","DoughnutChart","labelsData","labelCounts","j","k","calcTasksByLabel","boxWidth","boxHeight","ActivityChart","membersActivity","indexAxis","grid","routes","path","component","isExact","taskDetails","archivedTasks","overDueTasks","doneTasks","doneChecklists","inTodos","inDoneTodos","getTaskDetails","AppHeader","userNotifications","isCreateShown","onAddBoard","isOnBoard","location","pointerEvents","PopoverLabelPreview","labelsId","toggleLabelCheck","toggleIsEditCreate","setLabelEdit","isFilter","isLabelFilterSelected","lineHeight","PopoverLabelsListPreview","toggleIsCreate","ColorPalette","colors","gradients","selectedColor","isGradient","isImages","colorCode","gradient","photo","backgroundImage","urls","regular","backgroundPosition","backgroundRepeat","full","PopoverLabelCreateEdit","onSubmitEditLabel","submitLabel","onSubmitCreate","submitCreateLabel","onRemoveLabel","removeLabel","_PopoverLabels","isEditCreate","updatedLabelsId","currLabelId","currLabel","PopoverLabels","_PopoverMembers","updatedMembers","PopoverMembers","_PopoverChecklist","handlechange","onAddChecklist","newList","PopoverChecklist","_PopoverDate","onSaveDueDate","onRemoveDate","utils","DateFnsUtils","DatePicker","autoOk","variant","openTo","PopoverDate","_PopoverAttachment","webUrlSrc","webUrlName","attach","original_filename","asset_id","onAttachmentClick","startsWith","accept","PopoverAttachment","_PopoverCover","isHeaderSelected","isFullSelected","selectedPhoto","setHeaderSelected","setFullSelected","removeFile","attachId","marginTop","alignSelf","PopoverCover","_PopoverMoveCopy","selectedGroup","selectedBoard","selectedPosition","handleBoardChange","handleGroupChange","submitMoveSameBoard","isCopy","fromGroup","fromGroupIdx","fromTask","fromTaskIdx","toGroupIdx","submitMoveAnotherBoard","currBoard","fromBoardIdx","toBoardIdx","toGroup","FormControl","InputLabel","Select","inputProps","MenuProps","disableScrollLock","MenuItem","disableUnderline","Array","from","PopoverMoveCopy","_PopoverMenu","PopoverMenu","TaskMenuPreview","_PopoverMenuArchive","flat","taskGroup","PopoverMenuArchive","_PopoverMenuBackground","PopoverMenuBackground","_PopoverNotification","setNotifications","userTasks","notify","NotifyUpdate","notifyIdx","currNotify","PopoverNotification","_PopoverMenuSearchCard","currMemeberId","PopoverMenuSearchCard","PopoverDynamicCmp","RootCmp","route","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","headers","contentType","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.2c264256.chunk.js","sourcesContent":["const initialState = {\r\n    boards: [],\r\n    board: null,\r\n    filterBy: {\r\n        search: '',\r\n        labels: [],\r\n        members: []\r\n    },\r\n    areLabelsExpanded: false\r\n}\r\nexport function boardReducer(state = initialState, action) {\r\n    var newState = state\r\n    var boards\r\n    // var board\r\n    switch (action.type) {\r\n        case 'SET_BOARDS':\r\n            newState = { ...state, boards: action.boards }\r\n            break\r\n        case 'SET_BOARD':\r\n            newState = { ...state, board: action.board }\r\n            break\r\n        case 'SAVE_BOARD':\r\n            boards = state.boards.map(board => (board._id === action.board._id) ? action.board : board)\r\n            newState = { ...state, boards, board: { ...action.board } }\r\n            break\r\n        case 'ADD_BOARD':\r\n            newState = { ...state, boards: [...state.boards, action.board] }\r\n            break\r\n        case 'SET_FILTER':\r\n            newState = { ...state, filterBy: { ...state.filterBy, ...action.filterBy } }\r\n            break\r\n        case 'REMOVE_BOARD':\r\n            boards = state.boards.filter(board => board._id !== action.boardId)\r\n            newState = { ...state, boards }\r\n            break\r\n        case 'TOGGLE_LABELS':\r\n            newState = { ...state, areLabelsExpanded: !state.areLabelsExpanded }\r\n            break\r\n\r\n        // case 'UNDO_REMOVE_BOARD':\r\n        //     if (state.lastRemovedBoard) {\r\n        //         newState = { ...state, boards: [...state.boards, state.lastRemovedBoard], lastRemovedBoard: null}\r\n        //     }\r\n        //     break\r\n        default:\r\n    }\r\n    // For debug:\r\n    // console.log('Prev State:', state)\r\n    console.log('Action:', action)\r\n    console.log('New State:', newState)\r\n    return newState\r\n\r\n}\r\n","import Axios from 'axios'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data,\r\n            params: (method === 'GET') ? data : null\r\n        })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            sessionStorage.clear();\r\n            // window.location.assign('/')\r\n        }\r\n        throw err\r\n    }\r\n}","import { httpService } from './http.service'\r\n\r\nconst STORAGE_KEY_LOGGEDIN_USER = 'loggedinUser'\r\nconst DB_KEY = 'user'\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getLoggedinUser,\r\n    getUsers,\r\n}\r\n\r\nasync function getUsers() {\r\n    const users = httpService.get('user')\r\n    return users\r\n}\r\n\r\n\r\nasync function login(userCred) {\r\n    const user = await httpService.post('auth/login', userCred)\r\n    if (user) return _saveLocalUser(user)\r\n\r\n}\r\n\r\nasync function signup(userCred) {\r\n    const user = await httpService.post('auth/signup', userCred)\r\n    return user\r\n}\r\n\r\nasync function logout() {\r\n    return await httpService.post('auth/logout')\r\n\r\n}\r\n\r\nfunction _saveLocalUser(user) {\r\n    sessionStorage.setItem(STORAGE_KEY_LOGGEDIN_USER, JSON.stringify(user))\r\n    return user\r\n}\r\n\r\nfunction getLoggedinUser() {\r\n    return JSON.parse(sessionStorage.getItem(STORAGE_KEY_LOGGEDIN_USER) || 'null')\r\n}\r\n","import { userService } from '../services/user.service.js'\r\n\r\n\r\nconst initialState = {\r\n    loggedinUser:userService.getLoggedinUser(),\r\n    users: [],\r\n}\r\nexport function userReducer(state = initialState, action) {\r\n    var newState = state;\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            newState = { ...state, loggedinUser: action.user }\r\n            break;\r\n\r\n        case 'SET_USERS':\r\n            newState = { ...state, users: action.users }\r\n            break;\r\n\r\n        default:\r\n    }\r\n    // For debug:\r\n    // window.userState = newState;\r\n    // console.log('State:', newState);\r\n    return newState;\r\n\r\n}\r\n","const initialState = {\n    currTaskDetails: null,\n    isDragDisabled: false,\n    popover: {\n        pos: {\n            posX: -1,\n            posY: -1,\n            type: ''\n        },\n        isOpen: false,\n        isMenu: false\n    }\n}\nexport function appReducer(state = initialState, action) {\n    switch (action.type) {\n        case 'SET_TASK_DETAILS':\n            return { ...state, currTaskDetails: { ...action.currTaskDetails } }\n        case 'TOGGLE_DRAGGING':\n            return { ...state, isDragDisabled: !state.isDragDisabled }\n        case 'SET_POSITION':\n            const popover = { ...state.popover, pos: { ...action.pos } }\n            // const popoverDeepCopy = JSON.parse(JSON.stringify(popover))\n            return { ...state, popover }\n        case 'TOGGLE_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: !state.popover.isOpen } }\n        case 'SET_POPOVER':\n            return { ...state, popover: { ...state.popover, isOpen: action.isOpen } }\n        case 'SET_POPOVER_MENU':\n            return { ...state, popover: { ...state.popover, isOpen: false, isMenu: action.isMenu } }\n        default:\n            return state\n    }\n}\n","// const { createStore, applyMiddleware, combineReducers, compose } = Redux\r\n// const thunk = ReduxThunk.default\r\n\r\nimport { createStore, applyMiddleware, combineReducers, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\n\r\n\r\nimport { boardReducer } from './board.reducer.js'\r\nimport { userReducer } from './user.reducer.js'\r\nimport { appReducer } from './app.reducer.js'\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    boardModule: boardReducer,\r\n    userModule: userReducer,\r\n    appModule: appReducer,\r\n    // systemModule: systemReducer,\r\n    // reviewModule: reviewReducer,\r\n})\r\n\r\n\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n// window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__();\r\n// Lets wire up thunk and also redux-dev-tools:\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))\r\n// export const store = createStore(rootReducer, applyMiddleware(thunk))\r\n\r\n\r\n","export default __webpack_public_path__ + \"static/media/hero.e8878a54.png\";","export default __webpack_public_path__ + \"static/media/reactRedux.595c174b.jpg\";","export default __webpack_public_path__ + \"static/media/nodejs.7e291bae.png\";","export default __webpack_public_path__ + \"static/media/mongo.95e41129.png\";","export default __webpack_public_path__ + \"static/media/socket.6a73d0d3.jpg\";","export default __webpack_public_path__ + \"static/media/express.167f6d66.png\";","import React, { Component } from \"react\";\r\nimport heroImg from \"../assets/img/hero.png\";\r\nimport { HomeProfile } from \"../cmps/Home/HomeProfile\";\r\nimport reactImg from \"../assets/img/reactRedux.jpg\"\r\nimport nodeImg from \"../assets/img/nodejs.png\";\r\nimport mongoImg from \"../assets/img/mongo.png\";\r\nimport socketImg from \"../assets/img/socket.jpg\";\r\nimport expressImg from \"../assets/img/express.png\";\r\nimport rbdndImg from \"../assets/img/rbdnd.png\";\r\n\r\nexport class Homepage extends Component {\r\n  render() {\r\n    return (\r\n      <section className=\"homepage\">\r\n        <div className=\"hero flex main-layout\">\r\n          <div className=\"hero-content flex column\">\r\n            <h1>\r\n              <span>Trellex</span> helps teams move work forward.\r\n            </h1>\r\n            <p>\r\n              Collaborate, manage projects, and reach new productivity peaks.\r\n              From high rises to the home office, the way your team works is\r\n              uniqueaccomplish it all with Trellex.\r\n            </p>\r\n            <button onClick={() => this.props.history.push(\"/workspace\")}>\r\n              To Demo\r\n            </button>\r\n          </div>\r\n          <div>\r\n            <img src={heroImg} className=\"hero-img\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n        <section className=\"about main-layout\">\r\n          <h1>Made with</h1>\r\n          <div className=\"tech flex align-center\">\r\n            <img src={reactImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={nodeImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={expressImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={socketImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={mongoImg} alt=\"logo\" className=\"tech-logo\" />\r\n            <img src={rbdndImg} alt=\"logo\" className=\"tech-logo\" />\r\n          </div>\r\n          {/* <h1>Created by</h1>\r\n          <div className=\" profiles-wrapper flex\">\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C5603AQG9slGN5Fgxug/profile-displayphoto-shrink_800_800/0/1516840011642?e=1639008000&v=beta&t=xThiLyo5L33mzpMZwW4bejYp6AOxWmN5mkVMSYDzg1w\"\r\n              ghUrl=\"https://github.com/bcd82\"\r\n              liUrl=\"https://www.linkedin.com/in/barak-sidi-4632003a/\"\r\n              name=\"Barak Sidi\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4E03AQFlupY8tXNbnA/profile-displayphoto-shrink_800_800/0/1622442415599?e=1639008000&v=beta&t=7jgIHBeZftuCwkVx-HtY1tbwtcJnPRLebgx4LLUtZU0\"\r\n              ghUrl=\"https://github.com/Tomerre1\"\r\n              liUrl=\"https://www.linkedin.com/in/tomer-revah-software-engineering/\"\r\n              name=\"Tomer Revah\"\r\n            />\r\n            <HomeProfile\r\n              imgUrl=\"https://media-exp1.licdn.com/dms/image/C4D03AQEEFClr3HeA9w/profile-displayphoto-shrink_800_800/0/1575055172966?e=1639008000&v=beta&t=n8WEpc1GPYeK78vRTmU6_Q4p2hvWL-AGQLpDxW5DVKk\"\r\n              ghUrl=\"https://github.com/matan3857\"\r\n              liUrl=\"https://www.linkedin.com/in/matan-levi-561115199/\"\r\n              name=\"Matan Levi\"\r\n            />\r\n          </div> */}\r\n        </section>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","import io from 'socket.io-client'\r\n\r\nexport const SOCKET_EMIT_USER_WATCH = 'user-watch';\r\nexport const SOCKET_EVENT_USER_UPDATED = 'user-updated';\r\nexport const SOCKET_EVENT_REVIEW_ADDED = 'review-added';\r\nexport const SOCKET_EVENT_REVIEW_ABOUT_YOU = 'review-about-you';\r\n\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3030'\r\nexport const socketService = createSocketService()\r\n// export const socketService = createDummySocketService()\r\n\r\nwindow.socketService = socketService\r\n\r\n// var socketIsReady = false;\r\nsocketService.setup()\r\n\r\n\r\nfunction createSocketService() {\r\n  var socket = null;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl)\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb)\r\n    },\r\n    off(eventName, cb=null) {\r\n      if (!socket) return;\r\n      if (!cb) socket.removeAllListeners(eventName)\r\n      else socket.off(eventName, cb)\r\n    },\r\n    emit(eventName, data) {\r\n      socket.emit(eventName, data)\r\n    },\r\n    terminate() {\r\n      socket = null\r\n    }\r\n  }\r\n  return socketService\r\n}\r\n\r\n// eslint-disable-next-line\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    listenersMap,\r\n    setup() {\r\n      listenersMap = {}\r\n    },\r\n    terminate() {\r\n      this.setup()\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      if (!listenersMap[eventName]) return\r\n      if (!cb) delete listenersMap[eventName]\r\n      else listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      })\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  window.listenersMap = listenersMap;\r\n  return socketService\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log('Socket Test - Expected Puk, Actual:', x)}\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('baba', cb)\r\n// socketService.on('mama', cb)\r\n// socketService.emit('baba', 'Puk')\r\n// socketService.off('baba', cb)\r\n\r\n\r\nsocketService.on(SOCKET_EVENT_REVIEW_ABOUT_YOU, review => {\r\n  console.log('Review about me!', review);\r\n  \r\n})\r\n\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nexport function BoardPreview(props) {\r\n  const { board, saveBoard } = props;\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n  return (\r\n    <article className=\"board-preview\">\r\n      <Link to={`/board/${board._id}`}>\r\n        <div\r\n          className=\"board-content\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        ></div>\r\n        <p className=\"board-title\">{board.title}</p>\r\n      </Link>\r\n      <div className={`hover-actions flex ${board?.isFavorite ? 'show' :''}`}>\r\n     \r\n       {board?.isFavorite ? <StarBorderIcon className=\"action-icon\"  style={{color:'gold'}} onClick={onToggleStar}/> : <StarBorderIcon className=\"action-icon\" onClick={onToggleStar} />}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import {useState} from 'react'\r\n\r\nexport function BoardAddPalette({ setBgClr, setBgImg, bgClr, bgImg }) {\r\n\r\n    const [selected,setSelected] = useState(\"linear-gradient(to bottom, #000000, #434343\")\r\n    \r\n    \r\n    const clrs = [\r\n        \"linear-gradient(to bottom, #000000, #434343)\",\r\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\r\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\r\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\r\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\r\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\r\n    ];\r\n\r\n    const imgs = [\r\n    \"https://www.incimages.com/uploaded_files/image/1920x1080/getty_509107562_2000133320009280346_351827.jpg\",\r\n    \"http://all4desktop.com/data_images/original/4238112-background.jpg\",\r\n    \"https://c.pxhere.com/photos/4f/ee/candy_toppings_sweet_colorful_sugar-883692.jpg!d\",\r\n    \"http://www.pngmagic.com/product_images/creative-banner-design-background-images.jpg\",\r\n    \"https://cdn.wallpapersafari.com/22/29/fdqrYk.jpg\",\r\n    \"https://img2.goodfon.com/wallpaper/nbig/2/73/texture-lines-colours-cveta.jpg\"\r\n    \r\n];\r\n\r\n  return (\r\n    <div className=\"palettes\">\r\n      <div className=\"clrs\">\r\n        {clrs.map((color) => {\r\n          return (\r\n            <label\r\n              key={color}\r\n              className=\"flex align-center justify-center palette-icon\"\r\n              style={{ background: color , border: selected === color ? '2px solid white' : ''}}\r\n              name=\"label-color\"\r\n              htmlFor={`color-${color}`}\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                name=\"color\"\r\n                id={`color-${color}`}\r\n                value={color}\r\n                onClick={(ev) =>{ \r\n                    setBgClr(ev.target.value)\r\n                    setBgImg('')\r\n                    setSelected(ev.target.value)\r\n\r\n                }}\r\n              />\r\n           \r\n            </label>\r\n          );\r\n        })}\r\n        <div className=\"imgs\">\r\n          {imgs.map((imgUrl) => {\r\n            return (\r\n              <label\r\n                key={imgUrl}\r\n                className=\"flex align-center justify-center palette-icon\"\r\n                style={{\r\n                  background: `url(${imgUrl})`,\r\n                  backgroundSize: \"cover\",\r\n                  border: selected === imgUrl ? '2px solid white' : ''\r\n                }}\r\n                name=\"label-color\"\r\n                htmlFor={`color-${imgUrl}`}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"color\"\r\n                  id={`color-${imgUrl}`}\r\n                  value={imgUrl}\r\n                  onClick={(ev) =>{ \r\n                      setBgImg(ev.target.value)\r\n                      setSelected(ev.target.value)\r\n                \r\n                }}\r\n                />\r\n          \r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { BoardAddPalette } from \"../Workspace/BoardAddPalette\";\r\nimport CloseIcon from \"@mui/icons-material/Close\";\r\n\r\nexport function BoardPreviewAdd(props) {\r\n  const [bgClr, setBgClr] = useState(\r\n    \"linear-gradient(to bottom, #000000, #434343)\"\r\n  );\r\n  const [bgImg, setBgImg] = useState(\"\");\r\n  const [title, setTitle] = useState(\"\");\r\n  const [isEditMode, toggleEditMode] = useState(false);\r\n  // const [bgClrs, setBgClrs] = useState([]);\r\n  // if(props.boardMode === true) toggleEditMode(true)\r\n  return (\r\n    <article className={`board-preview-add ${props.boardMode ? 'on-board' : ''}`}>\r\n      <div\r\n        className=\"board-content flex column\"\r\n        style={{\r\n          background: `${bgImg ? `url(${bgImg})` : bgClr} center`,\r\n        }}\r\n      >\r\n        {!isEditMode && !props.boardMode ? (\r\n          <div\r\n            className=\"add-inactive\"\r\n            onClick={() => toggleEditMode(!isEditMode)}\r\n          >\r\n            <p>Add a board</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-active fade-in\">\r\n            <div className=\"title-box flex\">\r\n              <form>\r\n                <input\r\n                  className=\"board-title\"\r\n                  value={title}\r\n                  onChange={(ev) => setTitle(ev.target.value)}\r\n                  placeholder=\"New board title\"\r\n                />\r\n                <button\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    if (!title.trim()) return;\r\n                    props.onAdd(title, bgClr, bgImg);\r\n                    setBgClr(\"linear-gradient(to bottom, #000000, #434343)\");\r\n                    setBgImg(\"\");\r\n                    setTitle(\"\");\r\n                    toggleEditMode();\r\n                  }}\r\n                >\r\n                  Create\r\n                </button>\r\n              </form>\r\n              <button\r\n                className=\"closer\"\r\n                onClick={() =>\r\n                  !props.boardMode\r\n                    ? toggleEditMode(!isEditMode)\r\n                    : props.setCreateShown(false)\r\n                }\r\n              >\r\n                <CloseIcon />\r\n              </button>\r\n            </div>\r\n            <div className=\"color-box\">\r\n              <BoardAddPalette\r\n                bgClr={bgClr}\r\n                setBgClr={setBgClr}\r\n                setBgImg={setBgImg}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { BoardPreview } from \"./BoardPreview\";\r\nimport { BoardPreviewAdd } from \"./BoardPreviewAdd\";\r\nexport function BoardList(props) {\r\n  const { boards, onAdd, onRemove } = props;\r\n\r\n  return (\r\n    <div className=\"board-list\">\r\n      {boards &&\r\n        boards.map((board, idx) => (\r\n          <BoardPreview\r\n            board={board}\r\n            key={idx}\r\n            onRemove={onRemove}\r\n            saveBoard={props.saveBoard}\r\n          />\r\n        ))}\r\n\r\n      {!props.starred && <BoardPreviewAdd onAdd={onAdd} />}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\n\r\nexport  function LoaderSpinner() {\r\n    return (\r\n        <Loader\r\n        type=\"Grid\"\r\n        color=\"#0079bf\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} \r\n        className=\"loader fade-in\"\r\n      />\r\n    )\r\n}\r\n","export const utilService = {\r\n    makeId,\r\n    makeLorem,\r\n    getRandomIntInclusive,\r\n    delay,\r\n    timeSince\r\n}\r\n\r\nfunction makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return txt;\r\n}\r\n\r\nfunction makeLorem(size = 100) {\r\n    var words = ['The sky', 'above', 'the port', 'was', 'the color of television', 'tuned', 'to', 'a dead channel', '.', 'All', 'this happened', 'more or less', '.', 'I', 'had', 'the story', 'bit by bit', 'from various people', 'and', 'as generally', 'happens', 'in such cases', 'each time', 'it', 'was', 'a different story', '.', 'It', 'was', 'a pleasure', 'to', 'burn'];\r\n    var txt = '';\r\n    while (size > 0) {\r\n        size--;\r\n        txt += words[Math.floor(Math.random() * words.length)] + ' ';\r\n    }\r\n    return txt;\r\n}\r\n\r\nfunction getRandomIntInclusive(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min; //The maximum is inclusive and the minimum is inclusive \r\n}\r\n\r\nfunction delay(ms = 1500) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms)\r\n    })\r\n}\r\n\r\nfunction timeSince(date)  {\r\n    var seconds = Math.floor((new Date() - date) / 1000);\r\n\r\n    var interval = seconds / 31536000;\r\n\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a year ago\";\r\n        return Math.floor(interval) + \" years ago\";\r\n    }\r\n    interval = seconds / 2592000;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a month ago\";\r\n        return Math.floor(interval) + \" months ago\";\r\n    }\r\n    interval = seconds / 86400;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"a day ago\";\r\n        return Math.floor(interval) + \" days ago\";\r\n    }\r\n    interval = seconds / 3600;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an hour ago\";\r\n        return Math.floor(interval) + \" hours ago\";\r\n    }\r\n    interval = seconds / 60;\r\n    if (interval > 1) {\r\n        if (Math.floor(interval) === 1) return \"an minute ago\";\r\n        return Math.floor(interval) + \" minutes ago\";\r\n    }\r\n    if (Math.floor(seconds) === 0) return \"a few seconds ago\";\r\n    return Math.floor(seconds) + \" seconds ago\";\r\n}\r\n\r\n","\r\nimport { socketService } from '../services/socket.service'\r\nimport { utilService } from './util.service.js'\r\nimport { httpService } from './http.service.js'\r\nimport { userService } from './user.service'\r\nimport axios from 'axios'\r\n\r\nconst APP_ID = 'IwjSlLYB-kEXeOlDvuifDixGryX1CK64CwapeKeJC8w'\r\nconst STORAGE_KEY = 'board'\r\n\r\nexport const boardService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    // remove,\r\n    updateTask,\r\n    addTask,\r\n    removeTask,\r\n    addGroup,\r\n    removeGroup,\r\n    createActivity,\r\n    updateTaskByIds,\r\n    queryPhotos\r\n}\r\n\r\nasync function query() {\r\n    // const res = await axios.get('http://localhost:3030/api/toy', { params: filterBy })\r\n    // return res.data\r\n    const boards = await httpService.get('board')\r\n    return boards\r\n}\r\n// async function query() {\r\n//     let boards = await storageService.query(STORAGE_KEY)\r\n//     if (boards.length) return boards\r\n//     console.log('no local storage found')\r\n//     localStorage.setItem('board', JSON.stringify(demoBoards))\r\n//     return demoBoards\r\n// }\r\n\r\nasync function queryPhotos(query = 'random') {\r\n    const photos = await axios.get(`https://api.unsplash.com/search/photos/?query=${query}&client_id=${APP_ID}`)\r\n    return photos.data.results\r\n}\r\n\r\n// function getById(boardId) {\r\n//     return storageService.get(STORAGE_KEY, boardId)\r\n// }\r\nasync function getById(boardId) {\r\n    // const res = await axios.get(`http://localhost:3030/api/toy/${toyId}`)\r\n    // return res.data\r\n    const board = await httpService.get(`board/${boardId}`)\r\n    return board\r\n}\r\n\r\n\r\n\r\n// async function remove(boardId) {\r\n//     try {\r\n//         return storageService.remove(STORAGE_KEY, boardId)\r\n//     } catch (err) {\r\n//         console.log('couldnt remove board', err)\r\n//     }\r\n// }\r\n\r\nasync function save(board) {\r\n    if (board._id) {\r\n        const updatedBoard = await httpService.put('board', board)\r\n        socketService.emit(\"board-change\")\r\n        return updatedBoard\r\n        // return storageService.put(STORAGE_KEY, board)\r\n    } else {\r\n        const newBoard = {\r\n            \"title\": board.title,\r\n            \"createdAt\": Date.now(),\r\n            \"createdBy\": userService.getLoggedinUser(),\r\n            \"groups\": [],\r\n            \"tasks\": [],\r\n            \"labels\": [],\r\n            \"activities\": [],\r\n            \"members\": [],\r\n            \"style\": {\r\n                \"bgClr\": board.style.bgClr,\r\n                \"bgImg\": board.style.bgImg\r\n            },\r\n        }\r\n        const savedBoard = await httpService.post('board', newBoard)\r\n        socketService.emit(\"board-change\")\r\n        return savedBoard\r\n        // return storageService.post(STORAGE_KEY, newBoard)\r\n    }\r\n}\r\n\r\n\r\nfunction createActivity(activityType, currTask, txt = null) {\r\n    const task = {\r\n        id: currTask.id,\r\n        title: currTask.title\r\n    }\r\n    const activity = {\r\n        id: utilService.makeId(),\r\n        createdAt: Date.now(),\r\n        byMember: userService.getLoggedinUser(),\r\n        task,\r\n        type: activityType,\r\n        txt\r\n    }\r\n    return activity\r\n}\r\n\r\nfunction updateTask(board, group, task) {\r\n    const groupNeedToUpdate = board.groups.find(currGroup => currGroup.id === group.id)\r\n    const groupIndex = board.groups.indexOf(groupNeedToUpdate)\r\n    const taskNeedToUpdate = board.groups[groupIndex].tasks.find(currTask => currTask.id === task.id)\r\n    const taskIndex = board.groups[groupIndex].tasks.indexOf(taskNeedToUpdate)\r\n    board.groups[groupIndex].tasks[taskIndex] = task\r\n    return { ...board }\r\n}\r\n\r\n\r\n\r\nasync function addTask(taskTitle, boardId, groupId, audioUrl, videoUrl) {\r\n    if (!taskTitle)\r\n        return\r\n    const newTask =\r\n    {\r\n        \"id\": `t-${utilService.makeId()}`,\r\n        \"title\": taskTitle,\r\n        \"description\": \"\",\r\n        \"createdAt\": Date.now(),\r\n        \"byMember\": userService.getLoggedinUser(),\r\n        \"style\": {},\r\n        \"labelIds\": [],\r\n        \"members\": [],\r\n        \"media\": {},\r\n        \"attachments\": (audioUrl || videoUrl) ? [{\r\n            id: utilService.makeId(),\r\n            name: 'Media url',\r\n            url: (audioUrl) ? audioUrl : videoUrl,\r\n            createdAt: Date.now(),\r\n            isWeb: true\r\n        }] : [],\r\n    }\r\n    if (audioUrl) newTask.media.audioUrl = audioUrl\r\n    else if (videoUrl) newTask.media.videoUrl = videoUrl\r\n\r\n    const board = await getById(boardId)\r\n    const idx = board.groups.findIndex((group) => group.id === groupId)\r\n    board.groups[idx].tasks.push(newTask)\r\n    save(board)\r\n    return board\r\n}\r\n\r\nasync function removeTask(boardId, groupId, taskId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n        board.groups[groupIdx].tasks = board.groups[groupIdx].tasks.filter(task => taskId !== task.id)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\n\r\nasync function addGroup(boardId, title = \"Untitled group\") {\r\n    if (!boardId) return\r\n    const newGroup = {\r\n        \"id\": `g-${utilService.makeId()}`,\r\n        \"title\": title,\r\n        tasks: [],\r\n        \"style\": {\r\n            bgImg: \"\",\r\n            bgClr: \"\"\r\n        }\r\n    }\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups.push(newGroup)\r\n        save(board)\r\n\r\n        return board\r\n    }\r\n    catch (err) {\r\n        console.log('couldnt add group', err)\r\n    }\r\n}\r\n\r\nasync function removeGroup(boardId, groupId) {\r\n    try {\r\n        const board = await getById(boardId)\r\n        board.groups = board.groups.filter(group => group.id !== groupId)\r\n        save(board)\r\n        return board\r\n    }\r\n\r\n    catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\nasync function updateTaskByIds(boardId, groupId, task) {\r\n    const board = await getById(boardId)\r\n    const groupIdx = board.groups.findIndex(group => groupId === group.id)\r\n    const taskIdx = board.groups[groupIdx].tasks.findIndex(taskToFind => taskToFind.id === task.id)\r\n    board.groups[groupIdx].tasks[taskIdx] = task\r\n    save(board)\r\n    return board\r\n\r\n}\r\n\r\n","import { boardService } from '../services/board.service';\r\nimport { socketService } from '../services/socket.service'\r\n\r\nexport const loadBoards = () => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const boards = await boardService.query()\r\n            // console.log('loading boards',boards)\r\n            dispatch({\r\n                type: \"SET_BOARDS\",\r\n                boards,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set boards', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const loadBoard = (boardId, filterBy = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.getById(boardId, filterBy)\r\n            // console.log('loading board',board)\r\n            if (board)\r\n                dispatch({\r\n                    type: \"SET_BOARD\",\r\n                    board,\r\n                });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant set board', err)\r\n            throw Error(err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport const saveBoard = (board) => {\r\n    return async (dispatch) => {\r\n        // --- change back to this if something goes wrong\r\n    //     try {\r\n    //         const newBoard = await boardService.save(board)\r\n    //         dispatch({\r\n    //             type: \"SAVE_BOARD\",\r\n    //             board: newBoard,\r\n    //         });\r\n    //         socketService.emit(\"board-change\")\r\n    //     }\r\n    //     catch (err) {\r\n    //         console.log('cant save board', err)\r\n    //         // throw Error(err)\r\n    //     }\r\n        try {\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n            await boardService.save(board)\r\n            socketService.emit(\"board-change\")\r\n        }\r\n        catch (err) {\r\n            console.log('cant save board', err)\r\n            throw err\r\n        }\r\n    }\r\n}\r\n\r\nexport const addBoard = (title = \"new board\", bgClr = \"black\", bgImg) => {\r\n    return async (dispatch) => {\r\n        const board = { title, style: { bgClr, bgImg } }\r\n        try {\r\n            const newBoard = await boardService.save(board)\r\n            dispatch({\r\n                type: \"ADD_BOARD\",\r\n                board: newBoard,\r\n            });\r\n            return newBoard\r\n        }\r\n        catch (err) {\r\n            console.log('cant add board', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const handleDrag = (\r\n    board,\r\n    droppableIdStart,\r\n    droppableIdEnd,\r\n    droppableIndexStart,\r\n    droppableIndexEnd,\r\n    draggableId,\r\n    type\r\n) => {\r\n    return async (dispatch) => {\r\n        const tempBoard = JSON.parse(JSON.stringify(board))\r\n        //drag group\r\n        if (type === 'group') {\r\n            const group = tempBoard.groups.splice(droppableIndexStart, 1)\r\n            tempBoard.groups.splice(droppableIndexEnd, 0, ...group)\r\n        } else {\r\n            if (droppableIdStart === droppableIdEnd) {\r\n                const group = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = group.tasks.splice(droppableIndexStart, 1)\r\n                group.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n            // different group target\r\n            if (droppableIdStart !== droppableIdEnd) {\r\n                // source group\r\n                const groupStart = tempBoard.groups.find(group => group.id === droppableIdStart)\r\n                const task = groupStart.tasks.splice(droppableIndexStart, 1)\r\n                // target group\r\n                const groupEnd = tempBoard.groups.find(group => group.id === droppableIdEnd)\r\n                groupEnd.tasks.splice(droppableIndexEnd, 0, ...task)\r\n            }\r\n        }\r\n        // same group drag\r\n        boardService.save(tempBoard)\r\n        dispatch({\r\n            type: \"SAVE_BOARD\",\r\n            board: tempBoard\r\n        });\r\n\r\n        return\r\n    }\r\n\r\n}\r\n\r\nexport const removeBoard = (boardId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.remove(boardId)\r\n            dispatch({\r\n                type: \"REMOVE_BOARD\",\r\n                boardId: boardId,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove board', err)\r\n        }\r\n    }\r\n}\r\nexport const addTask = (taskTitle, boardId, groupId, audioUrl = null, videoUrl = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addTask(taskTitle, boardId, groupId, audioUrl, videoUrl)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n        }\r\n        catch (err) {\r\n            console.log('cant add task', err)\r\n        }\r\n    }\r\n}\r\nexport const removeTask = (boardId, groupId, taskId) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeTask(boardId, groupId, taskId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        }\r\n        catch (err) {\r\n            console.log('cant remove task', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const addGroup = (boardId, title) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.addGroup(boardId, title)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant add group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const removeGroup = (boardId, groupId) => {\r\n    console.log(groupId, boardId)\r\n    return async (dispatch) => {\r\n        try {\r\n            const board = await boardService.removeGroup(boardId, groupId)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: board,\r\n            });\r\n\r\n        } catch (err) {\r\n            console.log('cant remove group', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const clearBoard = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_BOARD\",\r\n            board: null\r\n        });\r\n\r\n    }\r\n}\r\n\r\nexport const toggleExpandLabels = () => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"TOGGLE_LABELS\",\r\n        });\r\n    }\r\n}\r\n\r\nexport const addActivity = (board, currTaskDetails, activityType, txt = null) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            board.activities.push(boardService.createActivity(activityType, currTaskDetails, txt))\r\n            const newBoard = await boardService.save(board)\r\n            console.log('newBoard:', newBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const saveTaskDetails = (board, currGroup, currTask) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = boardService.updateTask(board, currGroup, currTask)\r\n            // move after await if causes issues\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: updatedBoard,\r\n            })\r\n            await boardService.save(updatedBoard)\r\n            // console.log('newBoard:', newBoard)\r\n\r\n            // dispatch({\r\n            //     type: \"SET_TASK_DETAILS\",\r\n            //     currTaskDetails: currTask\r\n            // });\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const updateTask = (boardId, groupId, task) => {\r\n    return async (dispatch) => {\r\n        try {\r\n            const updatedBoard = await boardService.updateTaskByIds(boardId, groupId, task)\r\n            const newBoard = await boardService.save(updatedBoard)\r\n            console.log('newBoard:', newBoard)\r\n            dispatch({\r\n                type: \"SAVE_BOARD\",\r\n                board: newBoard,\r\n            })\r\n        }\r\n        catch (err) {\r\n            console.log('cant update task details', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport const setFilterBy = (filterBy) => {\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: \"SET_FILTER\",\r\n            filterBy\r\n        });\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { socketService } from '../services/socket.service'\r\nimport { BoardList } from \"../cmps/Workspace/BoardList\";\r\nimport { LoaderSpinner } from \"../cmps/LoaderSpinner\";\r\nimport {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n} from \"../store/board.actions\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\n\r\nclass _Workspace extends Component {\r\n\r\n  componentDidMount = () => {\r\n    socketService.on(\"new-board-added\", this.props.loadBoards)\r\n    this.props.loadBoards();\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    socketService.off(\"new-board-added\")\r\n    // socketService.terminate()\r\n  }\r\n\r\n  addBoard = async (title, bgClr = \"black\", bgImg = \"\") => {\r\n    if (!title || !title.trim()) return;\r\n    try {\r\n      this.props.addBoard(title, bgClr, bgImg);\r\n      socketService.emit(\"new-board\");\r\n    } catch (err) {\r\n      console.log(\"problem adding board\", err);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { boards } = this.props;\r\n    return (\r\n      <section className=\"workspace-page main-layout flex column\">\r\n        <h1>Your Workspace</h1>\r\n        <h2 className=\"flex align-center\">\r\n          {this.props.boards.some(board => board.isFavorite) && <><StarBorderIcon style={{ height: '35px', width: '35px' }} /> Starred boards</>}\r\n        </h2>\r\n        <div className=\"board-lists flex column\">\r\n            <BoardList\r\n              starred={true}\r\n              boards={boards.filter((board) => board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n         \r\n          {boards.length ? (\r\n            <BoardList\r\n              boards={boards.filter((board) => !board.isFavorite)}\r\n              onAdd={this.addBoard}\r\n              onRemove={this.props.removeBoard}\r\n              saveBoard={this.props.saveBoard}\r\n            />\r\n          ) : (\r\n            <LoaderSpinner />\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    boards: state.boardModule.boards,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoards,\r\n  addBoard,\r\n  removeBoard,\r\n  saveBoard,\r\n};\r\nexport const Workspace = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_Workspace);\r\n","function on(eventName, listener) {\r\n\r\n    const callListener = ({ detail }) => {\r\n        listener(detail);\r\n    };\r\n\r\n    window.addEventListener(eventName, callListener);\r\n\r\n    return () => {\r\n        window.removeEventListener(eventName, callListener);\r\n    };\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    window.dispatchEvent(new CustomEvent(eventName, { detail: data }));\r\n}\r\n\r\nexport const eventBusService = { on, emit };\r\n\r\nexport function showUserMsg(txt, type = '') {\r\n    eventBusService.emit('show-user-msg', { txt, type })\r\n}\r\nexport function showSuccessMsg(txt) {\r\n    showUserMsg(txt, 'success')\r\n}\r\nexport function showErrorMsg(txt) {\r\n    showUserMsg(txt, 'danger')\r\n}\r\n\r\nwindow.myBus = eventBusService;\r\nwindow.showUserMsg = showUserMsg;\r\n\r\n// eventBusService.on('baba', (x)=>console.log('Hi Baba', x))\r\n// eventBusService.on('baba', (x)=>console.log('Hello Baba Ji', x))\r\n// eventBusService.emit('baba', [5, 8, 11])\r\n// setTimeout(()=>{\r\n//     eventBusService.emit('baba', 17)\r\n// }, 2000)\r\n\r\n/* Listening Component...\r\n    import {eventBusService} from 'path...event-bus-service'\r\n    eventBusService.on('some-event', (dataFromEvent) => {\r\n    do something with dataFromEvent\r\n    })\r\n\r\n   Receiving Component...\r\n    eventBusService.emit('some-event', data)\r\n*/","import { userService } from \"../services/user.service.js\";\r\nimport { showErrorMsg } from '../services/event-bus.service.js'\r\n// import { socketService, SOCKET_EMIT_USER_WATCH, SOCKET_EVENT_USER_UPDATED } from \"../services/socket.service.js\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            // dispatch({ type: 'LOADING_START' })\r\n            const users = await userService.getUsers()\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err)\r\n        } finally {\r\n            // dispatch({ type: 'LOADING_DONE' })\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            await userService.remove(userId)\r\n            dispatch({ type: 'REMOVE_USER', userId })\r\n        } catch (err) {\r\n            console.log('UserActions: err in removeUser', err)\r\n        }\r\n    }\r\n}\r\n\r\nexport function onLogin(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.login(credentials)\r\n            console.log(user)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n        } catch (err) {\r\n            showErrorMsg('Cannot login')\r\n            console.log('Cannot login', err)\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function onSignup(credentials) {\r\n    return async (dispatch) => {\r\n        try {\r\n            const user = await userService.signup(credentials)\r\n            dispatch({\r\n                type: 'SET_USER',\r\n                user\r\n            })\r\n\r\n        } catch (err) {\r\n            console.log('error when signing up', err)\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport function onLogout() {\r\n    return (dispatch) => {\r\n        userService.logout()\r\n            .then(() => dispatch({\r\n                type: 'SET_USER',\r\n                user: null\r\n            }))\r\n            .catch(err => {\r\n                showErrorMsg('Cannot logout')\r\n                console.log('Cannot logout', err)\r\n            })\r\n    }\r\n}\r\n\r\n// export function loadAndWatchUser(userId) {\r\n//     return async (dispatch) => {\r\n//         try {\r\n//             const user = await userService.getById(userId);\r\n//             dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             socketService.emit(SOCKET_EMIT_USER_WATCH, userId)\r\n//             socketService.off(SOCKET_EVENT_USER_UPDATED)\r\n//             socketService.on(SOCKET_EVENT_USER_UPDATED, user => {\r\n//                 console.log('USER UPADTED FROM SOCKET');\r\n//                 dispatch({ type: 'SET_WATCHED_USER', user })\r\n//             })\r\n//         } catch (err) {\r\n//             showErrorMsg('Cannot load user')\r\n//             console.log('Cannot load user', err)\r\n//         }\r\n//     }\r\n// }\r\n\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogout } from \"../store/user.actions\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nconst _MemberPopup = ({\r\n  member,\r\n  togglePopOpen,\r\n  isInHeader,\r\n  isInBoardList,\r\n  onLogout,\r\n  user,\r\n  board,\r\n  saveBoard,\r\n}) => {\r\n  const removeUserFromBoard = async () => {\r\n    // if (member._id === user?._id) {\r\n      const newBoard = JSON.parse(JSON.stringify(board));\r\n      const userIdx = newBoard.members.findIndex(mmbr => mmbr._id === member._id)\r\n      newBoard.members.splice(userIdx, 1);\r\n      try{\r\n        await saveBoard(newBoard);\r\n        togglePopOpen(false);\r\n\r\n      }\r\n      catch(err){\r\n        console.log('error when deleting user from board',err)\r\n      // }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`popup-container flex column`}>\r\n      <div\r\n        className=\"pop-overlay\"\r\n        style={{\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          inset: 0,\r\n          height: \"100vh\",\r\n          width: \"100%\",\r\n          backgroundColor: \"transparent\",\r\n          zIndex: 4,\r\n        }}\r\n        onClick={() => togglePopOpen(false)}\r\n      ></div>\r\n      <div className={`wrap  ${isInHeader ? \"header\" : \"\"}`}>\r\n        <div className=\"member-popup\">\r\n          {member?.imgUrl ? (\r\n            <img src={member.imgUrl} className=\"member-img\" alt=\"member-img\" />\r\n          ) : (\r\n            <div\r\n              className=\"member-img\"\r\n              style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n            >\r\n              <p className={`member-letter preview`}>\r\n                {member?.fullname?.[0].toUpperCase() || \"\"}\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className=\"member-info flex column\">\r\n            <p className=\"fullname\">{member.fullname}</p>\r\n            <p className=\"username\">{member.username}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"member-footer\">\r\n          {isInHeader && (\r\n            <p className=\"logout\" onClick={onLogout}>\r\n              Logout\r\n            </p>\r\n          )}\r\n          {isInBoardList && (\r\n            <p className=\"logout\" onClick={removeUserFromBoard}>Remove from board</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onLogout,\r\n  saveBoard,\r\n};\r\nconst mapStateToProps = ({ userModule, boardModule }) => {\r\n  return {\r\n    user: userModule.loggedinUser,\r\n    board: boardModule.board,\r\n  };\r\n};\r\nexport const MemberPopup = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberPopup);\r\n","import { boardService } from '../services/board.service';\nimport { socketService } from '../services/socket.service'\n\nexport const setCurrTaskDetails = (currTaskDetails) => {\n    return async (dispatch) => {\n        dispatch({\n            type: \"SET_TASK_DETAILS\",\n            currTaskDetails\n        });\n    }\n}\n\n\nexport const toggleDragDisable = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_DRAGGING\",\n        });\n    }\n}\n\nexport const setPosition = ({ pos, type}) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POSITION\",\n            pos: { ...pos, type },\n        })\n    }\n}\n\nexport const togglePopover = () => {\n    return (dispatch) => {\n        dispatch({\n            type: \"TOGGLE_POPOVER\",\n        });\n    }\n}\nexport const setPopover = (isOpen) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER\",\n            isOpen\n        });\n    }\n}\nexport const setPopoverMenu = (isMenu) => {\n    return (dispatch) => {\n        dispatch({\n            type: \"SET_POPOVER_MENU\",\n            isMenu\n        });\n    }\n}\n","import React, { useState } from \"react\";\r\nimport { MemberPopup } from \"./MemberPopup\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n} from \"../store/app.actions\";\r\n\r\nfunction _MemberPreview({\r\n  member,\r\n  isInPreview,\r\n  isEditMode,\r\n  isInHeader,\r\n  isInBoardList,\r\n  task,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  onLogout,\r\n}) {\r\n  const [isPopOpen, togglePopOpen] = useState(false);\r\n\r\n  const openPop = (ev) => {\r\n    togglePopOpen(!isPopOpen);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"member-wrapper\"\r\n        onClick={(ev) => {\r\n          ev.preventDefault();\r\n          //   ev.stopPropagation();\r\n          if (isEditMode) return;\r\n          if (isInPreview) {\r\n            setCurrTaskDetails(task);\r\n            setPosition({\r\n              pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            setPopoverMenu(false)\r\n\r\n            togglePopover();\r\n            return;\r\n          }\r\n          openPop(ev);\r\n        }}\r\n      >\r\n        {member?.imgUrl ? (\r\n          <img src={member.imgUrl} className=\"member-img\" alt={member.fullname[0].toUpperCase()} />\r\n        ) : (\r\n          <div\r\n            className=\"member-img\"\r\n            style={{ background: \"rgb(223, 225, 230)\", color: \"inherit\" }}\r\n          >\r\n            <p className={`member-letter ${isInPreview ? \"preview\" : \"\"}`}>\r\n              {member?.fullname?.[0].toUpperCase() || \"\"}\r\n            </p>\r\n          </div>\r\n        )}\r\n      </article>\r\n      {isPopOpen && (\r\n        <MemberPopup\r\n          member={member}\r\n          togglePopOpen={togglePopOpen}\r\n          isInPreview={isInPreview}\r\n          isInHeader={isInHeader}\r\n          isInBoardList={isInBoardList}\r\n          onLogout={onLogout}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu\r\n};\r\nexport const MemberPreview = connect(null, mapDispatchToProps)(_MemberPreview);\r\n","import AddIcon from \"@mui/icons-material/Add\";\r\nimport { MemberPreview } from \"./MemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { setPosition, togglePopover,setPopoverMenu } from \"../store/app.actions\";\r\n\r\nexport function _MemberList(props) {\r\n  const {\r\n    members,\r\n    isInPreview,\r\n    isInDetails,\r\n    isInHeader,\r\n    togglePopover,\r\n    isEditMode,\r\n    isInBoardList,\r\n    task,\r\n  } = props;\r\n  return (\r\n    <div\r\n      className={`members ${isInPreview ? \"preview\" : \"\"}${\r\n        isInHeader ? \"in-header\" : \"\"\r\n      } ${task?.members.length >= 5 ? 'many':''}`}\r\n    >\r\n      {members &&\r\n        members.map((member, idx) => (\r\n          <MemberPreview\r\n            isInPreview={isInPreview}\r\n            isEditMode={isEditMode}\r\n            isInHeader={isInHeader}\r\n            isInBoardList={isInBoardList}\r\n            member={member}\r\n            key={idx}\r\n            task={task}\r\n          />\r\n        ))}\r\n      {isInDetails && (\r\n        <button\r\n          className=\"secondary-btn\"\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"MEMBERS\",\r\n            });\r\n            togglePopover();\r\n          }}\r\n        >\r\n          <AddIcon />\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    currTaskDetails: state.appModule.currTaskDetails,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n  \r\n};\r\n\r\nexport const MemberList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MemberList);\r\n","import React from 'react'\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverMemberPreview({ member, selectedMembersIds, toggleMemberCheck }) {\n    return (\n        <li className=\"member-pop-over-preview flex\" onClick={() => { toggleMemberCheck(member) }}>\n            {member.imgUrl &&\n                <img className=\"profile-picture\" style={{ marginInlineEnd: '8px' }} src={member.imgUrl} alt='member photo' />\n            }\n            {!member.imgUrl &&\n                <div className=\"profile-picture\" style={{ background: \"#dfe1e6\", marginInlineEnd: '8px' }}>\n                    <p className=\"profile-picture letter\" >{member.fullname[0]}</p>\n                </div>\n            }\n\n            <span>{member.fullname}</span>\n\n            {selectedMembersIds.includes(member._id) &&\n                <span className=\"icon-check flex\">\n                    <CheckIcon />\n                </span>\n            }\n\n        </li >\n    )\n}\n\n\n","import React, { Component } from \"react\";\r\nimport { PopoverMemberPreview } from \"./Popover/PopoverMemberPreview\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../store/board.actions\";\r\n\r\nexport class _MembersAddToBoard extends Component {\r\n  state = {\r\n    search: \"\",\r\n  };\r\n\r\n  handleSearch = (e) => {\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      search: e.target.value,\r\n    }));\r\n  };\r\n  boardUsers = [];\r\n\r\n  addUserToBoard = async (member) => {\r\n    const { board, saveBoard } = this.props;\r\n    delete member.password;\r\n    const newBoard = { ...board, members: [...board.members, member] };\r\n    await saveBoard(newBoard);\r\n  };\r\n\r\n  getFilteredUsers = () => {\r\n    const { board, users } = this.props;\r\n    const fUsers =\r\n      users.filter((user) =>\r\n        board.members.every((member) => member._id !== user._id)\r\n      ) || [];\r\n    return fUsers;\r\n  };\r\n\r\n  filteredUsers = this.getFilteredUsers();\r\n\r\n  componentDidUpdate = (prevProps) => {\r\n    if (this.props.board.members.length !== prevProps.board.members.length) {\r\n      this.filteredUsers = this.getFilteredUsers();\r\n      this.forceUpdate();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { title, board, currTaskDetails, users, setMembersPopup } =\r\n      this.props;\r\n    const { search } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay show`}\r\n          onClick={() => setMembersPopup(false)}\r\n        ></div>\r\n        <div title={title} className=\" board-member-add flex column\">\r\n          <div className=\"members-popover\">\r\n            <h4>ADD TO BOARD</h4>\r\n            <input\r\n              type=\"search\"\r\n              placeholder=\"Search members\"\r\n              onChange={this.handleSearch}\r\n            />\r\n            <ul className=\"clean-list flex column\">\r\n              {this.filteredUsers.length > 0 ? (\r\n                this.filteredUsers\r\n                  .filter((member) =>\r\n                    member.fullname.toLowerCase().includes(search.toLowerCase())\r\n                  )\r\n                  .map((member, idx) => (\r\n                    <PopoverMemberPreview\r\n                      toggleMemberCheck={() => this.addUserToBoard(member)}\r\n                      member={member}\r\n                      key={idx}\r\n                      selectedMembersIds={\r\n                        this.boardUsers?.map((member) => member._id) || []\r\n                      }\r\n                      members={users}\r\n                    />\r\n                  ))\r\n              ) : (\r\n                <p>No members available</p>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    users: state.userModule.users,\r\n    popover: state.appModule.popover,\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\n\r\nexport const MembersAddToBoard = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_MembersAddToBoard);\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard, setFilterBy } from \"../store/board.actions\";\r\nimport { MemberList } from \"./MemberList\";\r\nimport { MembersAddToBoard } from \"../cmps/MembersAddToBoard\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport StarBorderIcon from \"@mui/icons-material/StarBorder\";\r\nimport BarChartIcon from '@mui/icons-material/BarChart';\r\nimport PersonAddAlt1Icon from '@mui/icons-material/PersonAddAlt1';\r\nimport { Close } from '@mui/icons-material';\r\n\r\nimport {\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction _BoardHeader(props) {\r\n  const { board, setFilterBy } = props;\r\n  const [isTitleEdit, setTitleEdit] = useState(false);\r\n  const [title, setTitle] = useState(board.title);\r\n  const [width, setWidth] = useState(board.title.length * 9.5);\r\n  const [isMembersPopup, setMembersPopup] = useState(false);\r\n  const spanRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!spanRef) return;\r\n    if (typeof spanRef.current?.offsetWidth === \"number\")\r\n      setWidth(spanRef.current?.offsetWidth);\r\n  }, [title]);\r\n\r\n  const onToggleStar = async () => {\r\n    const newBoard = { ...board };\r\n    newBoard.isFavorite = !newBoard.isFavorite;\r\n    try {\r\n      props.saveBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(\"error setting favorite\", err);\r\n    }\r\n  };\r\n\r\n  const handleText = (ev) => {\r\n    setTitle(ev.target.value);\r\n  };\r\n  const updateTitle = () => {\r\n    const newBoard = { ...board };\r\n    newBoard.title = title.trim();\r\n    setTitle(title.trim());\r\n    props.saveBoard(newBoard);\r\n  };\r\n  if (!board) return <h2>Loading</h2>;\r\n  return (\r\n    <header className={`main-header board-header flex align-center`}>\r\n      <div className=\"header-btn-container flex\">\r\n        {!isTitleEdit ? (\r\n          <h2 className=\"title\" onClick={() => setTitleEdit(true)}>\r\n            {title}\r\n          </h2>\r\n        ) : (\r\n          <form\r\n            onSubmit={(ev) => {\r\n              ev.preventDefault();\r\n            }}\r\n          >\r\n            <span ref={spanRef}>{title}</span>\r\n            <input\r\n              autoFocus\r\n              className={`title ${!title?.length && \"height-adjust\"}`}\r\n              onBlur={() => {\r\n                setTitleEdit(false);\r\n                updateTitle();\r\n              }}\r\n              value={title}\r\n              onChange={(ev) => {\r\n                handleText(ev);\r\n              }}\r\n              style={{\r\n                width: width + 10,\r\n                minWidth: \"40px\",\r\n              }}\r\n            ></input>\r\n          </form>\r\n        )}\r\n        <div className=\"header-btn-container flex\">\r\n          <button className=\"header-btn star\">\r\n            {board.isFavorite ? (\r\n              <StarBorderIcon\r\n                className=\"icon star gold\"\r\n                onClick={onToggleStar}\r\n              />\r\n            ) : (\r\n              <StarBorderIcon className=\"icon star\" onClick={onToggleStar} />\r\n            )}\r\n          </button>\r\n          {board?.members && (\r\n            <MemberList members={board.members} isInBoardList={true} />\r\n          )}\r\n        </div>\r\n        <button\r\n          className=\"header-btn\"\r\n          onClick={() => setMembersPopup(!isMembersPopup)}\r\n        ><PersonAddAlt1Icon className=\"icon\"/>\r\n        </button>\r\n        {isMembersPopup && (\r\n          <MembersAddToBoard setMembersPopup={setMembersPopup} />\r\n        )}\r\n      </div>\r\n      <div className=\"header-btn-container flex \">\r\n        <Link to={`/board/${board._id}/dashboard`} className=\"clean-link\">\r\n          <button className=\"header-btn\"><BarChartIcon className=\"icon\" /> <span className=\"btn-txt\">Dashboard</span></button>\r\n        </Link>\r\n        {(props.filterBy.search || props.filterBy.labels.length > 0 || props.filterBy.members.length > 0) && <div className=\"flex results\">\r\n          <button\r\n            className=\"header-btn btn-results\"\r\n            onClick={(event) => {\r\n              props.setPosition({\r\n                pos: { pageX: event.pageX, pageY: event.pageY },\r\n                type: \"BOARD_FILTER_CARDS\",\r\n              });\r\n              props.setPopoverMenu(true);\r\n              props.togglePopover(false);\r\n            }}\r\n          >\r\n            Change Filter\r\n          </button>\r\n          <span className=\"flex\" style={{ alignItems: 'center', backgroundColor: \"#61bd4f\" }}>\r\n            <Close className=\"icon clean-btn\"\r\n              onClick={(event) => { event.stopPropagation(); setFilterBy({ labels: [], members: [], search: '' }) }}\r\n            />\r\n          </span>\r\n\r\n        </div>\r\n        }\r\n        <button\r\n          className=\"header-btn last-in-row menu\"\r\n          style={{paddingRight:10}}\r\n          onClick={(event) => {\r\n            props.setPosition({\r\n              pos: { pageX: event.pageX, pageY: event.pageY },\r\n              type: \"BOARD_SHOW_MENU\",\r\n            });\r\n            props.setPopoverMenu(true);\r\n            props.togglePopover(false);\r\n          }}\r\n        >\r\n          <MoreHorizOutlinedIcon className=\"icon menu\" /> <span className=\"btn-txt\">Show Menu</span>\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  togglePopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  setFilterBy\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nexport const BoardHeader = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_BoardHeader);\r\n","import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\nimport { addGroup } from \"../../store/board.actions\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport { Close } from \"@mui/icons-material\";\r\n\r\nfunction _AddNewGroup(props) {\r\n  const boardId = props.match.params.boardId;\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add list\");\r\n  const toggleIsClicked = () => {\r\n    if (isClicked) setTitle(\"\");\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const addGroup = async () => {\r\n    try {\r\n      if(!title.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addGroup(boardId, title.trim());\r\n      setBtnText(\"Add list\");\r\n      setTitle(\"\");\r\n      toggleIsClicked();\r\n    } catch (err) {\r\n      setBtnText(\"Add list\");\r\n    }\r\n  };\r\n  // if(isClicked) {\r\n  return (\r\n    <div className=\"add-group-wrapper\">\r\n      {!isClicked ? (\r\n        <article\r\n          className=\"group-details add-new\"\r\n          onClick={() => {\r\n            toggleIsClicked();\r\n          }}\r\n        >\r\n          <div className=\"flex align-center\">\r\n            <AddIcon className=\"icon\" />\r\n            Add a list\r\n          </div>\r\n        </article>\r\n      ) : (\r\n        <form\r\n          onSubmit={(ev) => {\r\n            ev.preventDefault();\r\n          }}\r\n        >\r\n          <div className=\"add-group-active group-details flex column scale-up-ver-top\">\r\n            <input\r\n              value={title}\r\n              placeholder=\"Enter list title...\"\r\n              onChange={(ev) => setTitle(ev.target.value)}\r\n              className=\"group-preview\"\r\n              autoFocus\r\n              // onBlur={toggleIsClicked}\r\n            />\r\n\r\n            <div className={`group-btns flex align-center`}>\r\n              <button\r\n                onClick={addGroup}\r\n                className=\"group-btn save-group-title-btn\"\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"group-btn close-group-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  addGroup,\r\n};\r\nexport const AddNewGroup = withRouter(\r\n  connect(null, mapDispatchToProps)(_AddNewGroup)\r\n);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { toggleExpandLabels } from \"../../store/board.actions\";\r\n\r\nfunction _TaskLabels(props) {\r\n  const { labelIds, boardLabels, areLabelsExpanded, toggleExpandLabels } =\r\n    props\r\n  return (\r\n      <div className=\"task-labels-container flex\">\r\n        {labelIds &&\r\n          labelIds.map((labelId, idx) => {\r\n            const label = boardLabels.find((label) => label.id === labelId);\r\n            if (label)\r\n              return (\r\n                <div\r\n                  className={`label flex justify-center ${\r\n                    areLabelsExpanded ? \"expanded\" : \"\"\r\n                  }`}\r\n                  style={{ background: label.color }}\r\n                  key={idx}\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    toggleExpandLabels();\r\n                  }}\r\n                >\r\n                  <span>{label.title}</span>\r\n                </div>\r\n              );\r\n          })}\r\n      </div>\r\n  );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    areLabelsExpanded: state.boardModule.areLabelsExpanded,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  toggleExpandLabels,\r\n};\r\nexport const TaskLabels = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskLabels);\r\n","import React from \"react\";\r\n\r\nexport const TaskDetailsPreview = (props) => {\r\n  if (props.txt === \"0/0\") return <></>;\r\n  return (\r\n    <span\r\n      className={` flex align-center ${\r\n        props.isDone ? \"checklist done checklist\" : \"\"\r\n      }`}\r\n    >\r\n      {props.icon}\r\n      {props.txt && <p>{props.txt}</p>}\r\n    </span>\r\n  );\r\n};\r\n","import React, { useState ,useEffect} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\n\r\nimport AccessTimeOutlinedIcon from \"@mui/icons-material/AccessTimeOutlined\";\r\nimport CheckBoxOutlineBlankOutlinedIcon from \"@mui/icons-material/CheckBoxOutlineBlankOutlined\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\n\r\nconst _TaskDatePreview = (props) => {\r\n\r\n  const [isMouseOver, setMouseOver] = useState(false);\r\n  const [isDone, setIsDone] = useState(props.isDone);\r\n\r\n  const toggleIsDone = async (ev) => {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n    setIsDone(!isDone)\r\n    const newBoard = { ...props.board };\r\n    const groupIdx = newBoard.groups.findIndex((group)=>props.groupId === group.id);\r\n    const taskIdx = newBoard.groups[groupIdx].tasks.findIndex((task)=>props.taskId === task.id);\r\n    newBoard.groups[groupIdx].tasks[taskIdx].isDone = !props.isDone\r\n    try {\r\n      await props.saveBoard(newBoard)\r\n    }\r\n    catch(err){\r\n      console.log('cant change task status',err)\r\n      setIsDone(!isDone)\r\n\r\n    }\r\n  };\r\n  useEffect(()=>{\r\n    if(isDone !== props.isDone) {\r\n      setIsDone(props.isDone)\r\n    }\r\n  },[props.isDone,isDone])\r\n  return (\r\n    <span\r\n      className={`due-date ${\r\n        !isDone && props.dueDate < Date.now() ? \"overdue\" : \"\"\r\n      }${isDone ? \"done\" : \"\"} `}\r\n      onMouseEnter={() => setMouseOver(props.noHover ? false : true)}\r\n      onMouseLeave={() => setMouseOver(false)}\r\n      onClick={toggleIsDone}\r\n    >\r\n      {!isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <AccessTimeOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      {isDone && (\r\n        <>\r\n          {!isMouseOver ? (\r\n            <CheckBoxOutlinedIcon className=\"icon\" />\r\n          ) : (\r\n            <CheckBoxOutlineBlankOutlinedIcon className=\"icon\" />\r\n          )}\r\n        </>\r\n      )}\r\n      <p>\r\n        {new Date(props.dueDate).toLocaleDateString(undefined, {\r\n          month: \"short\",\r\n          day: \"numeric\",\r\n        })}\r\n      </p>\r\n    </span>\r\n  );\r\n};\r\nconst mapDispatchToProps = {\r\n  saveBoard\r\n}\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\nexport const TaskDatePreview = connect(mapStateToProps,mapDispatchToProps)(_TaskDatePreview);\r\n","import { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport {\r\n  setCurrTaskDetails,\r\n  setPosition,\r\n  togglePopover,\r\n} from \"../../store/app.actions\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ArchiveIcon from \"@mui/icons-material/Archive\";\r\nimport PictureInPictureIcon from \"@mui/icons-material/PictureInPicture\";\r\nimport LabelIcon from \"@material-ui/icons/LocalOfferOutlined\";\r\nimport PersonOutlineIcon from \"@mui/icons-material/PersonOutline\";\r\nimport CoverIcon from \"@material-ui/icons/VideoLabel\";\r\nimport CopyIcon from \"@material-ui/icons/FileCopyOutlined\";\r\nimport ArrowForwardIcon from \"@mui/icons-material/ArrowForward\";\r\nimport ScheduleIcon from \"@mui/icons-material/Schedule\";\r\n\r\nclass _TaskActions extends Component {\r\n  state = { selectedAction: \"\" };\r\n\r\n  componentWillUnmount = () => {\r\n    if (this.props.isPopoverOpen) this.props.togglePopover();\r\n    this.setState({ selectedAction: \"\" });\r\n  };\r\n\r\n  setActiveAction = (ev) => {\r\n    ev.stopPropagation();\r\n    this.setState({ selectedAction: ev.target.parentElement.dataset.type });\r\n  };\r\n\r\n  sendToArchive = async () => {\r\n    const newTask = { ...this.props.task };\r\n    newTask.isArchive = true;\r\n    await this.props.addActivity(\r\n      this.props.board,\r\n      this.props.task,\r\n      \"add-to-archive\",\r\n      newTask.title\r\n    );\r\n    try {\r\n      await this.props.updateTask(\r\n        this.props.boardId,\r\n        this.props.groupId,\r\n        newTask\r\n      );\r\n      this.props.toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when sending to archive\", err);\r\n    }\r\n  };\r\n\r\n  popoverDispatch = (ev, type) => {\r\n    this.props.task.style = this.props.task.style\r\n      ? this.props.task.style\r\n      : (this.props.task.style = {});\r\n    this.props.setCurrTaskDetails(this.props.task);\r\n    this.props.setPosition({\r\n      pos: { pageX: ev.pageX, pageY: ev.pageY },\r\n      type,\r\n    });\r\n    this.props.togglePopover();\r\n  };\r\n\r\n  render() {\r\n    const { menuPos, toggleMenu, taskUrl } = this.props;\r\n\r\n    return (\r\n      <div className=\"task-actions flex column slide-in-left\" style={menuPos}>\r\n        <Link to={taskUrl} onClick={toggleMenu} className=\"clean-link\">\r\n          <button>\r\n            <PictureInPictureIcon className=\"action-icon\" />\r\n            <p>Open card</p>\r\n          </button>\r\n        </Link>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"labels\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"labels\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"LABELS\");\r\n          }}\r\n        >\r\n          <LabelIcon className=\"action-icon\" />\r\n          <p>Edit labels</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"members\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"members\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MEMBERS\");\r\n          }}\r\n        >\r\n          <PersonOutlineIcon className=\"action-icon\" />\r\n          <p>Change members</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"cover\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"cover\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COVER\");\r\n          }}\r\n        >\r\n          <CoverIcon className=\"action-icon\" />\r\n          <p>Change cover</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"move\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"move\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"MOVE\");\r\n          }}\r\n        >\r\n          <ArrowForwardIcon className=\"action-icon\" />\r\n          <p>Move</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"copy\" && this.props.isPopoverOpen\r\n              ? \"active\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"copy\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"COPY\");\r\n          }}\r\n        >\r\n          <CopyIcon className=\"action-icon\" />\r\n          <p>Copy</p>\r\n        </button>\r\n        <button\r\n          className={`${\r\n            this.state.selectedAction === \"date\" && this.props.isPopoverOpen\r\n              ? \"\"\r\n              : \"\"\r\n          }`}\r\n          data-type=\"date\"\r\n          onClick={(ev) => {\r\n            this.setActiveAction(ev);\r\n            this.popoverDispatch(ev, \"DATE\");\r\n          }}\r\n        >\r\n          <ScheduleIcon className=\"action-icon\" />\r\n          <p>Edit date</p>\r\n        </button>\r\n        <button onClick={this.sendToArchive}>\r\n          <ArchiveIcon className=\"action-icon\" />\r\n          <p>Archive</p>\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  setPosition,\r\n  setCurrTaskDetails,\r\n  togglePopover,\r\n  addActivity,\r\n};\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isPopoverOpen: state.appModule.popover.isOpen,\r\n    board: state.boardModule.board,\r\n  };\r\n};\r\nexport const TaskActions = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskActions);\r\n","import { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { updateTask, addActivity } from \"../../store/board.actions\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\nimport { TaskActions } from \"./TaskActions\";\r\n\r\nexport function _TaskPreviewEdit({\r\n  task,\r\n  groupId,\r\n  boardId,\r\n  boardLabels,\r\n  getChecklistData,\r\n  menuPos,\r\n  toggleMenu,\r\n  updateTask,\r\n  taskUrl,\r\n  addActivity,\r\n  board,\r\n}) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    todos,\r\n    doneTodos,\r\n  } = task;\r\n\r\n  const [editTitle, setEditTitle] = useState(title);\r\n\r\n  const updateTaskName = async () => {\r\n    const newTask = { ...task };\r\n    if (newTask.title === editTitle) return;\r\n    newTask.title = editTitle;\r\n\r\n    try {\r\n      await updateTask(boardId, groupId, newTask);\r\n      toggleMenu();\r\n    } catch (err) {\r\n      console.log(\"error when setting title\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ zIndex: 100, borderRadius: 3 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          <textarea\r\n            className=\"task-title\"\r\n            value={editTitle}\r\n            autoFocus\r\n            onChange={(ev) => setEditTitle(ev.target.value)}\r\n          />\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && todos !== 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList\r\n                members={task.members}\r\n                isInPreview={true}\r\n                isEditMode={true}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n      <button\r\n        className=\"save-btn\"\r\n        onClick={() => {\r\n          updateTaskName();\r\n        }}\r\n      >\r\n        Save\r\n      </button>\r\n      <TaskActions\r\n        toggleMenu={toggleMenu}\r\n        menuPos={menuPos}\r\n        groupId={groupId}\r\n        boardId={boardId}\r\n        task={task}\r\n        taskUrl={taskUrl}\r\n      />\r\n    </>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  updateTask,\r\n  addActivity,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n  };\r\n}\r\nexport const TaskPreviewEdit = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewEdit);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { setPopoverMenu } from \"../store/app.actions\";\r\nimport { TaskPreviewEdit } from \"./TaskPreview/TaskPreviewEdit\";\r\nimport { TaskLabels } from \"./TaskPreview/TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskPreview/TaskDetailsPreview\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport { TaskDatePreview } from \"./TaskPreview/TaskDatePreview\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\n\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport ModeEditOutlinedIcon from \"@mui/icons-material/ModeEditOutlined\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nfunction _TaskPreview(props) {\r\n  const {\r\n    task,\r\n    taskUrl,\r\n    boardLabels,\r\n    groupId,\r\n    boardId,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const {\r\n    labelIds,\r\n    title,\r\n    dueDate,\r\n    comments,\r\n    checklists,\r\n    description,\r\n    attachments,\r\n    style,\r\n    media,\r\n  } = task;\r\n\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState();\r\n\r\n  const calcPos = (ev) => {\r\n    if (!ev) return;\r\n    let { top, right, height } =\r\n      ev.target.parentElement.parentElement.getBoundingClientRect();\r\n    console.log(top, right, height, window.innerHeight);\r\n    if (top > window.innerHeight - 318) {\r\n      setMenuPos({\r\n        position: \"absolute\",\r\n        left: `${right}px`,\r\n        bottom: 50,\r\n      });\r\n    } else {\r\n      setMenuPos({\r\n        position: \"fixed\",\r\n        left: `${right}px`,\r\n        top,\r\n      });\r\n    }\r\n  };\r\n  const toggleMenu = (ev) => {\r\n    calcPos(ev);\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n    props.setPopoverMenu(false);\r\n  };\r\n\r\n  let todos;\r\n  let doneTodos;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    todos = 0;\r\n    doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos++;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n  // full cover image\r\n  if (style?.bgUrl && style?.coverMode === \"full\" && !isMenuShown) {\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <Link to={taskUrl} className=\"clean-link\">\r\n              <div\r\n                className={`task-preview-container full-cover img`}\r\n                src={style.bgUrl}\r\n              >\r\n                <img className=\"\" src={style.bgUrl} alt=\"\" />\r\n                <div className=\"img-overlay\" />\r\n                <p>{task.title}</p>\r\n                <div\r\n                  className=\"edit-icon\"\r\n                  onClick={(ev) => {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                    toggleMenu(ev);\r\n                  }}\r\n                >\r\n                  <ModeEditOutlinedIcon className=\"icon\" />\r\n                </div>\r\n              </div>\r\n            </Link>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  }\r\n\r\n  // full color cover\r\n  if (style && style?.coverMode === \"full\" && !isMenuShown)\r\n    return (\r\n      <Draggable\r\n        draggableId={task.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided) => (\r\n          <article\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n          >\r\n            <div\r\n              className=\"task-preview-container full-cover\"\r\n              style={{ background: style.bgColor }}\r\n            >\r\n              <Link to={taskUrl} className=\"clean-link\">\r\n                <div className=\"task-preview\">\r\n                  <p>{task.title}</p>\r\n                </div>\r\n              </Link>\r\n              <div className=\"edit-icon\" onClick={toggleMenu}>\r\n                <ModeEditOutlinedIcon className=\"icon\" />\r\n              </div>\r\n            </div>\r\n          </article>\r\n        )}\r\n      </Draggable>\r\n    );\r\n  // normal\r\n  if (!isMenuShown)\r\n    return (\r\n      <>\r\n        <Draggable\r\n          draggableId={task.id}\r\n          index={index}\r\n          isDragDisabled={isDragDisabled}\r\n        >\r\n          {(provided) => (\r\n            <div\r\n              ref={provided.innerRef}\r\n              {...provided.draggableProps}\r\n              {...provided.dragHandleProps}\r\n            >\r\n              <article\r\n                className=\"task-preview-container\"\r\n                style={{ boxShadow: \"none\", zIndex: isMenuShown ? 55 : 0 }}\r\n              >\r\n                {style?.bgUrl && (\r\n                  <Link to={taskUrl} className=\"clean-link\">\r\n                    <img\r\n                      className=\"task-cover-img\"\r\n                      src={style.bgUrl}\r\n                      style={{\r\n                        backgroundColor: \"white\",\r\n                        borderRadius: \"3px\",\r\n                        objectFit: \"cover\",\r\n                        maxHeight: 240,\r\n                      }}\r\n                      alt=\"\"\r\n                    />\r\n                  </Link>\r\n                )}\r\n\r\n                <Link to={taskUrl} className=\"clean-link\">\r\n                  {style?.bgColor && !style?.bgUrl && (\r\n                    <div\r\n                      className=\"task-cover\"\r\n                      style={{ background: task.style.bgColor }}\r\n                    ></div>\r\n                  )}\r\n                  <div\r\n                    className=\"task-preview clean-link \"\r\n                    style={\r\n                      style?.bgUrl && {\r\n                        position: \"relative\",\r\n                        top: \"-8px\",\r\n                        marginBottom: \"-8px\",\r\n                        borderRadius: \"0 0 3px 3px\",\r\n                      }\r\n                    }\r\n                  >\r\n                    {labelIds?.length > 0 && (\r\n                      <TaskLabels\r\n                        labelIds={labelIds}\r\n                        boardLabels={boardLabels}\r\n                      />\r\n                    )}\r\n                    {media?.videoUrl && (\r\n                      <div\r\n                        className=\"video flex\"\r\n                        onDrag={(ev) => ev.stopPropagation()}\r\n                      >\r\n                        <video width={\"100%\"} controls>\r\n                          <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n                        </video>\r\n                      </div>\r\n                    )}\r\n                    {media?.audioUrl && (\r\n                      <div className=\"audio\">\r\n                        <audio controls src={task.media.audioUrl} />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"task-title\">\r\n                      <p>{title}</p>\r\n                    </div>\r\n                    <div className=\"task-preview-icons flex align-center\">\r\n                      {dueDate && (\r\n                        <TaskDatePreview\r\n                          dueDate={dueDate}\r\n                          isDone={task.isDone}\r\n                          taskId={task.id}\r\n                          groupId={groupId}\r\n                        />\r\n                      )}\r\n                      {description?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<SubjectOutlinedIcon className=\"icon desc\" />}\r\n                        />\r\n                      )}\r\n                      {comments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={\r\n                            <ChatBubbleOutlineRoundedIcon className=\"icon msg\" />\r\n                          }\r\n                          txt={comments.length}\r\n                        />\r\n                      )}\r\n                      {attachments?.length > 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<AttachFileIcon className=\"icon attach\" />}\r\n                          txt={attachments.length}\r\n                        />\r\n                      )}\r\n                      {checklists?.length > 0 && todos !== 0 && (\r\n                        <TaskDetailsPreview\r\n                          icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                          txt={getChecklistData()}\r\n                          isDone={\r\n                            todos === doneTodos && todos !== 0 ? true : false\r\n                          }\r\n                        />\r\n                      )}\r\n                      {task?.members && (\r\n                        <MemberList\r\n                          members={task.members}\r\n                          isInPreview={true}\r\n                          task={task}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div\r\n                    className=\"edit-icon\"\r\n                    onClick={(ev) => {\r\n                      ev.preventDefault();\r\n                      ev.stopPropagation();\r\n                      toggleMenu(ev);\r\n                    }}\r\n                  >\r\n                    <ModeEditOutlinedIcon className=\"icon\" />\r\n                  </div>\r\n                </Link>\r\n              </article>\r\n            </div>\r\n          )}\r\n        </Draggable>\r\n      </>\r\n    );\r\n  // edit mode\r\n  else\r\n    return (\r\n      <>\r\n        <div\r\n          className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n          onClick={toggleMenu}\r\n          style={{ zIndx: 2 }}\r\n        ></div>\r\n        <TaskPreviewEdit\r\n          task={task}\r\n          getChecklistData={getChecklistData}\r\n          groupId={groupId}\r\n          boardId={boardId}\r\n          boardLabels={boardLabels}\r\n          menuPos={menuPos}\r\n          toggleMenu={toggleMenu}\r\n          taskUrl={taskUrl}\r\n        />\r\n      </>\r\n    );\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  toggleDragDisable,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const TaskPreview = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreview);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { TaskPreview } from \"./TaskPreview\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function _TaskPreviewList(props) {\r\n  const { groupId, boardId, boardLabels, tasks, filterBy } = props;\r\n\r\n  let filteredTasks = JSON.parse(JSON.stringify(tasks))\r\n  if (filteredTasks.length) {\r\n    filteredTasks.forEach((task, idx) => task.orgIdx = idx)\r\n    filteredTasks = filteredTasks.filter((task) => task?.isArchive !== true);\r\n  }\r\n\r\n  if (filterBy.search) {\r\n    const search = filterBy.search.toLowerCase()\r\n    filteredTasks = filteredTasks.filter(task => task.title.toLowerCase().includes(search))\r\n  }\r\n\r\n  if (filterBy.labels.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.labelIds.some(labelId => filterBy.labels.every(label => task.labelIds.includes(label))))\r\n  }\r\n\r\n  if (filterBy.members.length > 0) {\r\n    filteredTasks = filteredTasks.filter(task => task.members.some(member => filterBy.members.every(member => {\r\n      const taskMembersIds = task.members.map(member => member._id)\r\n      return taskMembersIds.includes(member)\r\n    })))\r\n  }\r\n\r\n  return (\r\n    <Droppable droppableId={groupId}>\r\n      {(provided) => (\r\n        <div {...provided.droppableProps} ref={provided.innerRef} className=\"task-list\">\r\n          {filteredTasks?.map((task) => (\r\n            <TaskPreview\r\n              task={task}\r\n              key={task.id}\r\n              id={task.id}\r\n              index={task.orgIdx}\r\n              taskUrl={`/board/${boardId}/${groupId}/${task.id}`}\r\n              boardLabels={boardLabels}\r\n              groupId={groupId}\r\n              boardId={boardId}\r\n            />\r\n          ))}\r\n          {provided.placeholder}\r\n          {!filteredTasks.length && <div style={{ visibilty: 'hidden', opacity: '0', height: '1px', width: '1px', color: 'transparent' }}></div>}\r\n        </div>\r\n      )}\r\n    </Droppable>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    filterBy: state.boardModule.filterBy,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n\r\n};\r\n\r\nexport const TaskPreviewList = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskPreviewList);\r\n","export const cloudinaryService = {\n    uploadFile\n}\n\nfunction uploadFile(ev, type = 'image', blob = null) {\n    const CLOUD_NAME = 'dusakec3z'\n    const PRESET_NAME = 'pjprwzkr'\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type}/upload`\n\n    const formData = new FormData();\n    // console.log('target', ev.target)\n    (type === 'image') ? formData.append('file', ev.target.files[0]) : formData.append('file', blob)\n    // console.log('ev.target.files[0]):', ev.target.files[0])\n    formData.append('upload_preset', PRESET_NAME);\n    // console.log('formData:', formData)\n\n    return fetch(UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n    })\n        .then(res => res.json())\n        .then(res => {\n            return res\n        })\n        .catch(err => console.error(err))\n}\n\n// const CLOUD_NAME = 'dswmustlv'\n// const PRESET_NAME = 'f7cyi5ho'\n","\nimport React from 'react';\nimport { connect } from 'react-redux'\nimport VideoRecorder from \"react-video-recorder\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { ReactMic } from 'react-mic';\nimport { cloudinaryService } from '../services/cloudinary-service'\nimport { addTask } from '../store/board.actions';\nimport StopIcon from \"@material-ui/icons/Stop\";\nimport Fab from \"@material-ui/core/Fab\";\nimport styled from \"styled-components\";\nimport MicIcon from \"@material-ui/icons/Mic\";\n\n\n\nexport class _MediaRecord extends React.Component {\n    state = {\n        record: false,\n        isOverlay: true\n    };\n\n    componentDidMount() {\n        this.setOverlay(true)\n    }\n\n    compoentWillUnmount() {\n        this.stopRecording()\n    }\n\n    startRecording = () => {\n        this.setState({\n            record: true\n        });\n    };\n\n    stopRecording = () => {\n        this.setState({\n            record: false\n        });\n    };\n\n    onStop = async (blob, type) => {\n        this.props.setMediaType('')\n        const res = await cloudinaryService.uploadFile(null, 'video', type === 'video' ? blob : blob.blob);\n        const url = res.secure_url\n        if (type === 'video') this.props.addTask('Media Video', this.props.boardId, this.props.groupId, null, url)\n        else this.props.addTask('Media Audio', this.props.boardId, this.props.groupId, url, null)\n    }\n\n    setOverlay = (isOverlay) => {\n        this.setState({ isOverlay })\n    }\n\n    render() {\n        const StyledFab = styled(Fab)`\n        position: relative;\n        background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n        color: white;\n        opacity: 1;\n        margin: 12px;\n        z-index: 3;\n        transition: all 0.2s;\n        :hover {\n          background-color: ${!this.state.record ? \"#272727\" : \"#8f3934\"};\n          opacity: 0.9;\n        }\n      `;\n\n        const { setAudioPath } = this.props;\n        return (\n            <>\n                {\n                    <div className=\"media\" style={{ width: \"100%\", maxWidth: 400, height: 400, padding: '0 20px' }}>\n                        <div className=\"media-container\">\n                            {this.props.type === 'video' && <VideoRecorder\n                                className=\"video-recorder\"\n                                isFlipped={false}\n                                countdownTime={0}\n                                mimeType=\"video/webm;codecs=vp8,opus\"\n                                constraints={{\n                                    audio: true,\n                                    video: {\n                                        resizeMode: \"crop-and-scale\",\n                                        width: { exact: 480, ideal: 480 },\n                                        height: { exact: 640, ideal: 640 },\n                                        aspectRatio: { exact: 0.7500000001, ideal: 0.7500000001 },\n                                    }\n                                }}\n                                onRecordingComplete={(blob) => this.onStop(blob, 'video')}\n                            />}\n                        </div>\n                    </div>\n\n                }\n                {\n                    this.props.type === 'audio' && <div className=\"media\">\n                        <div className=\"media-container\">\n\n                            <ReactMic\n                                record={this.state.record}\n                                className=\"sound-wave\"\n                                onStop={(blob) => this.onStop(blob, 'audio')}\n                                strokeColor=\"white\"\n                                backgroundColor=\"black\"\n                                setAudioPath={setAudioPath}\n                                height={240}\n                                width={370}\n                            />\n                            <Grid item container justify=\"center\" xs={12}>\n                                {!this.state.record && <StyledFab\n                                    onClick={this.startRecording}\n                                    color=\"secondary\" aria-label=\"record\">\n                                    <MicIcon />\n                                </StyledFab>}\n                                {this.state.record && <StyledFab color=\"secondary\" aria-label=\"record\"\n                                    onClick={this.stopRecording}>\n                                    <StopIcon />\n                                </StyledFab>}\n                            </Grid>\n                        </div>\n\n                    </div>\n                }\n                <div className={`overlay ${this.state.isOverlay ? 'show' : ''} `} onClick={() => { this.props.setMediaType('') }} style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }}></div>\n            </>\n        );\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addTask\n};\n\nexport const MediaRecord = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_MediaRecord);\n","import React, { useState } from \"react\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { addTask } from \"../../store/board.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport VideoCallIcon from \"@mui/icons-material/VideoCall\";\r\nimport MicNoneIcon from \"@mui/icons-material/MicNone\";\r\nimport { MediaRecord } from \"../MediaRecord\";\r\n\r\nexport function _GroupFooter(props) {\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [taskTitle, setTaskTitle] = useState(\"\");\r\n  const [btnText, setBtnText] = useState(\"Add task\");\r\n  const [mediaType, setType] = useState(\"\");\r\n\r\n  const toggleIsClicked = () => {\r\n    setIsClicked(!isClicked);\r\n  };\r\n\r\n  const onAddTask = async () => {\r\n    try {\r\n      if (!taskTitle.trim()) return;\r\n      setBtnText(<Loader type=\"Grid\" color={\"white\"} height={14} width={14} />);\r\n      await props.addTask(\r\n        taskTitle.trim(),\r\n        props.ids.boardId,\r\n        props.ids.groupId\r\n      );\r\n      setTaskTitle(\"\");\r\n      setBtnText(\"Add task\");\r\n      props.scrollToBottom();\r\n    } catch (err) {\r\n      console.log(\"error when saving task\", err);\r\n      setBtnText(\"Add task\");\r\n    }\r\n  };\r\n  const setMediaType = (type) => {\r\n    setType(type);\r\n    type ? props.toggleDragDisable(true) : props.toggleDragDisable(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"grp-add-task\">\r\n        {!isClicked ? (\r\n          <div className=\"add-task-inactive flex space-between\">\r\n            <div\r\n              className=\"add-btn flex align-center\"\r\n              onClick={toggleIsClicked}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n              <p>Add a task</p>\r\n            </div>\r\n            <div className=\"media-btns flex align-center\">\r\n              <VideoCallIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"video\")}\r\n              />\r\n              <MicNoneIcon\r\n                className=\"media-icon\"\r\n                onClick={() => setMediaType(\"audio\")}\r\n              />\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"add-task-active flex column\">\r\n            <textarea\r\n              value={taskTitle}\r\n              placeholder=\"Enter a title for this task...\"\r\n              onChange={(ev) => setTaskTitle(ev.target.value)}\r\n              className=\"task-preview\"\r\n              onClick={props.scrollToBottom}\r\n            />\r\n\r\n            <div className={`task-btns flex align-center`}>\r\n              <button\r\n                className=\"task-btn save-task-title-btn\"\r\n                onClick={onAddTask}\r\n              >\r\n                {btnText}\r\n              </button>\r\n              <button\r\n                className=\"task-btn close-task-title-btn\"\r\n                onClick={toggleIsClicked}\r\n              >\r\n                <Close />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {mediaType && (\r\n        <MediaRecord\r\n          boardId={props.ids.boardId}\r\n          groupId={props.ids.groupId}\r\n          type={mediaType}\r\n          setMediaType={setMediaType}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  addTask,\r\n};\r\n\r\nexport const GroupFooter = connect(null, mapDispatchToProps)(_GroupFooter);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { saveBoard } from \"../../store/board.actions\";\r\n\r\nconst _HeaderTitle = (props) => {\r\n  const group = { ...props.group };\r\n  const [groupTitle, setTitle] = useState(group.title);\r\n  useEffect(() => {\r\n    setTitle(props.group.title)\r\n }, [props.group.title]);\r\n\r\n  const saveTitle = async () => {\r\n    const newBoard = { ...props.board };\r\n    const grpIdx = newBoard.groups.findIndex((grp) => group.id === grp.id);\r\n    newBoard.groups[grpIdx].title = groupTitle;\r\n    try {\r\n      await props.saveBoard(newBoard);\r\n    } catch (err) {\r\n    }\r\n  };\r\n\r\n  return (\r\n    <input\r\n      className=\"group-title flex column\"\r\n      value={groupTitle}\r\n      onChange={(ev) => setTitle(ev.target.value)}\r\n      onBlur={saveTitle}\r\n    />\r\n  );\r\n};\r\nfunction mapStateToProps({ boardModule }) {\r\n  return {\r\n    board: boardModule.board,\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n};\r\nexport const HeaderTitle = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_HeaderTitle);\r\n","import React from \"react\";\r\nexport function GroupActions(props) {\r\n\r\n  return (\r\n    <div className=\"group-menu\" style={props.menuPos}>\r\n      <h3>List actions</h3>\r\n      <button\r\n        onClick={() => {\r\n          props.removeGroup(props.boardId, props.groupId);\r\n          props.toggleMenuShown(false);\r\n        }}\r\n      >\r\n         Delete list\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { AddNewGroup } from \"./Group/AddNewGroup\";\r\nimport { TaskPreviewList } from \"./TaskPreviewList\";\r\nimport { GroupFooter } from \"./Group/GroupFooter\";\r\nimport { HeaderTitle } from \"./Group/HeaderTitle\";\r\nimport { removeGroup } from \"../store/board.actions\";\r\nimport { toggleDragDisable } from \"../store/app.actions\";\r\nimport MoreHorizOutlinedIcon from \"@mui/icons-material/MoreHorizOutlined\";\r\nimport { GroupActions } from \"./Group/GroupActions\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport NaturalDragAnimation from \"natural-drag-animation-rbdnd\";\r\n\r\nconst _GroupDetails = (props) => {\r\n  const {\r\n    group,\r\n    isAddNew,\r\n    boardId,\r\n    boardLabels,\r\n    index,\r\n    isDragDisabled,\r\n    toggleDragDisable,\r\n  } = props;\r\n  const elRef = useRef();\r\n  const [isMenuShown, toggleMenuShown] = useState(false);\r\n  const [menuPos, setMenuPos] = useState({});\r\n\r\n  const toggleMenu = (ev) => {\r\n    let posX = window.innerWidth - ev.pageX > 200 ? ev.pageX : ev.pageX - 200;\r\n    setMenuPos({\r\n      position: \"fixed\",\r\n      top: `${ev.pageY}px`,\r\n      left: `${posX}px`,\r\n    });\r\n    toggleMenuShown(!isMenuShown);\r\n    toggleDragDisable();\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    elRef.current.scrollTo({\r\n      top: elRef.current.scrollHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  };\r\n\r\n  if (isAddNew) return <AddNewGroup />;\r\n\r\n  return (\r\n    <div>\r\n      <Draggable\r\n        draggableId={group.id}\r\n        index={index}\r\n        isDragDisabled={isDragDisabled}\r\n      >\r\n        {(provided, snapshot) => (\r\n          <NaturalDragAnimation\r\n            style={provided.draggableProps.style}\r\n            snapshot={snapshot}\r\n          >\r\n            {(style) => (\r\n              <article\r\n                ref={provided.innerRef}\r\n                {...provided.draggableProps}\r\n                {...provided.dragHandleProps}\r\n                // style={style}\r\n                style={{...style}}\r\n\r\n                className=\"group-details flex column\"\r\n              >\r\n                <div className=\"group-header flex space-between align-center\">\r\n                  <HeaderTitle group={group} />\r\n                  <MoreHorizOutlinedIcon\r\n                    fontSize={\"small\"}\r\n                    onClick={toggleMenu}\r\n                    className=\"dots\"\r\n                  />\r\n\r\n                  {isMenuShown && (\r\n                    <GroupActions\r\n                      menuPos={menuPos}\r\n                      removeGroup={props.removeGroup}\r\n                      toggleMenuShown={toggleMenuShown}\r\n                      boardId={boardId}\r\n                      groupId={group.id}\r\n                    />\r\n                  )}\r\n                  <div\r\n                    className={`overlay ${isMenuShown ? \"show\" : \"\"}`}\r\n                    onClick={toggleMenu}\r\n                  />\r\n                </div>\r\n                <div className={`group-main flex column `} ref={elRef}>\r\n                  <TaskPreviewList\r\n                    tasks={group.tasks}\r\n                    boardId={boardId}\r\n                    groupId={group.id}\r\n                    boardLabels={boardLabels}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n                <div className=\"group-footer\">\r\n                  <GroupFooter\r\n                    ids={{ groupId: group.id, boardId }}\r\n                    scrollToBottom={scrollToBottom}\r\n                    toggleDragDisable={toggleDragDisable}\r\n                  />\r\n                </div>\r\n              </article>\r\n            )}\r\n          </NaturalDragAnimation>\r\n        )}\r\n      </Draggable>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  removeGroup,\r\n  toggleDragDisable,\r\n};\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    isDragDisabled: state.appModule.isDragDisabled,\r\n  };\r\n}\r\nexport const GroupDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_GroupDetails);\r\n","import React from \"react\";\r\nimport { GroupDetails } from \"./GroupDetails\";\r\nimport { Droppable } from \"react-beautiful-dnd\";\r\n\r\nexport function GroupList(props) {\r\n  const { groups, boardId, boardLabels } = props;\r\n\r\n  return (\r\n    <>\r\n      <Droppable\r\n        droppableId={\"all-groups\"}\r\n        type=\"group\"\r\n        direction={\"horizontal\"}\r\n      >\r\n        {(provided) => (\r\n          <div\r\n            className=\"group-list\"\r\n            {...provided.droppableProps}\r\n            ref={provided.innerRef}\r\n          >\r\n            {groups.map((group, idx) => (\r\n              <div key={group.id}>\r\n                <GroupDetails\r\n                  group={group}\r\n                  boardId={boardId}\r\n                  index={idx}\r\n                  id={group.id}\r\n                  boardLabels={boardLabels}\r\n                />\r\n              </div>\r\n            ))}\r\n            {provided.placeholder}\r\n            <GroupDetails isAddNew={true} />\r\n          </div>\r\n        )}\r\n      </Droppable>\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { BoardHeader } from \"../cmps/BoardHeader\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin } from \"../store/user.actions\"\r\nimport { loadBoard, loadBoards, clearBoard, handleDrag, setFilterBy } from \"../store/board.actions\";\r\nimport { loadUsers } from \"../store/user.actions\";\r\nimport { GroupList } from \"../cmps/GroupList\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\nimport { socketService } from '../services/socket.service'\r\nimport { MediaRecord } from '../cmps/MediaRecord'\r\n\r\n\r\nclass _BoardApp extends Component {\r\n  state = {\r\n    isMenuOpen: false,\r\n    currentTarget: null,\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n    const { boardId } = this.props.match.params\r\n    if (!this.props.user) this.props.onLogin({ username: 'guest', password: '1' })\r\n    this._loadBoard();\r\n    if (!this.props.boards.length) this.props.loadBoards()\r\n    this.props.loadUsers();\r\n    socketService.emit('join-board', boardId)\r\n    socketService.on(\"updated-board\", () => { this.props.loadBoard(boardId) })\r\n\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.props.clearBoard();\r\n    socketService.off(\"updated-board\")\r\n    this.props.setFilterBy({ labels: [], members: [], search: '' })\r\n\r\n  };\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.props.match.params?.boardId !== this.props.board?._id) {\r\n      this.props.clearBoard();\r\n      this._loadBoard();\r\n      this.props.loadUsers();\r\n\r\n    }\r\n  };\r\n\r\n  toggleMenu = (ev) => {\r\n    this.setState(prevState => ({ ...prevState, isMenuOpen: !this.state.isMenuOpen }))\r\n    this.setCurrentTarget(ev)\r\n  }\r\n\r\n  setCurrentTarget = (event) => {\r\n    this.setState(prevState => ({ ...prevState, currentTarget: event }))\r\n  }\r\n\r\n  _loadBoard = async () => {\r\n    const id = this.props.match.params.boardId;\r\n    if (!id) this.props.history.push('/workspace')\r\n    if (id) {\r\n      try {\r\n        await this.props.loadBoard(id);\r\n        if (!this.props.board)\r\n          this.props.history.push('/workspace')\r\n\r\n      } catch (err) {\r\n        console.log(\"cant load board\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  onDragEnd = (result) => {\r\n    const { destination, source, draggableId, type } = result;\r\n    if (!destination) return;\r\n    this.props.handleDrag(\r\n      { ...this.props.board },\r\n      source.droppableId,\r\n      destination.droppableId,\r\n      source.index,\r\n      destination.index,\r\n      draggableId,\r\n      type\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { board } = this.props;\r\n    if (!board) return <></>;\r\n    return (<>\r\n      <DragDropContext onDragEnd={this.onDragEnd}>\r\n        <section\r\n          className=\"board-app flex column\"\r\n          style={{\r\n            background: board.style.bgImg\r\n              ? `url(${board.style.bgImg})`\r\n              : board.style.bgClr,\r\n          }}\r\n        >\r\n          <BoardHeader board={{ ...board }} toggleMenu={this.toggleMenu} />\r\n          <GroupList\r\n            groups={[...board.groups]}\r\n            boardId={board._id}\r\n            boardLabels={[...board.labels]}\r\n          />\r\n        </section>\r\n      </DragDropContext>\r\n    </>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    boards: state.boardModule.boards,\r\n    user: state.userModule.loggedinUser\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  loadBoard,\r\n  loadBoards,\r\n  clearBoard,\r\n  loadUsers,\r\n  handleDrag,\r\n  onLogin,\r\n  setFilterBy\r\n};\r\n\r\nexport const BoardApp = connect(mapStateToProps, mapDispatchToProps)(_BoardApp);\r\n","import React, { useState } from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\n\nexport function TaskHeader({ taskTitle, setTaksDetailsTitle, taskList }) {\n    const [title, setTitle] = useState(taskTitle);\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        setTaksDetailsTitle(title);\n    }\n\n\n    return (\n        <header className=\"task-header\">\n            <div className=\"header-content\">\n                <div className=\"header-name flex\">\n                    <VideoLabel className=\"LabelSvg\" />\n                    <textarea\n                        style={{ width: '100%' }}\n                        onKeyDown={(ev) => {\n                            if (ev.key === 'Enter') {\n                                ev.preventDefault();\n                            }\n                        }}\n                        onChange={(e) => { setTitle(e.target.value) }}\n                        onBlur={(e) => { setTitle(e.target.value); handleSubmit(e) }}\n                        value={title}>\n                    </textarea>\n                </div>\n                <p className=\"list-name\">in list <span style={{ textDecoration: 'underline', fontWeight: 600 }}>{taskList}</span></p>\n            </div>\n        </header >\n    )\n}\n\n\n","import React from 'react'\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { connect } from 'react-redux';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\n\nexport function _TaskCardCover({ setPosition, currTaskDetails, togglePopover }) {\n    const { bgColor, bgUrl } = currTaskDetails.style\n    return (\n        <div className=\"card-cover flex\" style={{ backgroundColor: bgColor ? bgColor : '' }}>\n            {bgUrl && <img src={bgUrl} style={{ backgroundColor: bgColor ? bgColor : '' }} />}\n            <button className=\"cover-btn flex\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}><VideoLabel /> Cover</button>\n        </div >\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskCardCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskCardCover);\n","import React, { Component } from \"react\";\n// import SubjectIcon from '@material-ui/icons/Subject';\nimport { Close } from '@mui/icons-material';\nimport SubjectIcon from '@mui/icons-material/Subject';\n\n\n\nexport class TaskDescription extends Component {\n    state = {\n        description: '',\n        isEditMode: false\n    }\n\n    componentDidMount() {\n        const description = this.props.currTask.description ? this.props.currTask.description : ''\n        this.setState(prevState => ({ ...prevState, description }))\n    }\n\n    onSaveDescription = () => {\n        const { description } = this.state\n        const { currTask, updateTaskDetails } = this.props\n        currTask.description = description\n        updateTaskDetails(currTask)\n        this.setState({ isEditMode: false })\n    }\n    handleChange = ({ target: { value } }) => {\n        this.setState({ description: value })\n    }\n\n    onToggleEdit = () => {\n        this.setState({ isEditMode: !this.state.isEditMode })\n    }\n    onEditMode = () => {\n        this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    render() {\n        const { isEditMode, description } = this.state\n        return (\n            <div className=\"task-description flex column\">\n                <div className=\"window-modal-title flex align-center\">\n                    <SubjectIcon />\n                    <h3>Description</h3>\n                    <button\n                        className={`task-btns edit-task-description-btn ${!isEditMode ? 'full-opacity' : 'none-opacity'}`}\n                        onClick={() => this.onEditMode()}>\n                        Edit\n                    </button>\n                </div>\n                <div className=\"card-description-edit flex column\">\n                    <textarea onClick={this.onEditMode}\n                        ref={(input) => { this.selectedInput = input; }}\n                        onBlur={this.onSaveDescription}\n                        value={description}\n                        placeholder=\"Add a more detailed description...\"\n                        onChange={this.handleChange}>\n                    </textarea>\n\n                    <div className={`description-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                        <button className='task-btns save-task-description-btn' onClick={() => this.onSaveDescription()}>Save</button>\n                        <button className='task-btns close-task-description-btn' onClick={() => this.onToggleEdit()}><Close /></button>\n                    </div>\n                </div>\n            </div>)\n    }\n\n}","import React from \"react\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport { connect } from \"react-redux\";\nimport { togglePopover, setPosition, setPopover } from '../../store/app.actions'\nexport class _Popover extends React.Component {\n    state = {\n        visible: false,\n        top: 0,\n        left: 0,\n    };\n    contentEl = null;\n\n    componentDidMount() {\n        this.onSetPopoverPos()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.popover !== this.props.popover) {\n            this.onSetPopoverPos()\n        }\n    }\n\n\n    toggleVisibility = () =>\n        this.setState((prevState) => ({ visible: !prevState.visible }));\n\n    onSetPopoverPos = () => {\n        if (!this.contentEl) return\n        const elRect = this.contentEl.getBoundingClientRect()\n        let { left, top } = this.setPopoverPos(elRect)\n        this.setState({ top, left })\n    }\n\n\n    setPopoverPos(elRect) {\n        const { pos } = this.props.popover\n        const { width, height } = elRect\n        let posX = (window.innerWidth - pos.pageX > 200) ? pos.pageX - 200 : pos.pageX - 200;\n        let posY = (window.innerHeight - pos.pageY > 200) ? pos.pageY + 20 : pos.pageY - 200;\n        posX = (posX + width > window.innerWidth) ? window.innerWidth - width - 10 : posX;\n        posY = (posY + height > window.innerHeight) ? window.innerHeight - height - 20 : posY;\n        if (posX < 0) posX = 10;\n        return { left: posX, top: posY }\n    }\n\n\n\n\n    getContentStyles = () => {\n        const { top, left } = this.state;\n        const { title, popover } = this.props\n        return {\n            position: \"fixed\",\n            opacity: 1,\n            top: `${top}px`,\n            left: `${left}px`,\n            transition: \"opacity 0.3s, visibility 0.3s\",\n            backgroundColor: `${(popover.isMenu) ? '#f4f5f7' : '#fff'}`,\n            border: \"1px solid lightgray\",\n            padding: \"15px\",\n            zIndex: 100,\n            padding: \"0 12px 12px\",\n            borderRadius: \"3px\",\n            marginRight: \"4px\",\n            maxWidth: \"100%\",\n            boxShadow: \"0 8px 16px -4px rgba(9, 30, 66, 0.25), 0 0 0 1px rgba(9, 30, 66, 0.08)\",\n        };\n    };\n\n    render() {\n        const { title, children, popover } = this.props;\n        return (\n            <>\n                {(popover.isOpen) &&\n                    <>\n                        <div\n\n                            className={`popover ${popover.isMenu ? 'slide-in-right' : ''}`}\n                            ref={(el) => (this.contentEl = el)}\n                            style={this.getContentStyles()}\n                        >\n                            <div className=\"popover-header\">\n                                {/* <h3>{title}</h3> */}\n                                <span>{title}</span>\n                                <button className=\"clean-btn\" onClick={this.props.togglePopover}>\n                                    <CloseIcon />\n                                </button>\n                            </div>\n                            <div className=\"popover-content\">\n                                {children}\n                            </div>\n                        </div>\n                        <div className=\"popover-overlay\" style={{ position: \"fixed\", inset: 0, height: \"100vh\", zIndex: 90 }} onClick={this.props.togglePopover}></div>\n                    </>\n                }\n            </>\n        );\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    togglePopover,\n    setPosition,\n    setPopover\n};\n\nexport const Popover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_Popover);\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\nimport { connect } from 'react-redux'\n\nexport class _CheckDeletePopover extends Component {\n    state = {\n        typeTitle: ''\n    }\n\n    componentDidMount() {\n        this.setState(prevState => ({\n            ...prevState,\n            typeTitle: this.props.typeTitle\n        }))\n    }\n\n    componentWillUnmount() {\n        this.props.togglePopover()\n    }\n\n    render() {\n        const { type, remove } = this.props\n        let { typeTitle } = this.state\n        if (typeTitle.length > 15) typeTitle = typeTitle.substr(1, 15) + '...'\n        const title = `Delete ${typeTitle}?`\n        return (\n            <div className=\"no-back-container\">\n                <Popover title={title} >\n                    <div className=\"no-back\">\n                        <p>Deleting a {type} is permanent and there<br></br>is no way to get it back.</p>\n                        <button className=\"delete-checklist-btn danger-btn\" onClick={() => { remove() }}>Delete {type}</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return { }\n}\n\nexport const CheckDeletePopover = connect(mapStateToProps, null)(_CheckDeletePopover)\n","import React, { Component } from 'react'\nimport { Popover } from './Popover/Popover'\n\n\nexport class EditAttachmentPopover extends Component {\n    state = {\n        url: '',\n        urlName: '',\n    }\n\n    componentDidMount = () => {\n        const { attachment } = this.props\n        this.setState(prevState => ({ ...prevState, url: attachment.url, urlName: attachment.name }))\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentUpdate = () => {\n        const { url, urlName } = this.state\n        this.props.updateAttachment(url, urlName)\n    }\n\n    render() {\n        const { attachment } = this.props\n        const { url, urlName } = this.state\n\n        let attachName = attachment.name\n        if (attachName.length > 15) attachName = attachName.substr(1, 15) + '...'\n\n        const title = `Update ${attachName}`\n        return (\n            <div className=\"edit-attach-container\">\n                <Popover title={title} >\n                    <div className=\"attachment-container\">\n                        {attachment.isWeb &&\n                            <>\n                                <label htmlFor=\"url-upload\">Link</label>\n                                <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={url} name='url' onChange={this.handleChange} />\n                            </>\n                        }\n                        <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                        <input\n                            type=\"text\"\n                            id=\"url-name-optional\"\n                            name=\"urlName\"\n                            value={urlName}\n                            placeholder=\"Enter link name\"\n                            onChange={this.handleChange}\n                        />\n                        <button class=\"primary-btn\" onClick={this.onAttachmentUpdate}>Update</button>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { utilService } from '../services/util.service';\nimport VideoLabel from '@mui/icons-material/VideoLabel';\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { EditAttachmentPopover } from './EditAttachmentPopover'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { Link } from 'react-router-dom';\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, setPopover, setCurrTaskDetails } from '../store/app.actions';\n\n\nexport class _TaskAttachmentPreview extends Component {\n    state = {\n        isPopover: false,\n        isEditPopover: false,\n        bgUrl: null,\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        this.setState(prevState => ({ ...prevState, bgUrl, currGroup }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { currTaskDetails } = this.props\n        const bgUrl = currTaskDetails.style && currTaskDetails.style.bgUrl\n        if (bgUrl !== prevState.bgUrl) {\n            this.setState(prevState => ({ ...prevState, bgUrl }))\n        }\n    }\n\n    toggleBgUrl = () => {\n        this.setState(prevState => ({ ...prevState, bgUrl: !prevState.bgUrl }))\n    }\n\n    togglePopover = () => {\n        this.setState(prevState => ({ ...prevState, isEditPopover: false, isPopover: !prevState.isPopover }))\n    }\n    toggleEditPopover = () => {\n        this.setState(prevState => ({ ...prevState, isPopover: false, isEditPopover: !prevState.isEditPopover }))\n    }\n\n    removeAttach = async () => {\n        const { board, currTaskDetails, saveTaskDetails, addActivity, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const attachs = currTaskDetails.attachments.filter(currAttach => currAttach.id !== attachment.id)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.togglePopover()\n        addActivity(board, currTaskDetails, 'remove-attachment', attachment.name)\n    }\n\n    setCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.bgUrl = attachment.url\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { board, saveTaskDetails, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        this.toggleBgUrl()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    updateAttachment = async (url, urlName) => {\n        const { board, saveTaskDetails, currTaskDetails, attachment, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        if (!urlName) urlName = 'Attachment'\n        attachment.url = url\n        attachment.name = urlName\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.toggleEditPopover()\n    }\n\n    render() {\n        const { attachment, popover } = this.props\n        const { isPopover, isEditPopover, bgUrl } = this.state\n        const { isWeb } = attachment\n\n        return (\n            <div className=\"attachment-preview flex\">\n                {(isWeb) ?\n                    <Link className=\"attachment-thumbnail flex\" to={{ pathname: `${attachment.url}` }} target=\"_blank\" title={`${attachment.name}`}>\n                        <AttachFileIcon />\n                    </Link> :\n                    <img src={attachment.url} alt={attachment.name} />\n                }\n                <div className=\"attachment-content\">\n                    <div className=\"attachment-details\">\n                        <span className=\"attachment-title\">{(attachment.name.length > 15) ? attachment.name.substr(1, 15) + '...' : attachment.name}</span>\n                        <div className=\"attachment-actions\">\n                            <span className=\"attachment-date\">Added {utilService.timeSince(attachment.createdAt)}</span>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.togglePopover()\n                            }}>\n                                Delete\n                            </button>\n                            <button className=\"activity-toggle-btn\" onClick={(event) => {\n                                this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                                this.props.setPopover(true)\n                                this.toggleEditPopover()\n                            }}>\n                                Edit\n                            </button>\n                        </div>\n\n                        {!isWeb && !bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.setCover}>Make cover</span>\n                            </span>\n                        }\n                        {!isWeb && bgUrl &&\n                            <span>\n                                <VideoLabel className=\"make-cover-icon\" />\n                                <span onClick={this.removeCover}>Remove cover</span>\n                            </span>\n                        }\n\n                    </div>\n                </div>\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeAttach}\n                        type={'attachment'}\n                        typeTitle={attachment.name}\n                        togglePopover={this.togglePopover}\n                    />\n                }\n                {popover.isOpen && isEditPopover &&\n                    <EditAttachmentPopover\n                        togglePopover={this.toggleEditPopover}\n                        updateAttachment={this.updateAttachment}\n                        attachment={attachment}\n                    />\n                }\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskAttachmentPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskAttachmentPreview);","import React, { Component } from \"react\";\nimport { TaskAttachmentPreview } from './TaskAttachmentPreview'\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport { connect } from \"react-redux\";\n\n\nexport function _TaskAttachment({ currTaskDetails }) {\n    if (!currTaskDetails.attachments || !currTaskDetails.attachments.length ) return <React.Fragment></React.Fragment>\n    return (\n        <div className=\"task-attach\">\n            <div className=\"window-modal-title flex align-center\">\n                <AttachFileIcon />\n                <h3>Attachment</h3>\n            </div>\n            <div className=\"attachments\">\n                {currTaskDetails.attachments.map(attachment => {\n                    return <TaskAttachmentPreview\n                        key={attachment.id}\n                        attachment={attachment}\n                    />\n                })}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n\n};\n\nexport const TaskAttachment = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskAttachment);\n","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { connect } from \"react-redux\";\nimport { addActivity } from '../store/board.actions'\n\nexport class _TodoPreview extends Component {\n\n    state = {\n        todo: null,\n        todoTitle: '',\n        isEditMode: false\n    }\n    selectedInput = null;\n\n    componentDidMount() {\n        const { todo } = this.props\n        this.setState(prevState => ({ ...prevState, todo, todoTitle: todo.title }))\n    }\n\n    handleChange = ({ target: { value } }) => {\n        this.setState(prevState => ({ ...prevState, todo: { ...this.state.todo, title: value } }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onToggleEditMode = () => {\n        this.setState(prevState => ({ ...prevState, isEditMode: !this.state.isEditMode }))\n    }\n\n    onSaveTodo = () => {\n        const { todo } = this.state\n        this.props.onSaveTodo(todo)\n        this.onToggleEditMode()\n    }\n\n    onToggleTodoIsDone = () => {\n        const { todo } = this.state\n        const { addActivity, board, currTaskDetails } = this.props\n        todo.isDone = !todo.isDone\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.onSaveTodo(todo)\n        if (todo.isDone) addActivity(board, currTaskDetails, 'complete-todo', todo.title)\n        else addActivity(board, currTaskDetails, 'incomplete-todo', todo.title)\n    }\n\n    onRemoveTodo = () => {\n        const { todo } = this.state\n        this.props.onRemoveTodo(todo)\n    }\n\n    onUndoChange = () => {\n        const { todo } = this.props\n        const { todoTitle } = this.state\n        todo.title = todoTitle\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.onToggleEditMode()\n    }\n\n    render() {\n        const { todo, isEditMode } = this.state\n        if (!todo) return <div>Loading...</div>\n        const { title } = todo\n\n        return (\n\n            <div className=\"todo-preview-container flex column\">\n                <div className=\"todo-preview flex align-center\">\n                    {todo.isDone && <CheckBoxIcon onClick={this.onToggleTodoIsDone} className=\"todo-check\" />}\n                    {!todo.isDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTodoIsDone} />}\n                    {isEditMode &&\n                        <textarea onClick={this.onEditMode}\n                            className=\"default-textarea\"\n                            ref={(input) => { this.selectedInput = input; }}\n                            // onBlur={this.onUndoChange}\n                            value={title}\n                            onChange={this.handleChange}>\n                        </textarea>\n                    }\n                    {!isEditMode && <div className=\"checklist-txt-and-btn\">\n                        <span className={`${todo.isDone ? 'done' : ''}`} onClick={this.onEditMode}>{title}</span>\n                        <DeleteIcon className=\"todo-remove-icon\" onClick={this.onRemoveTodo}  />\n                    </div>}\n                </div>\n                <div className={`checklist-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                    <button onClick={this.onSaveTodo} className=\"nch-btn primary-btn\">Save</button>\n                    <Close onClick={this.onUndoChange} className=\"close-btn\" />\n                </div >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    addActivity\n};\n\nexport const TodoPreview = connect(mapStateToProps, mapDispatchToProps)(_TodoPreview);","import { TodoPreview } from './TodoPreview'\nexport function TodoList({ todos, onSaveTodo, onRemoveTodo }) {\n    return (\n        <div className=\"todo-list\">\n            {todos.map(todo => {\n                return <TodoPreview\n                    key={todo.id}\n                    todo={todo}\n                    onSaveTodo={onSaveTodo}\n                    onRemoveTodo={onRemoveTodo}\n                />\n            })}\n        </div>\n    )\n}","import React, { Component } from \"react\";\nimport { Close } from '@mui/icons-material';\nimport { utilService } from '../services/util.service'\n\nexport class TodoAdd extends Component {\n    state = {\n        isEditMode: false,\n        todo: {\n            title: ''\n        }\n    }\n    selectedInput = null\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, todo: { title: value } }))\n    }\n    onToggleEditMode = () => {\n        const { isEditMode } = this.state\n        this.setState(prevState => ({ ...prevState, isEditMode: !isEditMode }))\n    }\n\n    onTodoAdd = () => {\n        const { todo } = this.state\n        if (!todo.title) return\n        todo.id = utilService.makeId()\n        todo.isDone = false\n        this.setState(prevState => ({ ...prevState, todo }))\n        this.props.addTodo(todo)\n        this.clearState()\n    }\n\n    clearState = () => {\n        this.selectedInput.focus()\n        this.setState(prevState => ({ ...prevState, todo: { title: '' } }))\n    }\n\n    render() {\n        const { isEditMode, todo } = this.state\n        return (\n            <div className=\"todo-add-container\">\n                <button\n                    className={`task-btns nch-btn todo-add-btn ${isEditMode ? 'hidden' : 'show'}`}\n                    onClick={() => this.onToggleEditMode()}>\n                    Add an item\n                </button>\n                {isEditMode &&\n                    <div className=\"todo-edit flex column\">\n                        <textarea onClick={this.onEditMode}\n                            ref={(input) => { this.selectedInput = input; }}\n                            // onBlur={this.onToggleEditMode}\n                            autoFocus\n                            value={todo.title}\n                            placeholder=\"Add an item\"\n                            onChange={this.handleChange}>\n                        </textarea>\n\n                        <div className={`todo-btns flex align-center ${isEditMode ? 'show' : 'hidden'}`}>\n                            <button className='task-btns todo-save-btn' onClick={() => this.onTodoAdd()}>Add</button>\n                            <button className='task-btns todo-close-btn' onClick={() => this.onToggleEditMode()}><Close /></button>\n                        </div>\n                    </div>\n\n                }\n\n            </div>\n        )\n    }\n}","import { Component } from \"react\";\n\n\nexport class ProgressBar extends Component {\n\n    state = {\n        completed: 0,\n        style: {\n            width: '',\n            backgroundColor: ''\n        }\n    }\n\n    componentDidMount = () => {\n        const completed = this.props.doneTodosCalc()\n        const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n        this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.state.completed !== this.props.doneTodosCalc()) {\n            const completed = this.props.doneTodosCalc()\n            const backgroundColor = (completed === 100) ? '#61bd4f' : '#5ba4cf'\n            this.setState(prevState => ({ ...prevState, completed, style: { width: `${completed}%`, backgroundColor } }))\n        }\n    }\n\n    render() {\n        const { style, completed } = this.state\n\n        return (\n            <div className=\"checklist-progress\" >\n                <span className=\"checklist-progress-percentage js-checklist-progress-percent\">{parseInt(completed)}%</span>\n                <div className=\"checklist-progress-bar\">\n                    <div className=\"checklist-progress-bar-current js-checklist-progress-bar\" style={style}>\n\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TodoList } from './TodoList'\nimport { CheckDeletePopover } from './CheckDeletePopover'\nimport { TodoAdd } from './TodoAdd'\nimport CheckBoxOutlinedIcon from '@mui/icons-material/CheckBoxOutlined';\nimport { ProgressBar } from './ProgressBar'\nimport { saveBoard, saveTaskDetails, addActivity } from '../store/board.actions'\nimport { togglePopover } from '../store/app.actions'\nimport { setPosition, setPopover, setCurrTaskDetails } from '../store/app.actions';\n\n\nexport class _TaskChecklistPreview extends Component {\n\n    state = {\n        isPopover: false\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    togglePopover = () => {\n        this.setState(prevState => ({ ...prevState, isPopover: !prevState.isPopover }))\n    }\n\n    onSaveTodo = async (todo) => {\n        const { board, currTaskDetails, checklist, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos[todoIdx] = todo\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    onRemoveTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        const todoIdx = currTaskDetails.checklists[checklistIdx].todos.findIndex((currTodo) => {\n            return currTodo.id === todo.id\n        })\n        currTaskDetails.checklists[checklistIdx].todos.splice(todoIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    addTodo = async (todo) => {\n        const { board, currTaskDetails, saveTaskDetails, checklist, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists[checklistIdx].todos.push(todo)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    doneTodosCalc = () => {\n        const { checklist } = this.props\n        const { todos } = checklist\n        if (!todos.length) return 0\n\n        let isDoneTodos = 0\n        todos.forEach(todo => {\n            if (todo.isDone) isDoneTodos++\n        })\n        return (isDoneTodos / checklist.todos.length) * 100\n    }\n\n    removeChecklist = async () => {\n        const { board, saveTaskDetails, currTaskDetails, checklist, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const checklistIdx = currTaskDetails.checklists.indexOf(checklist)\n        currTaskDetails.checklists.splice(checklistIdx, 1)\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.togglePopover()\n        addActivity(board, currTaskDetails, 'remove-checklist')\n    }\n\n    render() {\n        const { checklist, popover } = this.props\n        const { isPopover } = this.state\n        if (!checklist) return <div></div>\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <CheckBoxOutlinedIcon />\n                        <h3>{checklist.title}</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={(event) => {\n                        this.props.setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: '' });\n                        this.props.setPopover(true)\n                        this.togglePopover()\n                    }}>\n                        Delete\n                    </button>\n                </div>\n                <ProgressBar doneTodosCalc={this.doneTodosCalc} />\n                <TodoList\n                    todos={checklist.todos}\n                    onSaveTodo={this.onSaveTodo}\n                    onRemoveTodo={this.onRemoveTodo}\n                />\n                {popover.isOpen && isPopover &&\n                    <CheckDeletePopover\n                        remove={this.removeChecklist}\n                        type={'checklist'}\n                        typeTitle={checklist.title}\n                        togglePopover={this.togglePopover}\n                    />\n                }\n                <TodoAdd addTodo={this.addTodo} />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n        popover: state.appModule.popover,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    setPosition,\n    setPopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskChecklistPreview = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskChecklistPreview);","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { TaskChecklistPreview } from './TaskChecklistPreview'\n\n\nexport class _TaskChecklist extends Component {\n\n    state = {\n    }\n\n    render() {\n        const { currTaskDetails } = this.props\n        if (!currTaskDetails.checklists) return <React.Fragment></React.Fragment>\n        return (\n            <div className=\"task-checklists\" >\n                {currTaskDetails.checklists.map(checklist => {\n                    return <TaskChecklistPreview\n                        key={checklist.id}\n                        checklist={checklist}\n                    />\n                })}\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\n\nexport const TaskChecklist = connect(mapStateToProps)(_TaskChecklist);","import React, { Component } from 'react';\n\nexport class AddComment extends Component {\n    state = {\n        txt: '',\n        isEditMode: false\n    }\n\n    handleChange = (ev) => {\n        const { value } = ev.target\n        this.setState(prevState => ({ ...prevState, txt: value }))\n    }\n\n    onEditMode = () => {\n        if (this.selectedInput) this.selectedInput.focus()\n        this.setState({ isEditMode: true })\n    }\n\n    onAddComment = () => {\n        const { txt } = this.state\n        const { loggedinUser } = this.props\n        this.props.addComment(txt, loggedinUser)\n        this.setState(prevState => ({ ...prevState, txt: '', isEditMode: false }))\n    }\n\n    render() {\n        const { loggedinUser } = this.props\n        const { isEditMode, txt } = this.state\n\n        return (\n            <div className=\"add-comment flex\">\n                <article className=\"member-wrapper\">\n                    {loggedinUser?.imgUrl ? (\n                        <img\n                            src={loggedinUser.imgUrl}\n                            className=\"member-img\"\n                            alt={loggedinUser.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{loggedinUser?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                <div className=\"comment-frame\">\n                    <textarea onClick={this.onEditMode}\n                        className=\"default-textarea\"\n                        ref={(input) => { this.selectedInput = input; }}\n                        value={txt}\n                        onChange={this.handleChange}\n                        placeholder=\"Write a comment\">\n                    </textarea>\n\n                    {isEditMode && <button\n                        className=\"primary-btn\"\n                        onClick={this.onAddComment}>\n                        Save\n                    </button>}\n\n                </div>\n            </div>\n        )\n    }\n\n}\n","import React, { Component } from 'react'\nimport { utilService } from '../services/util.service';\n\nexport class ActivityPreview extends Component {\n    state = {}\n\n    get activityToShow() {\n        let { activity, currTask } = this.props\n        if (!currTask) currTask = activity.task\n        if (activity.txt && activity.txt.length > 20) activity.txt = activity.txt.substr(1, 12) + '...'\n        switch (activity.type) {\n            case 'due-date-complete':\n                return 'marked the due date complete'\n            case 'due-date-incomplete':\n                return 'marked the due date incomplete'\n            case 'set-date':\n                return `set the due date to of ${currTask.title} to ${activity.txt}`\n            case 'remove-date':\n                return `removed the due date from ${currTask.title}`\n            case 'add-checklist':\n                return `added Checklist to ${currTask.title}`\n            case 'remove-checklist':\n                return `removed Checklist from ${currTask.title}`\n            case 'add-member':\n                return `added ${activity.txt} to ${currTask.title}`\n            case 'remove-member':\n                return `removed ${activity.txt} from ${currTask.title}`\n            case 'add-self':\n                return `joined task ${currTask.title}`\n            case 'remove-self':\n                return `left task ${currTask.title}`\n            case 'add-to-archive':\n                return `archived ${currTask.title}`\n            case 'remove-from-archive':\n                return `returned ${currTask.title} to board `\n            case 'remove-task':\n                return `deleted ${currTask.title} from board`\n            case 'complete-todo':\n                return `completed ${activity.txt} on ${currTask.title}`\n            case 'incomplete-todo':\n                return `marked ${activity.txt} incomplete on ${currTask.title}`\n            case 'remove-attachment':\n                return `deleted the ${activity.txt} attachment from ${currTask.title}`\n            case 'change-title':\n                return `changed task title to ${activity.txt} `\n            default:\n                return ''\n                break;\n        }\n    }\n\n\n    render() {\n        const { activity, isShowActivities, selectNotification } = this.props\n        const { byMember } = activity\n        if (!isShowActivities && activity.type !== 'comment') return <></>\n        return (\n            <div className={`activity-preview-container flex ${activity.isNotRead ? 'unread' : ''} ${activity.isNotify ? 'notify' : ''}`} \n                onClick={activity.isNotify ? ()=>{selectNotification(activity)} : undefined }>\n                <article className=\"member-wrapper\">\n                    {byMember?.imgUrl ? (\n                        <img\n                            src={byMember.imgUrl}\n                            className=\"member-img\"\n                            alt={byMember.fullname[0].toUpperCase()}\n                        />\n                    ) :\n                        (\n                            <div className=\"member-img\" style={{ background: 'rgb(223, 225, 230)', color: 'inherit' }}>\n                                <p className={`member-letter preview`}>{byMember?.fullname?.[0] || ''}</p>\n                            </div>\n                        )}\n                </article>\n\n                {activity.type === 'comment' &&\n                    <div className=\"comment-preview\">\n                        <div className=\"comment-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"comment-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                        <div className=\"comment-content\">\n                            <p className=\"comment-txt\">{activity.txt}</p>\n                        </div>\n                    </div>\n                }\n                {activity.type !== 'comment' &&\n                    <div className=\"activity-preview\">\n                        <div className=\"activity-by-user\">\n                            <span className=\"member-name\">{byMember.fullname}</span>\n                            <span className=\"activity-content\">{this.activityToShow}</span>\n                        </div>\n                        <div className=\"activity-created-at-container\">\n                            <span className=\"activity-created-at\">{utilService.timeSince(activity.createdAt)}</span>\n                        </div>\n                    </div>\n                }\n            </div>\n        )\n    }\n}","import { ActivityPreview } from './ActivityPreview'\n\nexport function ActivitiesList({ CommAndAct, isShowActivities, currTask, selectNotification }) {\n\n    return (\n        <div className=\"activities-list\">\n            {CommAndAct.map(activity => {\n                return <ActivityPreview key={activity.id} activity={activity} isShowActivities={isShowActivities} currTask={currTask} selectNotification={selectNotification}/>\n            })}\n\n        </div>\n    )\n}","import React, { Component } from 'react';\n\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport { AddComment } from './AddComment'\nimport { ActivitiesList } from './ActivitiesList'\n\nimport { utilService } from '../services/util.service'\n\nexport class TaskActivities extends Component {\n\n\n    state = {\n        isShowActivities: false\n    }\n\n    onToggleComments = () => {\n        this.setState({ isShowActivities: !this.state.isShowActivities })\n    }\n\n    getTaskCommentsAndActivitiesSorted = () => {\n        const { currTask, activities } = this.props\n        let CommAndAct = []\n\n        if (currTask.comments && currTask.comments.length) {\n            CommAndAct.push(...currTask.comments)\n        }\n\n        if (activities && activities.length) {\n            activities.forEach((activity) => {\n                if (activity.task.id === currTask.id) CommAndAct.push(activity)\n            })\n        }\n        if (!CommAndAct.length) return null\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        return CommAndAct\n    }\n\n    addComment = (txt, byMember) => {\n        const { currTask } = this.props\n        if (!currTask.comments) currTask.comments = []\n        const comment = {\n            id: utilService.makeId(),\n            txt,\n            createdAt: Date.now(),\n            type: 'comment',\n            byMember\n        }\n        currTask.comments.push(comment)\n        this.props.updateTaskDetails(currTask)\n    }\n\n\n    render() {\n        const { isShowActivities } = this.state\n        const { currTask, loggedinUser } = this.props\n        const CommAndAct = this.getTaskCommentsAndActivitiesSorted()\n\n        return (\n            <div className=\"task-activities flex column\">\n                <div className=\"window-modal-title flex space-between\">\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3>Activity</h3>\n                    </div>\n                    <button className=\"activity-toggle-btn\" onClick={this.onToggleComments}>\n                        {isShowActivities ? 'Hide details' : 'Show details'}\n                    </button>\n                </div>\n                <AddComment currTask={currTask} loggedinUser={loggedinUser} addComment={this.addComment} />\n                {CommAndAct && CommAndAct.length && <ActivitiesList CommAndAct={CommAndAct} isShowActivities={isShowActivities} currTask={currTask}/>}\n            </div>\n        )\n    }\n\n}","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport PersonOutlineIcon from '@mui/icons-material/PersonOutline';\nimport LabelIcon from '@material-ui/icons/LocalOfferOutlined';\nimport CheckboxIcon from '@material-ui/icons/CheckBoxOutlined'\nimport CoverIcon from '@material-ui/icons/VideoLabel';\nimport ArrowForwardIcon from '@mui/icons-material/ArrowForward';\nimport CopyIcon from '@material-ui/icons/FileCopyOutlined';\nimport AttachFileIcon from '@mui/icons-material/AttachFile';\nimport PersonAddAltIcon from '@mui/icons-material/PersonAddAlt';\nimport ScheduleIcon from '@mui/icons-material/Schedule';\nimport ArchiveIcon from '@mui/icons-material/Archive';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport { setPosition, togglePopover, setPopoverMenu } from '../store/app.actions';\nexport class _TaskActionsMenu extends Component {\n    render() {\n        const { joinTask, toggleIsArchive, deleteTask, isArchive, currTaskDetails, loggedinUser, setPosition, togglePopover } = this.props\n        const loggedinUserIsJoin = (currTaskDetails && loggedinUser) ?\n            currTaskDetails.members?.find((member) => member._id === loggedinUser._id) ? true : false || false :\n            null\n        return (\n            <aside className=\"task-details-sidebar flex column full\">\n                <div className=\"actions-wrapper flex\">\n                    {!loggedinUserIsJoin && <div className=\"suggested flex column\">\n                        <h4>SUGGESTED</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={joinTask}>\n                            <div className=\"action-btn-content flex\" >\n                                <PersonOutlineIcon />\n                                <span>Join</span>\n                            </div>\n                        </button>\n                    </div>}\n                    <div className=\"add-to-card flex column\">\n                        <h4>ADD TO CARD</h4>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MEMBERS' }); togglePopover(); }}>\n                            <div className=\" action-btn-content flex\" >\n                                <PersonAddAltIcon />\n                                <span>Members</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <LabelIcon />\n                                <span>Labels</span>\n                            </div>\n                        </button>\n\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'CHECKLIST' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CheckboxIcon />\n                                <span>Checklist</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <ScheduleIcon />\n                                <span>Date</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'ATTACHMENT' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <AttachFileIcon />\n                                <span>Attachment</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COVER' }); togglePopover() }}>\n                            <div className=\" action-btn-content flex \" >\n                                <CoverIcon />\n                                <span>Cover</span>\n                            </div>\n                        </button>\n                    </div>\n                    <div className=\"actions flex column\">\n                        <h4>ACTIONS</h4>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'MOVE' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <ArrowForwardIcon />\n                                <span>Move</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'COPY' }); togglePopover() }}>\n                            <div className=\"action-btn-content flex \" >\n                                <CopyIcon />\n                                <span>Copy</span>\n                            </div>\n                        </button>\n                        <button className=\"secondary-btn action-btn\" onClick={toggleIsArchive}>\n                            <div className=\"action-btn-content flex \" >\n                                {isArchive ? <ArrowBackIcon /> : <ArchiveIcon />}\n                                <span>{isArchive ? 'Return to board' : 'Archive'}</span>\n                            </div>\n                        </button>\n                        {isArchive &&\n                            <button className=\"secondary-btn action-btn danger-btn\" style={{ color: '#fff' }} onClick={deleteTask}>\n                                <div className=\"action-btn-content flex \" >\n                                    <RemoveIcon style={{ color: '#fff' }} />\n                                    <span>Delete</span>\n                                </div>\n                            </button>\n                        }\n                    </div>\n                </div>\n\n            </aside>\n        )\n    }\n}\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        loggedinUser: state.userModule.loggedinUser,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover,\n    setPopoverMenu\n};\n\nexport const TaskActionsMenu = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskActionsMenu);\n","import { connect } from 'react-redux';\nimport React from 'react'\nimport AddIcon from '@mui/icons-material/Add';\nimport { setPosition, togglePopover } from '../store/app.actions';\n\n\nexport function _TaskHeaderLabels({ currTaskDetails, board, setPosition, togglePopover }) {\n    const labels = board.labels.filter((label) => currTaskDetails.labelIds.includes(label.id))\n    if (labels.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-labels item-container flex column\">\n            <h3 className=\"task-details-header-title\">Labels</h3>\n            <div className=\"labels-container flex wrap\">\n                {labels.map(label => {\n                    return <span\n                        onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}\n                        key={label.id} className=\"label\" style={{ backgroundColor: label.color }}>\n                        {label.title}\n                    </span>\n                })}\n                <button className=\"secondary-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover(); }}><AddIcon /></button>\n            </div>\n        </div>\n    )\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    togglePopover\n};\n\nexport const TaskHeaderLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderLabels);\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { MemberList } from './MemberList'\n\n\nexport function _TaskHeaderMembers({ currTaskDetails }) {\n    if (!currTaskDetails.members||currTaskDetails.members.length === 0) return <></>\n    return (\n        <div className=\"task-details-header-members flex column\">\n            <h4 className=\"task-details-header-title\"> Members</h4>\n            <div className=\"container flex wrap\">\n                <MemberList members={currTaskDetails.members} isInDetails={true} />\n            </div>\n        </div>\n    )\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderMembers = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderMembers);\n\n\n","import { connect } from 'react-redux'\nimport React, { Component } from 'react'\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@mui/icons-material/CheckBox';\nimport { saveTaskDetails, addActivity } from '../store/board.actions'\nimport { setPosition, togglePopover, setCurrTaskDetails } from '../store/app.actions';\n\nexport class _TaskHeaderDate extends Component {\n    state = {\n        formatedDate: '',\n        dueDate: null,\n        isTaskDone: false\n    }\n    componentDidMount = () => {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n\n        const dueDate = currTaskDetails.dueDate\n        const isTaskDone = currTaskDetails.isDone\n        const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n        this.setState(prevState => ({ ...prevState, formatedDate, dueDate, isTaskDone, currGroup }))\n    }\n\n    componentDidUpdate(prevProps) {\n        const { dueDate } = this.state\n        const { currTaskDetails } = this.props\n        if (dueDate !== currTaskDetails.dueDate) {\n            const dueDate = currTaskDetails.dueDate\n            const formatedDate = this.dueDateFormat(currTaskDetails.dueDate)\n            this.setState(prevState => ({ ...prevState, dueDate, formatedDate }))\n        }\n    }\n\n    onToggleTaskDone = async () => {\n        const isTaskDone = !this.state.isTaskDone\n        this.setState(prevState => ({ ...prevState, isTaskDone }))\n        const { board, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.isDone = !currTaskDetails.isDone;\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        if (isTaskDone) addActivity(board, currTaskDetails, 'due-date-complete')\n        else addActivity(board, currTaskDetails, 'due-date-incomplete')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    getDueStatus = () => {\n        const now = Date.now()\n        const { currTaskDetails } = this.props\n        let dueStatus = '';\n        if (currTaskDetails.isDone) dueStatus = 'done';\n        else if (now > currTaskDetails.dueDate) dueStatus = 'overdue';\n        else {\n            const timeDiff = currTaskDetails.dueDate - now;\n            if (timeDiff < 86400000) dueStatus = 'due-soon'\n        }\n        return dueStatus\n    }\n\n    get dueMsg() {\n        switch (this.getDueStatus()) {\n            case 'done': return 'COMPLETE';\n            case 'due-soon': return 'DUE SOON';\n            case 'overdue': return 'OVERDUE';\n            default: return ''\n        }\n    }\n\n    render() {\n        const { currTaskDetails, setPosition, togglePopover } = this.props\n        const { formatedDate, isTaskDone } = this.state\n        const dueStatus = this.getDueStatus();\n        if (!currTaskDetails.dueDate || currTaskDetails.dueDate.length === 0) return <></>\n\n        return (\n            <div className=\"task-details-header-date item-container flex column\">\n                <h3 className=\"task-details-header-title\">DUE DATE</h3>\n                <div className=\"date-container flex wrap align-center\">\n                    {isTaskDone && <CheckBoxIcon onClick={this.onToggleTaskDone} className=\"todo-check pointer\" />}\n                    {!isTaskDone && <CheckBoxOutlineBlankIcon onClick={this.onToggleTaskDone} className=\"pointer\" />}\n                    <button className=\"secondary-btn date-btn flex align-center\">\n                        <span\n                            className=\"date-context\"\n                            onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'DATE' }); togglePopover(); }}>\n                            {formatedDate}\n                        </span>\n                        <span className=\"drop-down-icon\"><ArrowDropDownIcon /></span>\n                        <span className={`due-msg ${dueStatus}`}>{this.dueMsg}</span>\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    setPosition,\n    saveTaskDetails,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const TaskHeaderDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_TaskHeaderDate);\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { TaskHeaderLabels } from './TaskHeaderLabels'\nimport { TaskHeaderMembers } from './TaskHeaderMembers'\nimport { TaskHeaderDate } from './TaskHeaderDate'\n\nexport class _TaskHeaderDetails extends Component {\n    state = {\n        selectedMembers: null,\n        selectedLabels: null,\n        selectedDate: null,\n    }\n\n    componentDidMount() {\n        const { selectedDate, } = this.props\n        this.setState(prevState => ({\n            ...prevState,\n            selectedDate\n        }))\n    }\n\n    render() {\n        return (\n            <div className=\"task-details-header flex\">\n                <TaskHeaderMembers />\n                <TaskHeaderLabels />\n                <TaskHeaderDate />\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\n\nexport const TaskHeaderDetails = connect(\n    mapStateToProps,\n    null\n)(_TaskHeaderDetails);\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Close } from \"@mui/icons-material\";\r\nimport { TaskHeader } from \"../cmps/TaskHeader\";\r\nimport { TaskCardCover } from \"../cmps/TaskCardCover\";\r\nimport { TaskDescription } from \"../cmps/TaskDescription\";\r\nimport { TaskAttachment } from \"../cmps/TaskAttachment\";\r\nimport { TaskChecklist } from \"../cmps/TaskChecklist\";\r\nimport { TaskActivities } from \"../cmps/TaskActivities\";\r\nimport { TaskActionsMenu } from \"../cmps/TaskActionsMenu\";\r\nimport { TaskHeaderDetails } from \"../cmps/TaskHeaderDetails\";\r\nimport { LoaderSpinner } from \"../cmps/LoaderSpinner\";\r\nimport { saveBoard, saveTaskDetails, addActivity, loadBoard } from \"../store/board.actions\";\r\nimport { setCurrTaskDetails, setPopover, setPosition, setPopoverMenu } from '../store/app.actions'\r\nimport { MediaRecord } from '../cmps/MediaRecord'\r\n\r\nexport class _TaskDetails extends Component {\r\n  state = {\r\n    currTask: null,\r\n    currGroup: null\r\n  };\r\n  contentEl = null;\r\n\r\n  componentDidMount = async () => {\r\n    const { boardId, taskId, listId } = this.props.match.params;\r\n    const { board, setCurrTaskDetails, setPopoverMenu } = this.props;\r\n    if (!board) await this.props.loadBoard(boardId)\r\n    const currGroup = this.props.board?.groups.find((list) => list.id === listId);\r\n    const currTask = currGroup?.tasks.find((task) => task.id === taskId);\r\n    setCurrTaskDetails(currTask)\r\n    setPopoverMenu(false)\r\n    this.setState((prevState) => ({\r\n      ...prevState,\r\n      currGroup,\r\n      currTask,\r\n    }));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.setCurrTaskDetails(null)\r\n    this.props.setPosition({ pageX: null, pageY: null, type: null })\r\n    this.props.setPopover(false)\r\n  }\r\n\r\n  updateTaskDetails = async (currTask) => {\r\n    const { currGroup } = this.state;\r\n    const { board, saveTaskDetails } = this.props;\r\n    await saveTaskDetails(board, currGroup, currTask);\r\n  };\r\n\r\n  toggleOverlay = () => {\r\n    this.props.history.goBack();\r\n  };\r\n\r\n  setTaksDetailsTitle = (title) => {\r\n    const { currTaskDetails, setCurrTaskDetails } = this.props;\r\n    currTaskDetails.title = title;\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  joinTask = async () => {\r\n    const { board, currTaskDetails, loggedinUser, addActivity, setCurrTaskDetails } = this.props;\r\n    let { members } = currTaskDetails;\r\n    members = members || [];\r\n    const boardMemberIds = board.members.map(member => member._id)\r\n    if (!loggedinUser) return\r\n    if (!boardMemberIds.includes(loggedinUser._id)) {\r\n      board.members.push(loggedinUser)\r\n    }\r\n    const selectedMembersIds = members.map((member) => member._id);\r\n    if (!selectedMembersIds.includes(loggedinUser._id)) {\r\n      members.push(loggedinUser);\r\n    }\r\n    currTaskDetails.members = members;\r\n    addActivity(board, currTaskDetails, 'add-self')\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  };\r\n\r\n  deleteTask = async () => {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, saveBoard, addActivity } = this.props;\r\n    const currGroupIdx = board.groups.indexOf(currGroup)\r\n    currGroup.tasks = currGroup.tasks.filter((task) => task.id !== currTaskDetails.id);\r\n    board.groups[currGroupIdx] = currGroup\r\n    addActivity(board, currTaskDetails, 'remove-task')\r\n    await saveBoard(board);\r\n    this.props.history.goBack();\r\n  }\r\n\r\n  toggleIsArchive = () => {\r\n    const { board, currTaskDetails, addActivity, setCurrTaskDetails } = this.props;\r\n    currTaskDetails.isArchive = currTaskDetails?.isArchive || false\r\n    currTaskDetails.isArchive = !currTaskDetails.isArchive;\r\n    addActivity((currTaskDetails.isArchive) ? (board, currTaskDetails, 'add-to-archive') : (board, currTaskDetails, 'remove-from-archive'))\r\n    setCurrTaskDetails(currTaskDetails)\r\n    this.updateTaskDetails(currTaskDetails);\r\n  }\r\n\r\n  render() {\r\n    const { currGroup } = this.state;\r\n    const { board, currTaskDetails, loggedinUser } = this.props;\r\n    if (!currTaskDetails || !board || !currGroup) return <></>;\r\n\r\n    const { style } = currTaskDetails;\r\n    currTaskDetails.style = (style) ? style : { bgColor: null, bgUrl: null }\r\n    const { bgColor, bgUrl } = currTaskDetails.style\r\n    const { isArchive } = currTaskDetails\r\n\r\n    const taskOverlay = {\r\n      position: \"fixed\",\r\n      inset: 0,\r\n      height: \"100vh\",\r\n      overflowY: \"auto\",\r\n      zIndex: 90,\r\n    };\r\n\r\n    return (\r\n      <div style={taskOverlay}>\r\n        <div\r\n          className=\"overlay show\"\r\n          onClick={() => this.props.history.push(`/board/${board._id}`)}>\r\n        </div>\r\n\r\n        <section className=\"task-details flex column\">\r\n          <button\r\n            onClick={() => this.props.history.push(`/board/${board._id}`)}\r\n            className={`close-task-details ${bgColor ? \"cover\" : \"\"}`}>\r\n            <Close />\r\n          </button>\r\n          {(bgColor || bgUrl) && (<TaskCardCover />)}\r\n\r\n          {isArchive &&\r\n            <div className=\"task-details-archived flex\">\r\n              <i class=\"fas fa-archive icon-sm\"></i>\r\n              <h3>This card is archived.</h3>\r\n            </div>\r\n          }\r\n\r\n          <TaskHeader\r\n            taskTitle={currTaskDetails.title}\r\n            setTaksDetailsTitle={this.setTaksDetailsTitle}\r\n            taskList={board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))?.title || ''}\r\n          />\r\n          <div className=\"task-details-body flex\">\r\n            <div className=\"task-details-main flex column\">\r\n\r\n              <TaskHeaderDetails\r\n                toggleTaskDone={this.toggleTaskDone}\r\n              />\r\n\r\n              <TaskDescription\r\n                currTask={currTaskDetails}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n              <TaskAttachment />\r\n              <TaskChecklist />\r\n              <TaskActivities\r\n                currTask={currTaskDetails}\r\n                loggedinUser={loggedinUser}\r\n                activities={board.activities}\r\n                updateTaskDetails={this.updateTaskDetails}\r\n              />\r\n            </div>\r\n            <TaskActionsMenu\r\n              joinTask={this.joinTask}\r\n              deleteTask={this.deleteTask}\r\n              toggleIsArchive={this.toggleIsArchive}\r\n              isArchive={isArchive}\r\n            />\r\n          </div>\r\n\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    board: state.boardModule.board,\r\n    loggedinUser: state.userModule.loggedinUser,\r\n    currTaskDetails: state.appModule.currTaskDetails\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  saveBoard,\r\n  saveTaskDetails,\r\n  setCurrTaskDetails,\r\n  setPopover,\r\n  setPosition,\r\n  setPopoverMenu,\r\n  addActivity,\r\n  loadBoard\r\n};\r\n\r\nexport const TaskDetails = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(_TaskDetails);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { onLogin, onSignup } from \"../store/user.actions\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport { GoogleLogin } from \"react-google-login\";\r\n\r\nfunction _LoginSignup(props) {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [fullname, setFullname] = useState(\"\");\r\n  const [isLogin, setIsLogin] = useState(true);\r\n\r\n  const CLIENT_ID =\r\n    \"1066940480428-m4n85h2lafgf2m7v5j7prda0tmigel93.apps.googleusercontent.com\";\r\n\r\n  const onSuccess = async (res) => {\r\n    console.log(\"success\");\r\n    const fullname = res.profileObj.name;\r\n    const username = `${res.profileObj.givenName} `;\r\n    const password = res.profileObj.googleId;\r\n    const imgUrl = res.profileObj.imageUrl;\r\n    isLogin\r\n      ? await props.onLogin({ username, password })\r\n      : await props.onSignup({ username, password, imgUrl, fullname });\r\n    props.history.push(\"/workspace/\");\r\n  };\r\n\r\n  const onFail = (response) => {\r\n    console.log(\"failed\");\r\n    console.dir(response);\r\n  };\r\n\r\n  const onSubmit = async (ev) => {\r\n    ev.preventDefault();\r\n    if (username.trim() && password.trim()) {\r\n      if (!isLogin) {\r\n         props.onSignup({ username, password, fullname, imgUrl: \"\" });\r\n        props.history.push(\"/workspace\");\r\n      } else {\r\n        props.onLogin({ username, password });\r\n        props.history.push(\"/workspace\");\r\n      }\r\n    }\r\n    // props.history.push(\"/workspace\");\r\n  };\r\n  return (\r\n    <div className=\"login-signup  flex column align-center\">\r\n      <div className=\"logo flex \">\r\n        <DashboardIcon className=\"logo-icon\" />\r\n        <h1>Trellex</h1>\r\n      </div>\r\n      <div className=\"login-container flex column\">\r\n        {isLogin ? <p>Log in to Trellex</p> : <p>Sign up</p>}\r\n        <form className=\"flex column\" onSubmit={onSubmit}>\r\n          <input\r\n            type=\"txt\"\r\n            value={username}\r\n            onChange={(ev) => setUsername(ev.target.value)}\r\n            placeholder=\"Enter Username\"\r\n          />\r\n          {!isLogin && (\r\n            <input\r\n              type=\"txt\"\r\n              value={fullname}\r\n              onChange={(ev) => setFullname(ev.target.value)}\r\n              placeholder=\"Enter Full Name\"\r\n            />\r\n          )}\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(ev) => setPassword(ev.target.value)}\r\n            placeholder=\"Enter Password\"\r\n          />\r\n          <button className=\"login-submit\">\r\n            {isLogin ? \"Log me in\" : \"Sign me up\"}\r\n          </button>\r\n          <GoogleLogin\r\n            clientId={CLIENT_ID}\r\n            buttonText={isLogin ? \"Login with Google \": \"Sign up with Google\"}\r\n            onSuccess={onSuccess}\r\n            onFailure={onFail}\r\n            cookiePolicy={\"single_host_origin\"}\r\n          />\r\n        </form>\r\n\r\n        <p onClick={() => setIsLogin(!isLogin)}>\r\n          {isLogin ? \"Or sign up...\" : \"Back to Login\"}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nconst mapDispatchToProps = {\r\n  onLogin,\r\n  onSignup,\r\n};\r\nexport const LoginSignup = connect(null, mapDispatchToProps)(_LoginSignup);\r\n","import React from 'react';\nimport { Doughnut } from 'react-chartjs-2';\nimport { Bar } from 'react-chartjs-2';\n\nexport function BarChart({ board }) {\n    const { members } = board\n    const taskPerMember = {}\n    members.forEach(member => {\n        taskPerMember[member.fullname] = 0\n    })\n\n    for (let i = 0; i < members.length; i++) {\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember.fullname === members[i].fullname) taskPerMember[currMember.fullname]++\n                })\n            })\n        })\n    }\n\n    const data = {\n        labels: Object.keys(taskPerMember),\n        datasets: [\n            {\n                label: 'Tasks per member',\n                data: Object.values(taskPerMember),\n                backgroundColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)',\n                    'rgba(75, 192, 192, 1)',\n                    'rgba(153, 102, 255, 1)',\n                    'rgba(255, 159, 64, 1)',\n                ],\n                borderWidth: 1,\n\n            },\n        ],\n    };\n\n    const options = {\n        scales: {\n            x: {\n              ticks: {\n                color: \"white\",\n                font: {\n                  family: \"Segoe UI\",\n                  size: 15,\n                },\n              },\n            },\n            y: {\n              ticks: {\n                color: \"white\",\n                font: {\n                  family: \"Segoe UI\",\n                  size: 15,\n                },\n              },\n            },\n          },\n        elements: {\n            bar: {\n                borderWidth: 2,\n            },\n        },\n        responsive: true,\n        plugins: {\n            title: {\n                display: true,\n                text: \"Tasks per member\",\n                color: 'rgba(255, 255, 255, 0.897)',\n                font: {\n                    size: '30',\n                    family: 'Segoe UI'\n                }\n            },\n            datalabels: {\n                anchor: \"end\",\n                align: \"end\",\n                offset: -2,\n                color: \"#000000\",\n                font: { size: 12 }\n            },\n            legend: {\n\n                display:false\n\n            }\n        },\n        maintainAspectRatio: false,\n    };\n\n    return (\n        <Bar data={data} options={options} width={250} height={450} />\n    )\n       \n}","import React from 'react';\r\nimport { Doughnut } from 'react-chartjs-2';\r\n\r\nexport function DoughnutChart({ board }) {\r\n\r\n    const calcTasksByLabel = () => {\r\n        const labelIds = board.labels.map(label => label.id);\r\n        const labelCounts = [];\r\n\r\n        for (let i = 0; i < labelIds.length; i++) {\r\n            labelCounts.push(0);\r\n        }\r\n\r\n        for (let i = 0; i < board.groups.length; i++) {\r\n            for (let j = 0; j < board.groups[i].tasks.length; j++) {\r\n                for (let k = 0; k < board.groups[i].tasks[j].labelIds.length; k++) {\r\n                    if (labelIds.includes(board.groups[i].tasks[j].labelIds[k])) {\r\n                        labelCounts[labelIds.indexOf(board.groups[i].tasks[j].labelIds[k])]++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return labelCounts;\r\n    }\r\n\r\n\r\n\r\n    const labelsData = {\r\n        labels: board.labels.map(label => label.title),\r\n        datasets: [\r\n            {\r\n                label: '# of labels',\r\n                data: calcTasksByLabel(),\r\n                backgroundColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderColor: [\r\n                    ...board.labels.map(label => label.color),\r\n                ],\r\n                borderWidth: 3,\r\n            },\r\n        ],\r\n    };\r\n    const options = {\r\n\r\n        responsive: true,\r\n        plugins: {\r\n            title: {\r\n                display: true,\r\n                text: \"Tasks by labels\",\r\n                color: 'rgba(255, 255, 255, 0.897)',\r\n                font: {\r\n                    size: '30',\r\n                    family: 'Segoe UI'\r\n                }\r\n            },\r\n            legend: {\r\n                labels: {\r\n                    color: 'rgba(255, 255, 255, 0.897)',\r\n                    boxWidth: 14,\r\n                    boxHeight:14,\r\n                    // This more specific font property overrides the global property\r\n                    font: {\r\n                        size: 14,\r\n                        family: 'Segoe UI'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        maintainAspectRatio: false,\r\n\r\n    };\r\n\r\n    return (\r\n        <Doughnut\r\n            data={labelsData}\r\n            width={350}\r\n            height={350}\r\n            options={options} />\r\n    )\r\n}","import React from \"react\";\r\nimport { Bar } from \"react-chartjs-2\";\r\n\r\nexport const ActivityChart = ({ membersActivity }) => {\r\n  const data = {\r\n    labels: [...Object.keys(membersActivity)],\r\n    datasets: [\r\n      {\r\n        label: \"Amount\",\r\n        data: [...Object.values(membersActivity)],\r\n        backgroundColor: [\"#c277e0\", \"#61bd4f\", \"#ff9e1a\", \"#334563\"],\r\n        borderColor: [\"#c277e0\", \"darkgreen\", \"#ff9e1a\", \"#334563\"],\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const options1 = {\r\n    indexAxis: \"x\",\r\n    elements: {\r\n      bar: {\r\n        borderWidth: 2,\r\n      },\r\n    },\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        display: false,\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: \"Member activity\",\r\n        color: \"rgba(255, 255, 255, 0.897)\",\r\n        font: {\r\n          size: \"30\",\r\n          family: \"Segoe UI\",\r\n        },\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n      y: {\r\n        ticks: {\r\n          color: \"rgba(255, 255, 255, 0.897)\",\r\n          font: {\r\n            family: \"Segoe UI\",\r\n            size: 15,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    grid: {\r\n      color: \"rgba(255, 255, 255, 0.897)\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"chart-activity\">\r\n      <Bar data={data} options={options1}   height={280}/>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Close } from \"@mui/icons-material\";\nimport { loadBoard } from \"../../store/board.actions\";\nimport { BarChart } from \"./BarChart\";\nimport { DoughnutChart } from \"./DoughnutChart\";\nimport { ActivityChart } from \"./ActivityChart\";\nimport { LoaderSpinner } from \"../LoaderSpinner\";\nimport PeopleIcon from \"@mui/icons-material/People\";\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\nimport ListAltIcon from '@mui/icons-material/ListAlt';\n\nexport function _Dashboard(props) {\n  const onBack = () => {\n    props.history.goBack();\n  };\n\n  useEffect(() => {\n    if (!props?.board) {\n      const { boardId } = props.match.params;\n      props.loadBoard(boardId);\n    }\n  }, [props]);\n  const { board } = props;\n\n  const getTaskDetails = () => {\n    if (!props.board) return;\n    let tasks = 0;\n    let archivedTasks = 0;\n    let overDueTasks = 0;\n    let doneTasks = 0;\n    let checklists = 0;\n    let doneChecklists = 0;\n    let todos = 0;\n    let doneTodos = 0;\n    let membersActivity = {};\n\n    if (board.groups.length) {\n      board?.activities.forEach((activity) => {\n        if(activity.byMember){\n          membersActivity[activity.byMember?.fullname] = membersActivity[\n            activity.byMember.fullname\n          ]\n            ? membersActivity[activity.byMember.fullname] + 1\n            : 1;\n        }\n      });\n      board.groups.forEach((group) => {\n        group?.tasks.forEach((task) => {\n          if (task.checklists) {\n            checklists += task.checklists.length;\n            task.checklists.forEach((checklist) => {\n              let inTodos = checklist.todos.length;\n              let inDoneTodos = 0;\n              todos += checklist.todos.length;\n              checklist.todos.forEach((todo) => {\n                if (todo.isDone) {\n                  doneTodos++;\n                  inDoneTodos++;\n                }\n              });\n              if (inTodos === inDoneTodos) doneChecklists++;\n            });\n          }\n          task.isArchive ? (archivedTasks += 1) : (tasks += 1);\n          doneTasks += task?.isDone ? 1 : 0;\n          overDueTasks += task?.dueDate < Date.now() && !task.isDone ? 1 : 0;\n        });\n      });\n    }\n    return {\n      tasks,\n      archivedTasks,\n      overDueTasks,\n      doneTasks,\n      checklists,\n      doneChecklists,\n      todos,\n      doneTodos,\n      membersActivity,\n    };\n  };\n\n  const taskDetails = getTaskDetails(props);\n  if (!props.board)\n    return (\n      <section className=\"dashboard-overlay flex column \">\n        <LoaderSpinner />\n      </section>\n    );\n  return (\n    <section className=\"dashboard-overlay flex column fade-in\">\n      <button onClick={onBack} class=\"close-btn clean-btn\">\n        <Close />\n      </button>\n      <div className=\"dashboard-container flex column \">\n        <div className=\"header flex column justify-center align-center\">\n          <h1 className=\"dash-title\">{board.title}</h1>\n          <p className=\"date\">\n            Created at {new Date(board.createdAt).toLocaleString()}\n          </p>\n        </div>\n        <div className=\"info-container flex align-center\">\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{board.members?.length}</p>\n              <p className=\"below-num\">\n                <PeopleIcon className=\"icon\" />\n                Members\n              </p>\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.tasks}</p>\n              <p className=\"below-num\">\n                <DashboardIcon className=\"icon\" />\n                Tasks\n              </p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneTasks} Completed</p>\n              <p className=\"red\">{taskDetails.overDueTasks} Overdue </p>\n              <p className=\"yellow\">{taskDetails.archivedTasks} Archived </p>\n            </div>\n          </div>\n          <div className=\"info-box flex\">\n            <div className=\"flex column big-num-box\">\n              <p className=\"info-num\">{taskDetails.checklists}</p>\n              <p className=\"below-num\"><ListAltIcon className=\"icon\"/>{`Checklist${taskDetails.checklists !== 1 ? \"s\" : \"\"}`}</p>\n            </div>\n            <div className=\"flex column details\">\n              <p className=\"green\">{taskDetails.doneChecklists} Completed</p>\n              <p className=\"yellow\">{taskDetails.todos} Todos </p>\n              <p className=\"red\">\n                {taskDetails.todos - taskDetails.doneTodos} Unresolved todos{\" \"}\n              </p>\n            </div>\n          </div>\n        </div>\n        <div className=\"chart-container flex \">\n          <div className=\"chart flex align-center\">\n            <DoughnutChart board={board} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <ActivityChart membersActivity={taskDetails.membersActivity} />\n          </div>\n          <div className=\"chart flex align-center\">\n            <BarChart board={board} />\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    board: state.boardModule.board,\n  };\n}\nconst mapDispatchToProps = {\n  loadBoard,\n};\nexport const Dashboard = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(_Dashboard);\n","import { Homepage } from './pages/Homepage'\r\nimport { Workspace } from './pages/Workspace'\r\nimport { BoardApp } from './pages/BoardApp'\r\nimport { TaskDetails } from './pages/TaskDetails'\r\nimport { LoginSignup } from './pages/LoginSignup'\r\nimport { Dashboard } from './cmps/Dashboard/Dashboard'\r\n\r\n\r\nconst routes = [\r\n    {\r\n        path: '/workspace',\r\n        component: Workspace,\r\n        label: 'Workspace',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId',\r\n        component: BoardApp,\r\n        label: 'Board'\r\n    },\r\n    {\r\n        path: '/board/:boardId/dashboard',\r\n        component: Dashboard,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/board/:boardId/:listId/:taskId',\r\n        component: TaskDetails,\r\n        label: 'Task Details'\r\n    },\r\n    {\r\n        path: '/board/',\r\n        component: BoardApp,\r\n        label: 'Board',\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: LoginSignup,\r\n        isExact: true\r\n    },\r\n    {\r\n        path: '/',\r\n        component: Homepage,\r\n        label: 'Home ',\r\n        isExact: true\r\n\r\n    },\r\n\r\n]\r\n\r\nexport default routes;","import React, { useState } from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { MemberList } from \"../cmps/MemberList\";\r\nimport { BoardPreviewAdd } from \"./Workspace/BoardPreviewAdd\";\r\nimport { addBoard } from \"../store/board.actions\";\r\nimport HomeOutlinedIcon from \"@mui/icons-material/HomeOutlined\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport DashboardIcon from \"@mui/icons-material/Dashboard\";\r\nimport NotificationsNoneIcon from \"@mui/icons-material/NotificationsNone\";\r\nimport {\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n} from \"../store/app.actions\";\r\n\r\nfunction _AppHeader(props) {\r\n  const [isCreateShown, setCreateShown] = useState(false);\r\n  const onAddBoard = async (title, bgClr, bgImg) => {\r\n    const board = await props.addBoard(title, bgClr, bgImg);\r\n    setCreateShown(false);\r\n    props.history.push(`/board/${board._id}`);\r\n  };\r\n\r\n  const getNotifyCount = () => {\r\n    if (!props.userNotifications) return 0\r\n    const notifyCount = props.userNotifications.reduce((acc, notify) => {\r\n      if (notify.isNotRead) acc++\r\n      return acc;\r\n    }, 0)\r\n    return notifyCount\r\n  };\r\n  const isOnBoard = props.location.pathname.includes(\"board\");\r\n  return (\r\n    <>\r\n      <header\r\n        className={`main-header flex align-center ${isOnBoard ? \"on-board\" : \"\"\r\n          }`}\r\n      >\r\n        <div className=\"header-btn-container flex\">\r\n          <Link to=\"/\" className=\"header-btn\">\r\n            <HomeOutlinedIcon />\r\n          </Link>\r\n          <Link to=\"/workspace\" className=\"header-btn boards\">\r\n            <DashboardIcon className=\"icon\" />\r\n            Boards\r\n          </Link>\r\n        </div>\r\n        <Link to=\"/\" className=\"clean-link\">\r\n          <div className=\"logo\">\r\n            <DashboardIcon className=\"logo-icon\" />\r\n            <h1>Trellex</h1>\r\n          </div>\r\n        </Link>\r\n        {props.user ? (\r\n          <div className=\"header-btn-container flex\">\r\n            <button\r\n              className=\"header-btn\"\r\n              onClick={() => setCreateShown(!isCreateShown)}\r\n            >\r\n              <AddIcon className=\"icon\" />\r\n            </button>\r\n\r\n            <button\r\n              className=\"header-btn notify-btn\"\r\n              style={{\r\n                opacity: isOnBoard ? 1 : 0.4,\r\n                pointerEvents: isOnBoard ? 'auto' : 'none',\r\n              }}\r\n              onClick={(event) => {\r\n                if (!isOnBoard) return\r\n                props.setPosition({\r\n\r\n                  pos: { pageX: event.pageX, pageY: event.pageY },\r\n                  type: \"NOTIFICATION\",\r\n                });\r\n                props.setPopoverMenu(true);\r\n                props.togglePopover();\r\n              }}\r\n            >\r\n              <NotificationsNoneIcon className=\"icon\" />\r\n              {/* {props.userNotifications && props.userNotifications.length > 0 &&\r\n                <div className=\"notify-count\">{props.userNotifications ? getNotifyCount() : 0}</div>\r\n              } */}\r\n\r\n            </button>\r\n            <MemberList members={[props.user]} isInHeader={true} />\r\n          </div>\r\n        ) : (\r\n          <div className=\"header-btn-container flex login\">\r\n            <Link className=\"clean-link\" to=\"/login\">\r\n              <button className=\"header-btn boards\">Login</button>\r\n            </Link>\r\n          </div>\r\n        )}\r\n        <div\r\n          className={`overlay ${isCreateShown ? \"show\" : \"\"}`}\r\n          onClick={() => setCreateShown(false)}\r\n        ></div>\r\n      </header>\r\n      {isCreateShown && (\r\n        <BoardPreviewAdd\r\n          boardMode=\"true\"\r\n          setCreateShown={setCreateShown}\r\n          onAdd={onAddBoard}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    user: state.userModule.loggedinUser,\r\n    boards: state.boardModule.boards,\r\n    userNotifications: state.userModule.userNotifications,\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  addBoard,\r\n  setPosition,\r\n  togglePopover,\r\n  setPopoverMenu,\r\n};\r\n\r\nexport const AppHeader = withRouter(\r\n  connect(mapStateToProps, mapDispatchToProps)(_AppHeader)\r\n);\r\n","import React from 'react'\nimport EditIcon from '@material-ui/icons/Edit';\nimport CheckIcon from '@material-ui/icons/Check';\n\nexport function PopoverLabelPreview({ label, labelsId, toggleLabelCheck, toggleIsEditCreate, setLabelEdit, isFilter, isLabelFilterSelected }) {\n    return (\n        <>\n            {(!isFilter) ?\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                    <div className=\"flex align-center justify-center\">\n                        <EditIcon style={{ width: '16px', height: '16px', color: '#42526e' }}\n                            onClick={(event) => { event.stopPropagation(); toggleIsEditCreate(); setLabelEdit(label) }} />\n                    </div>\n                </li >\n                :\n                <li className=\"flex\" key={label.id} onClick={() => { toggleLabelCheck(label.id) }}>\n                    <div className=\"label-popover-preview flex\" style={{ backgroundColor: label.color }}>\n                        <span>{label.title}</span>\n                        {labelsId.length > 0 && labelsId.includes(label.id) &&\n                            <span style={{ lineHeight: '1rem' }}>\n                                <CheckIcon style={{ width: '16px', height: '16px' }} />\n                            </span>\n                        }\n                    </div>\n                </li>\n            }\n        </>\n    )\n}\n\n","import React from 'react'\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\n\nexport function PopoverLabelsListPreview({ labelIds, labels, handleChange, toggleIsCreate, toggleLabelCheck, search, setLabelEdit, toggleIsEditCreate }) {\n    return (\n        <div className=\"popover-labels\">\n            <input type=\"search\" placeholder=\"Search Labels\" onChange={handleChange} value={search} />\n            <h4>LABELS</h4>\n            <ul className=\"clean-list\">\n                {labels && labels.length > 0 && labels.filter(label => label.title.toLowerCase().includes(search.toLowerCase()))\n                    .map(label =>\n                        <PopoverLabelPreview\n                            key={label.id}\n                            label={label}\n                            labelsId={labelIds}\n                            toggleLabelCheck={toggleLabelCheck}\n                            toggleIsEditCreate={toggleIsEditCreate}\n                            setLabelEdit={setLabelEdit}\n                            toggleIsCreate={toggleIsCreate}\n\n                        />\n                    )}\n            </ul>\n            <button className=\"secondary-btn\" onClick={toggleIsEditCreate}>Create a new label</button>\n        </div>\n    )\n}\n\n","import CheckIcon from '@material-ui/icons/Check';\nimport React, { useState } from 'react';\nimport { boardService } from '../services/board.service';\n\nexport class ColorPalette extends React.Component {\n\n    state = {\n        photos: null,\n\n    }\n    colors = [\n        '#61bd4f',\n        '#f2d600',\n        '#ff9e1a',\n        '#eb5a46',\n        '#c277e0',\n        '#0279bf',\n        '#52e898',\n        '#ff78cb',\n        '#334563',\n        '#b3bac5',\n    ]\n\n    gradients = [\n        \"linear-gradient(to bottom, #000000, #434343)\",\n        \"linear-gradient(to right, #2980b9, #2c3e50)\",\n        \"linear-gradient(to right, #3494e6, #ec6ead)\",\n        \"linear-gradient(to left, #2f7336, #aa3a38)\",\n        \"linear-gradient(to top, #0052d4, #4364f7, #6fb1fc)\",\n        \"linear-gradient(to bottom, #e52d27, #b31217)\",\n    ]\n\n    async componentDidMount() {\n        const photos = await boardService.queryPhotos();\n        this.setState(prevState => ({ ...prevState, photos }))\n    }\n\n    async componentDidUpdate(prevProps) {\n        if (prevProps.search !== this.props.search) {\n            const photos = await boardService.queryPhotos(this.props.search);\n            this.setState(prevState => ({ ...prevState, photos }))\n        }\n    }\n\n\n    render() {\n        const { handleChange, selectedColor, isGradient, isImages, handleSearch, search } = this.props\n        const { photos } = this.state\n        return <div className=\"color-palette\">\n            {!isImages &&\n                this.colors.map(colorCode => {\n                    return <label key={colorCode} className=\"flex align-center justify-center\" style={{ background: colorCode }} name=\"label-color\" htmlFor={`color-${colorCode}`}>\n                        <input type=\"radio\" name=\"color\" id={`color-${colorCode}`} value={colorCode} onClick={handleChange} />\n                        {selectedColor === colorCode && <CheckIcon key={colorCode} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isGradient && !isImages &&\n                this.gradients.map(gradient => {\n                    return <label key={gradient} className=\"flex align-center justify-center\" style={{ background: gradient }} name=\"label-color\" htmlFor={`gradient-${gradient}`}>\n                        <input type=\"radio\" name=\"color\" id={`gradient-${gradient}`} value={gradient} onClick={handleChange} />\n                        {selectedColor === gradient && <CheckIcon key={gradient} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n            {\n                isImages && photos && photos.map((photo, idx) => {\n                    return <label key={idx} className=\"flex align-center justify-center\" style={{ width: '155px', height: '110px', backgroundImage: `url(${photo.urls.regular}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }} name=\"label-color\" htmlFor={`photo-${idx}`}>\n                        <input type=\"radio\" name=\"color\" id={`photo-${idx}`} value={photo.urls.full} onClick={handleChange} />\n                        {selectedColor === photo.url && <CheckIcon key={idx} style={{ width: '16px', height: '16px', color: 'white' }} />}\n                    </label>\n                })\n            }\n\n        </div >\n    }\n}","import { Component } from \"react\";\nimport { ColorPalette } from \"../ColorPalette\";\nexport class PopoverLabelCreateEdit extends Component {\n    state = {\n        title: '',\n        color: ''\n    }\n\n    componentDidMount() {\n        const { label } = this.props\n        this.setState({\n            title: label?.title || '',\n            color: label?.color || '',\n            id: label?.id || ''\n        })\n    }\n\n    componentWillUnmount() {\n        this.setState({\n            title: '',\n            color:  '',\n            id:  ''\n        })\n    }\n\n\n    handleChange = ({ target }) => {\n        const { name, value } = target\n        this.setState({ [name]: value })\n    }\n\n    onSubmitEditLabel = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitLabel({ ...this.state })\n    }\n\n    onSubmitCreate = () => {\n        if (!this.state.title || !this.state.color) return\n        this.props.submitCreateLabel({ ...this.state })\n    }\n\n    onRemoveLabel = () => {\n        this.props.removeLabel({ ...this.state })\n    }\n\n    render() {\n        const { title, color } = this.state\n        const { label } = this.props\n        return <>\n            <div className=\"label-add-content\">\n                <label htmlFor=\"label-input\">Name</label>\n                <input\n                    id=\"label-input\"\n                    type=\"text\"\n                    name=\"title\"\n                    value={title}\n                    onChange={this.handleChange}\n                    className=\"pop-over-input\"\n                />\n                <h4>Color</h4>\n                <ColorPalette handleChange={this.handleChange} selectedColor={color} />\n                <div className=\"flex space-between\">\n                    <button className=\"primary-btn\" onClick={this.onSubmitEditLabel} >\n                        {label && label.title ? 'Save' : 'Create'}\n                    </button>\n                    {label.title && <button className=\"danger-btn\" onClick={this.onRemoveLabel}>\n                        Delete\n                    </button>}\n                </div>\n            </div>\n        </>\n    }\n}","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { LoaderSpinner } from '../LoaderSpinner'\nimport { PopoverLabelsListPreview } from './PopoverLabelsListPreview'\nimport { PopoverLabelCreateEdit } from './PopoverLabelCreateEdit'\nimport { saveBoard, saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\nexport class _PopoverLabels extends Component {\n    state = {\n        search: '',\n        isEditCreate: false,\n        label: {\n            title: '',\n            color: '',\n        },\n        labels: null,\n        labelIds: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            labels: this.props.board.labels,\n            labelIds: this.props.currTaskDetails.labelIds,\n            currGroup\n        }))\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevState.isEditCreate) {\n            this.setState(prevState => ({ ...prevState, isEditCreate: false, label: { color: '', title: '' } }))\n        }\n    }\n\n\n    handleChange = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleLabelCheck = async (labelId) => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const updatedLabelsId = (currTaskDetails.labelIds.includes(labelId)) ?\n            currTaskDetails.labelIds.filter(currLabelId => currLabelId !== labelId) :\n            [...currTaskDetails.labelIds, labelId]\n        currTaskDetails.labelIds = updatedLabelsId\n        this.setState(prevState => ({ ...prevState, labelIds: updatedLabelsId }))\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    setLabelEdit = (label) => {\n        this.setState(prevState => ({ ...prevState, label }))\n    }\n\n    submitLabel = async (label) => {\n        const { board, saveBoard } = this.props\n        let labels;\n        if (label.id) {\n            labels = board.labels.map(currLabel => (currLabel.id === label.id) ? label : currLabel)\n        } else {\n            label.id = utilService.makeId()\n            labels = [...board.labels, label]\n        }\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        await saveBoard(board)\n    }\n\n    removeLabel = async (label) => {\n        const { board, saveBoard, currTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const labels = board.labels.filter(currLabel => currLabel.id !== label.id)\n        currTaskDetails.labelIds = currTaskDetails.labelIds.filter(currLabelId => currLabelId !== label.id)\n        this.setState(prevState => ({ ...prevState, labels: labels }))\n        this.toggleIsEditCreate()\n        board.labels = labels\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        await saveBoard(board)\n    }\n\n\n    toggleIsEditCreate = () => {\n        this.setState(prevState => ({ ...prevState, isEditCreate: !this.state.isEditCreate }))\n    }\n\n\n    render() {\n        const { currTaskDetails, title } = this.props\n        const { search, label, labels, isEditCreate, } = this.state\n        if (!currTaskDetails || !labels) return <></>\n        return (\n            <>\n                <Popover title={title} >\n                    {!isEditCreate &&\n                        <PopoverLabelsListPreview\n                            labels={labels}\n                            labelIds={currTaskDetails.labelIds}\n                            search={search}\n                            handleChange={this.handleChange}\n                            toggleLabelCheck={this.toggleLabelCheck}\n                            toggleIsEditCreate={this.toggleIsEditCreate}\n                            setLabelEdit={this.setLabelEdit}\n                        />\n                    }\n                    {isEditCreate && <PopoverLabelCreateEdit label={label} removeLabel={this.removeLabel} submitLabel={this.submitLabel} />}\n                </Popover >\n            </>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    setCurrTaskDetails\n};\n\nexport const PopoverLabels = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverLabels);\n","import React, { Component } from 'react'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\nexport class _PopoverMembers extends Component {\n    state = {\n        search: '',\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({\n            ...prevState,\n            currGroup,\n        }))\n    }\n\n    handleSearch = (e) => {\n        this.setState(prevState => ({\n            ...prevState,\n            search: e.target.value\n        }))\n    }\n\n    toggleMemberCheck = async (member) => {\n        const { board, currTaskDetails, addActivity, loggedinUser, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.members = currTaskDetails?.members || []\n        const selectedMembersIds = currTaskDetails.members.map(member => member._id) || []\n        const updatedMembers = (selectedMembersIds.includes(member._id)) ?\n            currTaskDetails.members.filter(currMember => currMember._id !== member._id) :\n            [...currTaskDetails.members, member]\n        currTaskDetails.members = updatedMembers\n        this.setState(prevState => ({ ...prevState, selectedMembers: updatedMembers, selectedMembersIds }))\n        if (member._id === loggedinUser._id) {\n            // addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-self' : 'add-self')\n            // setCurrTaskDetails(currTaskDetails)\n        } else {\n            // addActivity(board, currTaskDetails, (selectedMembersIds.includes(member._id)) ? 'remove-member' : 'add-member', member.fullname)\n        }\n        setCurrTaskDetails(currTaskDetails)\n        await this.props.saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { title, board, currTaskDetails } = this.props\n        const { search } = this.state\n\n        return (\n            <Popover title={title} >\n                <div className=\"members-popover\">\n                    <input type=\"search\" placeholder=\"Search members\" onChange={this.handleSearch} />\n                    <h4>BOARD MEMBERS</h4>\n\n                    <ul className=\"clean-list\">\n                        {board && board.members.length > 0 &&\n                            board.members.filter(member => member.fullname.toLowerCase().includes(search.toLowerCase()))\n                                .map((member, idx) => <PopoverMemberPreview\n                                    toggleMemberCheck={this.toggleMemberCheck}\n                                    member={member}\n                                    selectedMembersIds={currTaskDetails.members?.map(member => member._id) || []}\n                                    members={board.members}\n                                    key={idx}\n                                />)\n                        }\n                    </ul>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        popover: state.appModule.popover,\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverMembers = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMembers);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverChecklist extends Component {\n    state = {\n        txt: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    handlechange = (ev) => {\n        const txt = ev.target.value\n        this.setState(prevState => ({ ...prevState, txt }))\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, txt: '' }))\n    }\n\n    onAddChecklist = async (ev) => {\n        ev.preventDefault()\n        const { board, saveTaskDetails, currTaskDetails, togglePopover, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n\n        if (!currTaskDetails.checklists) currTaskDetails.checklists = []\n        const newList = {\n            id: utilService.makeId(),\n            title: this.state.txt,\n            todos: []\n        }\n        if (!newList.title) newList.title = 'Checklist'\n        currTaskDetails.checklists.push(newList)\n        togglePopover()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        this.clearState()\n        addActivity(board, currTaskDetails, 'add-checklist')\n    }\n\n    render() {\n        const { title } = this.props\n        const { txt } = this.state\n        return (\n            <div className=\"checklist-container\">\n                <Popover title={title} >\n                    <div>\n                        <form className=\"checklist-form\" onSubmit={this.onAddChecklist}>\n                            <label htmlFor=\"checklist\" className=\"pop-over-label\">Title</label>\n                            <input className=\"checklist-input\" id=\"checklist\" type=\"text\" value={txt} onChange={this.handlechange} placeholder=\"Enter a title...\" autoFocus />\n                            <button type=\"submit\" className=\"nch-button add-checklist-btn\">Add</button>\n                        </form>\n                    </div>\n                </Popover >\n            </div >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverChecklist = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverChecklist);\n","import { connect } from \"react-redux\";\nimport React, { Component } from 'react'\nimport { Popover } from './Popover'\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\n\nexport class _PopoverDate extends Component {\n    state = {\n        date: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const date = currTaskDetails.dueDate ? new Date(currTaskDetails.dueDate) : new Date()\n        this.setState(prevState => ({ ...prevState, date, currGroup }))\n    }\n\n    handleChange = (ev) => {\n        this.setState({ date: ev })\n    }\n\n    onSaveDueDate = async (date) => {\n        const { board, togglePopover, saveTaskDetails, currTaskDetails, addActivity, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        currTaskDetails.dueDate = date ? Date.parse(date) : null;\n        togglePopover()\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n        if (date) addActivity(board, currTaskDetails, 'set-date', this.dueDateFormat(currTaskDetails.dueDate))\n        else addActivity(board, currTaskDetails, 'remove-date')\n    }\n\n    dueDateFormat = (dueDate) => {\n        const currYear = new Date().getFullYear()\n        const dueYear = new Date(dueDate).getFullYear()\n        let strDate = ''\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { day: 'numeric' })} `\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { month: 'short' })} at `\n        if (dueYear !== currYear) {\n            strDate += `${dueYear} `\n        }\n        strDate += `${new Date(dueDate).toLocaleString('en-GB', { hour: 'numeric', minute: 'numeric', hour12: true }).toLocaleUpperCase()}`\n        return strDate\n    }\n\n    onRemoveDate = () => {\n        this.onSaveDueDate(null)\n    }\n\n    render() {\n        const { title } = this.props\n        const { date } = this.state\n        return (\n            <div className=\"date-picker-container\">\n                <Popover title={title} >\n                    <div>\n                        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                            <DatePicker\n                                autoOk\n                                variant=\"static\"\n                                value={date}\n                                openTo=\"date\"\n                                onChange={this.handleChange} />\n                        </MuiPickersUtilsProvider>\n                    </div>\n                    <div className=\"btn-container flex column\">\n                        <button className=\"primary-btn\" onClick={() => this.onSaveDueDate(date)} >Save</button>\n                        <button className=\"secondary-btn\" onClick={this.onRemoveDate}>Remove</button>\n                    </div>\n                </Popover >\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverDate = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverDate);\n\n","import React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { saveBoard, saveTaskDetails, addActivity } from '../../store/board.actions'\nimport { togglePopover, setCurrTaskDetails } from '../../store/app.actions'\n\n\nexport class _PopoverAttachment extends Component {\n    state = {\n        webUrlSrc: '',\n        webUrlName: ''\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        this.setState(prevState => ({ ...prevState, currGroup }))\n    }\n\n    uploadFile = async (ev) => {\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        try {\n            const res = await cloudinaryService.uploadFile(ev)\n            const attach = { name: res.original_filename, id: res.asset_id, createdAt: Date.now(), url: res.secure_url }\n            currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n            togglePopover()\n            setCurrTaskDetails(currTaskDetails)\n            await saveTaskDetails(board, currGroup, currTaskDetails)\n        }\n        catch (err) {\n            console.log('Error', err)\n        }\n    }\n\n    clearState = () => {\n        this.setState(prevState => ({ ...prevState, webUrlSrc: '', webUrlName: '' }))\n    }\n\n    handleChange = (ev) => {\n        const { value, name } = ev.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    onAttachmentClick = async () => {\n        const { webUrlSrc, webUrlName, currGroup } = this.state\n        const { board, currTaskDetails, saveTaskDetails, togglePopover, setCurrTaskDetails } = this.props\n        const { attachments } = currTaskDetails\n        if (webUrlSrc) {\n            const attach = {\n                id: utilService.makeId(),\n                name: (webUrlName) ? webUrlName : webUrlSrc,\n                url: (webUrlSrc.startsWith('http' || 'https')) ? webUrlSrc : 'https://' + webUrlSrc,\n                createdAt: Date.now(),\n                isWeb: true,\n            }\n            currTaskDetails.attachments = (attachments) ? [...attachments, attach] : [attach]\n            togglePopover()\n            setCurrTaskDetails(currTaskDetails)\n            await saveTaskDetails(board, currGroup, currTaskDetails)\n            this.clearState()\n        }\n    }\n\n    render() {\n        const { title } = this.props\n        const { webUrlSrc, webUrlName } = this.state\n        return (\n            <Popover title={title} >\n                <div className=\"attachment-container\">\n                    <div className=\"upload-preview\" >\n                        <label htmlFor=\"file-upload\">Computer</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                    <label htmlFor=\"url-upload\">Attach a link</label>\n                    <input type=\"text\" id=\"url-upload\" placeholder=\"Enter link url\" value={webUrlSrc} name='webUrlSrc' onChange={this.handleChange} />\n                    {webUrlSrc &&\n                        <>\n                            <label htmlFor=\"url-name-optional\">Link name (optional)</label>\n                            <input\n                                type=\"text\"\n                                id=\"url-name-optional\"\n                                name=\"webUrlName\"\n                                value={webUrlName}\n                                placeholder=\"Enter link name\"\n                                onChange={this.handleChange}\n                            />\n                        </>\n                    }\n                    <button class=\"primary-btn\" onClick={this.onAttachmentClick}>Attach</button>\n                </div>\n            </Popover >\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    saveBoard,\n    togglePopover,\n    addActivity,\n    setCurrTaskDetails\n};\n\nexport const PopoverAttachment = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverAttachment);\n\n\n","import React from 'react'\nimport { ColorPalette } from '../ColorPalette'\nimport { cloudinaryService } from '../../services/cloudinary-service'\nimport { Popover } from './Popover'\nimport { connect } from 'react-redux'\nimport { saveTaskDetails } from '../../store/board.actions'\nimport { setCurrTaskDetails } from '../../store/app.actions'\n\nexport class _PopoverCover extends React.Component {\n    state = {\n        isHeaderSelected: null,\n        isFullSelected: false,\n        selectedColor: false,\n        selectedPhoto: null\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        if (!currTaskDetails.style) {\n            currTaskDetails.style = {\n                coverMode: '',\n                bgColor: null,\n                bgUrl: null\n            }\n        }\n        switch (currTaskDetails.style.coverMode) {\n            case 'header':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isHeaderSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n\n                }))\n                break;\n            case 'full':\n                this.setState(prevState => ({\n                    ...prevState,\n                    isFullSelected: true,\n                    selectedColor: currTaskDetails.style?.bgColor || 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }))\n                break;\n            default:\n                this.setState(prevState => ({\n                    ...prevState,\n                    selectedColor: 'rgba(94, 108, 132, 0.3)',\n                    selectedPhoto: currTaskDetails.style?.bgUrl || null,\n                    currGroup\n                }\n                ))\n                break;\n        }\n    }\n\n    setHeaderSelected = async () => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isHeaderSelected: true,\n            isFullSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'header'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    setFullSelected = async () => {\n        const { currTaskDetails, board, saveTaskDetails, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: true,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = 'full'\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeCover = async () => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        this.setState(prevState => ({\n            ...prevState,\n            isFullSelected: false,\n            isHeaderSelected: false,\n        }))\n        currTaskDetails.style.coverMode = null\n        currTaskDetails.style.bgColor = null\n        currTaskDetails.style.bgUrl = null\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n\n    }\n\n    uploadFile = async (ev) => {\n        ev.preventDefault()\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const res = await cloudinaryService.uploadFile(ev)\n        currTaskDetails.style.bgUrl = res.secure_url\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    removeFile = async (attachId) => {\n        const { currTaskDetails, saveTaskDetails, board, setCurrTaskDetails } = this.props\n        const { currGroup } = this.state\n        const { attachments } = currTaskDetails\n        const attachs = attachments.filter(currAttach => currAttach.id !== attachId)\n        currTaskDetails.attachments = attachs\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    handleChange = async (event) => {\n        const { saveTaskDetails, currTaskDetails, board, setCurrTaskDetails } = this.props\n        const { isFullSelected, isHeaderSelected, currGroup } = this.state\n        const { value } = event.target\n        if (!isFullSelected && !isHeaderSelected) {\n            this.setState(prevState => ({\n                ...prevState,\n                isHeaderSelected: true,\n                selectedColor: value\n            }))\n            currTaskDetails.style.coverMode = 'header'\n        }\n        else {\n            this.setState(prevState => ({\n                ...prevState,\n                selectedColor: value\n            }))\n        }\n        currTaskDetails.style.bgColor = value\n        setCurrTaskDetails(currTaskDetails)\n        await saveTaskDetails(board, currGroup, currTaskDetails)\n    }\n\n    render() {\n        const { isHeaderSelected, isFullSelected, selectedColor, selectedPhoto } = this.state\n        const { title, currTaskDetails } = this.props\n        const { bgColor, bgUrl } = currTaskDetails.style\n        return (\n            <Popover title={title} >\n                <div className=\"cover-popover\" >\n                    <h4>SIZE</h4>\n                    <div className=\"cover-options flex space-between align-center\">\n                        <div className={`header-cover-preview ${isHeaderSelected ? 'selected' : ''}`} onClick={() => { this.setHeaderSelected() }}>\n                            {(bgUrl) ?\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundImage: `url(${bgUrl}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n\n                                    </div>\n                                </>\n                                :\n                                <>\n                                    <div className=\"header-section\" style={{ backgroundColor: bgColor }}>\n                                    </div>\n                                    <div style={{ padding: '6px 4px 4px 6px', position: 'relative' }}>\n                                        <div className=\"line\" style={{ width: '122px' }}></div>\n                                        <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                        <div className=\"dot\"></div>\n                                    </div>\n                                </>\n                            }\n                        </div>\n\n                        {(bgUrl) ?\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ display: 'flex', backgroundImage: `url(${bgUrl}`, backgroundSize: 'contain' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                            :\n                            <div onClick={() => this.setFullSelected()} className={`full-cover-preview ${isFullSelected ? 'selected' : ''}`} style={{ backgroundColor: bgColor, display: 'flex' }}>\n                                <div style={{ padding: '6px 4px 4px 6px', position: 'relative', alignSelf: 'flex-end' }}>\n                                    <div className=\"line\" style={{ width: '122px' }}></div>\n                                    <div className=\"line\" style={{ width: '98px', marginTop: '4px' }}></div>\n                                </div>\n                            </div>\n                        }\n\n                    </div>\n                    <div className=\"flex\">\n                        <button className=\"secondary-btn full\" onClick={this.removeCover}>Remove Cover</button>\n                    </div>\n                    <h4>COLOR</h4>\n                    <ColorPalette handleChange={this.handleChange} selectedColor={bgColor} />\n                    <h4>ATTACHMENT</h4>\n                    <div className=\"upload-preview\">\n                        <label className=\"secondary-btn\" htmlFor=\"file-upload\">Upload a cover image</label>\n                        <input type=\"file\" onChange={this.uploadFile} accept=\"img/*\" id=\"file-upload\" />\n                    </div>\n                </div>\n            </Popover >\n        )\n\n    }\n}\n\n\nfunction mapStateToProps(state) {\n    return {\n        currTaskDetails: state.appModule.currTaskDetails,\n        board: state.boardModule.board,\n    };\n}\nconst mapDispatchToProps = {\n    saveTaskDetails,\n    setCurrTaskDetails\n};\n\nexport const PopoverCover = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverCover);\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Popover } from './Popover'\nimport { utilService } from '../../services/util.service'\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport { setCurrTaskDetails, togglePopover } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\nexport class _PopoverMoveCopy extends Component {\n    state = {\n        selectedGroup: null,\n        selectedBoard: null,\n        selectedPosition: null,\n        taskTitle: ''\n\n    }\n\n    componentDidMount() {\n        const { board, currTaskDetails } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === currTaskDetails.id))\n        const task = currGroup.tasks.find(task => currTaskDetails.id === task.id)\n        const selectedPosition = currGroup.tasks.indexOf(task)\n        this.setState(prevState => ({\n            ...prevState,\n            selectedBoard: board,\n            selectedGroup: currGroup,\n            selectedPosition,\n            taskTitle: currTaskDetails.title,\n            currGroup\n        }))\n    }\n\n    handleChange = (e) => {\n        const { value, name } = e.target\n        this.setState(prevState => ({ ...prevState, [name]: value }))\n    }\n\n    handleBoardChange = (e) => {\n        const { value } = e.target\n        const { boards } = this.props\n        const selectedBoard = boards.find(board => board._id === value)\n        this.setState(prevState => ({ ...prevState, selectedBoard }))\n    }\n\n    handleGroupChange = (e) => {\n        const { value } = e.target\n        const { selectedBoard } = this.state\n        const selectedGroup = selectedBoard.groups.find(group => group.id === value)\n        this.setState(prevState => ({ ...prevState, selectedGroup }))\n    }\n\n\n    submitMoveSameBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, isCopy, togglePopover } = this.props\n        const fromGroup = selectedBoard.groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = selectedBoard.groups.indexOf(fromGroup)\n        const fromTask = selectedBoard.groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = selectedBoard.groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } :\n            selectedBoard.groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n        const toGroupIdx = selectedBoard.groups.indexOf(selectedGroup)\n        selectedBoard.groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup }))\n        togglePopover()\n        await saveBoard(selectedBoard);\n    }\n\n    submitMoveAnotherBoard = async () => {\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle, currGroup } = this.state\n        const { currTaskDetails, saveBoard, board, boards, isCopy, togglePopover } = this.props\n        const currBoard = boards.find(currBoard => currBoard._id === board._id)\n        const fromBoardIdx = boards.indexOf(currBoard)\n        const fromGroup = boards[fromBoardIdx].groups.find(group => group.id === currGroup.id)\n        const fromGroupIdx = boards[fromBoardIdx].groups.indexOf(fromGroup)\n        const fromTask = boards[fromBoardIdx].groups[fromGroupIdx].tasks.find(task => task.id === currTaskDetails.id)\n        const fromTaskIdx = boards[fromBoardIdx].groups[fromGroupIdx].tasks.indexOf(fromTask)\n        const task = (isCopy) ? { ...currTaskDetails, id: utilService.makeId(), title: taskTitle } : boards[fromBoardIdx].groups[fromGroupIdx].tasks.splice(fromTaskIdx, 1)\n\n        const toBoardIdx = boards.indexOf(selectedBoard)\n        const toGroup = boards[toBoardIdx].groups.find(group => group.id === selectedGroup.id)\n        const toGroupIdx = boards[toBoardIdx].groups.indexOf(toGroup)\n        boards[toBoardIdx].groups[toGroupIdx].tasks.splice(selectedPosition, 0, isCopy ? task : task[0])\n        this.setState(prevState => ({ ...prevState, currGroup: selectedGroup, selectedBoard: boards[toBoardIdx] }))\n        togglePopover()\n        await saveBoard(boards[fromBoardIdx])\n        await saveBoard(boards[toBoardIdx])\n\n\n    }\n\n    onSubmit = () => {\n        const { selectedBoard, selectedGroup, taskTitle } = this.state\n        const { board } = this.props\n        if (!selectedBoard || !selectedGroup || !taskTitle) return\n        if (board._id !== selectedBoard._id) this.submitMoveAnotherBoard()\n        else this.submitMoveSameBoard()\n    }\n\n    render() {\n        const { title, boards, isCopy } = this.props\n        const { selectedBoard, selectedGroup, selectedPosition, taskTitle } = this.state\n        if (!(selectedBoard)) return <></>\n        return (\n            <Popover title={title} >\n                <div className=\"popover-move-content\">\n                    {isCopy && <>\n                        <label>Title</label>\n                        <input type=\"text\" value={taskTitle} name=\"taskTitle\" onChange={this.handleChange} />\n                        <label>Copy to</label>\n                    </>}\n                    <div className=\"move-section flex wrap column\">\n                        <FormControl variant=\"filled\" className=\"choose-board clean-mui-arrow full\" >\n                            <InputLabel id=\"selectedBoard\">Board</InputLabel>\n                            <Select\n                                labelId=\"selectedBoard\"\n                                id=\"selectedBoard\"\n                                value={selectedBoard._id}\n                                name=\"selectedBoard\"\n                                inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                onChange={this.handleBoardChange}\n                            >\n                                {boards.map(board => <MenuItem value={board._id}>{board.title}</MenuItem>)}\n                            </Select>\n                        </FormControl>\n\n                        <div className=\"flex\">\n                            <FormControl variant=\"filled\" className=\"choose-list clean-mui-arrow full\" >\n                                <InputLabel id=\"selectedGroup\">List</InputLabel>\n                                <Select\n                                    name=\"selectedGroup\"\n                                    labelId=\"selectedGroup\"\n                                    id=\"selectedGroup\"\n                                    value={selectedGroup.id}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleGroupChange}\n                                >\n                                    {selectedBoard.groups.map(group => <MenuItem value={group.id}>{group.title}</MenuItem>)}\n                                </Select>\n                            </FormControl>\n                            <FormControl variant=\"filled\" className=\"choose-position clean-mui-arrow \" >\n                                <InputLabel id=\"position-select\">Position</InputLabel>\n                                <Select\n                                    name=\"selectedPosition\"\n                                    labelId=\"position-select\"\n                                    id=\"position-select\"\n                                    value={selectedPosition}\n                                    inputProps={{ MenuProps: { disableScrollLock: true } }}\n                                    disableUnderline={true}\n                                    onChange={this.handleChange}\n                                >\n                                    {(selectedGroup.tasks.length > 0) ?\n                                        Array.from(Array(selectedGroup.tasks.length + 1), (e, i) => <MenuItem value={i}>{i}</MenuItem>) :\n                                        <MenuItem value={0}>{0}</MenuItem>\n                                    }\n                                </Select>\n                            </FormControl>\n                        </div>\n                    </div>\n                    <button className=\"primary-btn\" onClick={this.onSubmit}>{!isCopy ? 'Move' : 'Create card'}</button>\n\n                </div>\n            </Popover >\n\n        )\n\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        boards: state.boardModule.boards,\n        currTaskDetails: state.appModule.currTaskDetails,\n    };\n}\nconst mapDispatchToProps = {\n    setCurrTaskDetails,\n    saveBoard,\n    togglePopover\n\n};\n\nexport const PopoverMoveCopy = connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(_PopoverMoveCopy);","import { Component } from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from \"../ActivitiesList\"\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\nimport RestoreFromTrashIcon from '@mui/icons-material/RestoreFromTrash';\nimport { setPosition } from '../../store/app.actions'\nimport SearchIcon from '@mui/icons-material/Search';\n\n\n\nclass _PopoverMenu extends Component {\n    render() {\n        const { board } = this.props\n        const { title, setPosition } = this.props\n        if (!board) return <div></div>\n        const CommAndAct = board.activities\n        CommAndAct.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n        const { bgClr, bgImg } = board.style\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <div className=\"menu-details \">\n                    <ul className=\"clean-list menu-list\">\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_BACKGROUND' }); }}>\n                            {(bgImg) ?\n                                <span className=\"menu-bg-span\" style={{ backgroundImage: `url(${bgImg}`, backgroundPosition: 'center', backgroundRepeat: 'no-repeat', backgroundSize: 'cover' }}></span> :\n                                <span className=\"menu-bg-span\" style={{ background: board.style.bgClr }}></span>\n                            }\n\n                            <span className=\"menu-title\">Change background</span>\n                        </li>\n\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_FILTER_CARDS' }); }}>\n                            <SearchIcon />\n                            <span className=\"menu-title\" >Search cards</span>\n                        </li>\n                        <li onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_ARCHIVE' }); }}>\n                            <RestoreFromTrashIcon />\n                            <span className=\"menu-title\" >Archive</span>\n                        </li>\n                    </ul>\n                    <div className=\"task-activities-header flex align-center\">\n                        <FormatListBulletedIcon />\n                        <h3 className=\"menu-activity\">Activity</h3>\n                    </div>\n                    <ActivitiesList CommAndAct={CommAndAct} isShowActivities={true} currTask={null} />\n\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\n\nconst mapDispatchToProps = {\n    setPosition,\n}\n\n\nexport const PopoverMenu = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenu)\n\n{/* <ActivitiesList CommAndAct={CommAndAct} isShowActivities={isShowActivities} currTask={currTask}/> */ }","import { Link } from \"react-router-dom\";\r\nimport { TaskLabels } from \"./TaskLabels\";\r\nimport { TaskDetailsPreview } from \"./TaskDetailsPreview\";\r\nimport { TaskDatePreview } from \"./TaskDatePreview\";\r\nimport { MemberList } from \"../MemberList\";\r\nimport CheckBoxOutlinedIcon from \"@mui/icons-material/CheckBoxOutlined\";\r\nimport SubjectOutlinedIcon from \"@mui/icons-material/SubjectOutlined\";\r\nimport ChatBubbleOutlineRoundedIcon from \"@mui/icons-material/ChatBubbleOutlineRounded\";\r\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\r\n\r\nexport function TaskMenuPreview({ task, groupId, boardLabels, taskUrl }) {\r\n  const {\r\n    style,\r\n    labelIds,\r\n    dueDate,\r\n    title,\r\n    description,\r\n    comments,\r\n    attachments,\r\n    checklists,\r\n    media\r\n  } = task;\r\n\r\n  const getChecklistData = (isDone) => {\r\n    let todos = 0;\r\n    let doneTodos = 0;\r\n    checklists.forEach((checklist) => {\r\n      todos += checklist.todos.length;\r\n      checklist.todos.forEach((todo) => {\r\n        if (todo.isDone) doneTodos += 1;\r\n      });\r\n    });\r\n    if (isDone) return todos === doneTodos;\r\n    return `${doneTodos}/${todos}`;\r\n  };\r\n\r\n  return (\r\n    <Link to={taskUrl} className=\"clean-link\">\r\n      <article\r\n        className=\"task-preview-container edit\"\r\n        style={{ borderRadius: 3, minWidth: 240 }}\r\n      >\r\n        {style?.bgUrl && (\r\n          <img\r\n            className=\"task-cover-img\"\r\n            src={style.bgUrl}\r\n            style={{\r\n              backgroundColor: \"white\",\r\n              borderRadius: \"3px\",\r\n              objectFit: \"contain\",\r\n              maxHeight: 240,\r\n            }}\r\n            alt=\"\"\r\n          />\r\n        )}\r\n\r\n        {style?.bgColor && !style?.bgUrl && (\r\n          <div\r\n            className=\"task-cover\"\r\n            style={{ background: task.style.bgColor }}\r\n          ></div>\r\n        )}\r\n\r\n        <div\r\n          className=\"task-preview clean-link \"\r\n          style={\r\n            style?.bgUrl && {\r\n              position: \"relative\",\r\n              top: \"-8px\",\r\n              marginBottom: \"-8px\",\r\n              borderRadius: \"0 0 3px 3px\",\r\n            }\r\n          }\r\n        >\r\n          {labelIds?.length > 0 && (\r\n            <TaskLabels labelIds={labelIds} boardLabels={boardLabels} />\r\n          )}\r\n          {media?.videoUrl && (\r\n            <div className=\"video flex\" onDrag={(ev) => ev.stopPropagation()}>\r\n              <video width={\"100%\"} controls>\r\n                <source src={task.media.videoUrl} type=\"video/mp4\" />\r\n              </video>\r\n            </div>\r\n          )}\r\n          {media?.audioUrl && (\r\n            <div className=\"audio\">\r\n              <audio controls src={task.media.audioUrl} />\r\n            </div>\r\n          )}\r\n          <p className=\"task-title\">{title}</p>\r\n          <div className=\"task-preview-icons flex align-center\">\r\n            {dueDate && (\r\n              <TaskDatePreview\r\n                dueDate={dueDate}\r\n                isDone={task.isDone}\r\n                taskId={task.id}\r\n                groupId={groupId}\r\n                noHover={true}\r\n              />\r\n            )}\r\n            {description?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<SubjectOutlinedIcon className=\"icon\" />}\r\n              />\r\n            )}\r\n            {comments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<ChatBubbleOutlineRoundedIcon className=\"icon msg\" />}\r\n                txt={comments.length}\r\n              />\r\n            )}\r\n            {attachments?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<AttachFileIcon className=\"icon attach\" />}\r\n                txt={attachments.length}\r\n              />\r\n            )}\r\n            {checklists?.length > 0 && (\r\n              <TaskDetailsPreview\r\n                icon={<CheckBoxOutlinedIcon className=\"icon\" />}\r\n                txt={getChecklistData()}\r\n                isDone={getChecklistData(true)}\r\n              />\r\n            )}\r\n            {task?.members && (\r\n              <MemberList members={task.members} isInPreview={true} />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </article>\r\n    </Link>\r\n  );\r\n}\r\n","import React, { Component } from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { TaskMenuPreview } from \"../TaskPreview/TaskMenuPreview\"\nimport { setPosition } from '../../store/app.actions'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\n\n\n\nclass _PopoverMenuArchive extends React.Component {\n\n\n    render() {\n        const { board, setPosition } = this.props\n        let tasks = board.groups.map(group => group.tasks).flat()\n        tasks = tasks.filter(task => task.isArchive)\n        return <div className=\"board-menu\">\n            <Popover title='Archive'>\n                <div class=\"pop-over-archive\">\n                    <span\n                        class=\"back\"\n                        onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                        <ArrowBackIosIcon />\n                    </span>\n                    <div class=\"card-preview-container\">\n                        {tasks.map(task => {\n                            const taskGroup = board.groups.find(group => group.tasks.some(currTask => currTask.id === task.id));\n                            return <TaskMenuPreview\n                                task={task}\n                                id={task.id}\n                                key={task.id}\n                                index={task.orgIdx}\n                                groupId={taskGroup.id}\n                                boardId={board._id}\n                                boardLabels={board.labels}\n                                taskUrl={`/board/${board._id}/${taskGroup.id}/${task.id}`}\n                            />\n                        })}\n                    </div>\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n\n    }\n}\nconst mapDispatchToProps = {\n    setPosition\n};\n\nexport const PopoverMenuArchive = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuArchive)\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ColorPalette } from '../ColorPalette'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { setPosition } from '../../store/app.actions'\nimport { saveBoard } from '../../store/board.actions'\n\n\n\nclass _PopoverMenuBackground extends React.Component {\n    state = {\n        search: ''\n    }\n\n    handleChange = (event) => {\n        const { board, saveBoard } = this.props\n        const { value } = event.target\n        if (value.includes('http' || 'https')) {\n            board.style.bgImg = value\n            board.style.bgClr = null\n        }\n        else {\n            board.style.bgClr = value\n            board.style.bgImg = null\n        }\n        saveBoard(board)\n    }\n\n    handleSearch = (event) => {\n        const { value, name } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            search: value\n        }))\n\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { search } = this.state\n\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    class=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div class=\"pop-over-background\">\n                    <div class=\"background-styles-container\">\n                        <h4>Colors</h4>\n                        <ColorPalette selectedColor={board.style.bgClr} isGradient={true} handleChange={this.handleChange} />\n                        <h4>Images</h4>\n                        <input type=\"search\" value={search} name=\"search\" onChange={this.handleSearch} />\n                        <ColorPalette selectedColor={board.style.bgClr} isImages={true} search={search} handleSearch={this.handleSearch} handleChange={this.handleChange} />\n\n                    </div>\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n    }\n}\nconst mapDispatchToProps = {\n    saveBoard,\n    setPosition\n};\n\nexport const PopoverMenuBackground = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuBackground)\n","import React, { Component } from \"react\";\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ActivitiesList } from '../ActivitiesList'\nimport { withRouter } from \"react-router\";\n\n\n\n\nclass _PopoverNotification extends React.Component {\n    state = {\n        userNotifications: null,\n        boardId: null\n    }\n\n    componentDidMount = () => {\n        this.setNotifications()\n    }\n\n    setNotifications = () => {\n        const { board } = this.props\n        const { loggedinUser } = this.props\n        if (!board) return\n        const userTasks = []\n        board.groups.forEach(group => {\n            group.tasks.forEach(task => {\n                if (!task.members || !task.members.length) return\n                task.members.forEach(currMember => {\n                    if (currMember._id === loggedinUser._id) userTasks.push(task.id)\n                })\n            })\n        })\n\n        let userNotifications = board.activities.filter(activity => {\n            return userTasks.includes(activity.task.id)\n        })\n\n        userNotifications = JSON.parse(JSON.stringify(userNotifications))\n        userNotifications.forEach(notify => {\n            notify.isNotRead = true;\n            notify.isNotify = true;\n        });\n        userNotifications.sort((a, b) => (a.createdAt < b.createdAt) ? 1 : ((b.createdAt < a.createdAt) ? -1 : 0))\n\n        this.setState(prevState => ({ ...prevState, userNotifications, boardId: board._id }))\n    }\n\n    componentDidUpdate = () => {\n        const { board } = this.props\n        const { boardId } = this.state\n        if (!board) return\n        if (board._id !== boardId) {\n            this.setNotifications()\n        }\n    }\n    selectNotification = (notify) => {\n        const { board } = this.props\n        const currGroup = board.groups.find(group => group.tasks.some(task => task.id === notify.task.id))\n        notify.isNotRead = false\n        this.NotifyUpdate(notify)\n        this.props.history.push(`/board/${board._id}/${currGroup.id}/${notify.task.id}`)\n    }\n\n    NotifyUpdate = (notify) => {\n        const { userNotifications } = this.state\n        const notifyIdx = userNotifications.findIndex(currNotify => currNotify.id === notify.id)\n        userNotifications[notifyIdx] = notify\n        this.setState(prevState => ({ ...prevState, userNotifications }))\n    }\n\n    render() {\n        const { title } = this.props\n        const { userNotifications } = this.state\n        if (!userNotifications) return <></>\n\n        return <div className=\"board-menu notification-popover\">\n            <Popover title={title}>\n                <ActivitiesList CommAndAct={userNotifications} isShowActivities={true} currTask={null} selectNotification={this.selectNotification} />\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        loggedinUser: state.userModule.loggedinUser,\n    }\n}\n\nexport const PopoverNotification = withRouter(connect(mapStateToProps, null)(_PopoverNotification))\n","import React from \"react\"\nimport { connect } from 'react-redux'\nimport { Popover } from \"./Popover\"\nimport { ColorPalette } from '../ColorPalette'\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport { PopoverLabelPreview } from './PopoverLabelPreview'\nimport { PopoverMemberPreview } from './PopoverMemberPreview'\nimport { setPosition } from '../../store/app.actions'\nimport { loadBoard, setFilterBy } from '../../store/board.actions'\n\n\n\nclass _PopoverMenuSearchCard extends React.Component {\n    state = {\n        filterBy: {\n            search: '',\n            labels: [],\n            members: []\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            filterBy: {\n                search: this.props.filterBy?.search || '',\n                labels: this.props.filterBy?.labels || [],\n                members: this.props.filterBy?.members || []\n            }\n        })\n    }\n\n    handleSearch = (event) => {\n        const { loadBoard, board, setFilterBy } = this.props\n        const { value, name } = event.target\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, [name]: value }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n\n\n    toggleLabelCheck = (labelId) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const labels = filterBy.labels.includes(labelId) ? filterBy.labels.filter(currLabelId => currLabelId !== labelId) : [...filterBy.labels, labelId]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, labels }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    toggleMemberCheck = (member) => {\n        const { board, loadBoard, setFilterBy } = this.props\n        const { filterBy } = this.state\n        const members = filterBy.members.includes(member._id) ? filterBy.members.filter(currMemeberId => currMemeberId !== member._id) : [...filterBy.members, member._id]\n        this.setState(prevState => ({\n            ...prevState,\n            filterBy: { ...prevState.filterBy, members }\n        }), () => {\n            setFilterBy(this.state.filterBy)\n            loadBoard(board._id)\n        })\n    }\n\n    render() {\n        const { board, title, setPosition } = this.props\n        if (!board) return <></>\n        const { search, filterBy } = this.state\n        return <div className=\"board-menu\">\n            <Popover title={title}>\n                <span\n                    class=\"back\"\n                    onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'BOARD_SHOW_MENU' }) }}>\n                    <ArrowBackIosIcon />\n                </span>\n                <div className=\"popover-filter\">\n                    <p>Search by task title</p>\n                    <input type=\"search\" value={filterBy.search} name=\"search\" onChange={this.handleSearch} placeholder=\"Enter task title\" autoFocus />\n                    <hr />\n                    <p>Filter by task labels</p>\n                    {board.labels.map(label => <PopoverLabelPreview key={label.id} label={label} labelsId={filterBy.labels} isFilter={true} toggleLabelCheck={this.toggleLabelCheck} />)}\n                    <hr />\n                    <p>Filter by members</p>\n                    {board.members.map(member => <PopoverMemberPreview key={member.id} member={member} selectedMembersIds={filterBy.members} toggleMemberCheck={this.toggleMemberCheck} />)}\n                </div>\n            </Popover>\n        </div>\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n        board: state.boardModule.board,\n        filterBy: state.boardModule.filterBy\n    }\n}\nconst mapDispatchToProps = {\n    setPosition,\n    loadBoard,\n    setFilterBy\n};\n\nexport const PopoverMenuSearchCard = connect(mapStateToProps, mapDispatchToProps)(_PopoverMenuSearchCard)\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PopoverLabels } from \"./PopoverLabels\";\nimport { PopoverMembers } from \"./PopoverMembers\";\nimport { PopoverChecklist } from \"./PopoverChecklist\";\nimport { PopoverDate } from \"./PopoverDate\";\nimport { PopoverAttachment } from \"./PopoverAttachment\";\nimport { PopoverCover } from \"./PopoverCover\";\nimport { PopoverMoveCopy } from \"./PopoverMoveCopy\";\nimport { PopoverMenu } from \"./PopoverMenu\";\nimport { PopoverMenuArchive } from \"./PopoverMenuArchive\";\nimport { PopoverMenuBackground } from \"./PopoverMenuBackground\"\nimport { PopoverNotification } from \"./PopoverNotification\"\nimport { PopoverMenuSearchCard } from './PopoverMenuSearchCard'\n\n{/* <button className=\"secondary-btn action-btn\" onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'LABELS' }); togglePopover() }}>\n<div className=\"action-btn-content flex \" >\n    <LabelIcon />\n    <span>Labels</span>\n</div>\n</button>\n\n<button onClick={(event) => { setPosition({ pos: { pageX: event.pageX, pageY: event.pageY }, type: 'CHECKLIST' }); }}>\n<div>\n    <CheckboxIcon />\n    <span>Checklist</span>\n</div>\n</button> */}\n\n\n// export const setPosition = ({ pos, type}) => {\n//     return (dispatch) => {\n//         dispatch({\n//             type: \"SET_POSITION\",\n//             pos: { ...pos, type },\n//         })\n//     }\n// }\n\n\n\nconst _PopoverDynamicCmp = (props) => {\n    const { type } = props.popover.pos;\n    switch (type) {\n        case \"LABELS\":\n            return <PopoverLabels  {...props} title=\"Labels\" />\n\n        case \"MEMBERS\":\n            return <PopoverMembers {...props} title=\"Members\" />\n\n        case \"CHECKLIST\":\n            return <PopoverChecklist {...props} title=\"Checklist\" />\n\n        case \"DATE\":\n            return <PopoverDate {...props} title=\"Date\" />\n\n        case \"ATTACHMENT\":\n            return <PopoverAttachment {...props} title=\"Attach from...\" />\n\n        case \"COVER\":\n            return <PopoverCover {...props} title=\"Cover\" />\n\n        case \"MOVE\":\n            return <PopoverMoveCopy {...props} isCopy={false} title=\"Move to\" />\n\n        case \"COPY\":\n            return <PopoverMoveCopy {...props} isCopy={true} title=\"Copy\" />\n\n        case \"BOARD_SHOW_MENU\":\n            return <PopoverMenu {...props} title=\"Menu\" />\n\n        case \"BOARD_SHOW_ARCHIVE\":\n            return <PopoverMenuArchive {...props} title=\"Archive\" />\n\n        case \"BOARD_SHOW_BACKGROUND\":\n            return <PopoverMenuBackground {...props} title=\"Change background\" />\n\n        case \"BOARD_FILTER_CARDS\":\n            return <PopoverMenuSearchCard {...props} title=\"Search cards\" />\n\n        case \"NOTIFICATION\":\n            return <PopoverNotification {...props} title=\"Notifications\" />\n\n        default:\n            return <></>\n    }\n};\n\nfunction mapStateToProps(state) {\n    return {\n        popover: state.appModule.popover,\n    };\n}\n\nexport const PopoverDynamicCmp = connect(\n    mapStateToProps,\n    null\n)(_PopoverDynamicCmp);\n\n\n// setPopoverPos(elRect) {\n//     const { pos } = this.props.popover\n//     const { width, height } = elRect\n//     let posX = (window.innerWidth - pos.pageX > 200) ? pos.pageX - 200 : pos.pageX - 200;\n//     let posY = (window.innerHeight - pos.pageY > 200) ? pos.pageY + 20 : pos.pageY - 200;\n//     posX = (posX + width > window.innerWidth) ? window.innerWidth - width - 20 : posX;\n//     posY = (posY + height > window.innerHeight) ? window.innerHeight - height - 20 : posY;\n//     return { left: posX, top: posY }\n// }","import React from 'react'\r\n// const { Switch, Route } = ReactRouterDOM\r\nimport { Switch, Route } from 'react-router'\r\n\r\nimport routes from './routes'\r\nimport { AppHeader } from './cmps/AppHeader'\r\nimport { socketService } from './services/socket.service'\r\nimport { PopoverDynamicCmp } from './cmps/Popover/PopoverDynamicCmp'\r\n\r\nexport class RootCmp extends React.Component {\r\n    componentWillUnmount() {\r\n        socketService.terminate()\r\n    }\r\n    render() {\r\n        return (\r\n            <div>\r\n                <AppHeader />\r\n                <main>\r\n                    {routes.map(route => <Route key={route.path} exact={route.isExact} component={route.component} path={route.path} />)}\r\n                </main>\r\n                <PopoverDynamicCmp />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport { store } from './store/store'\nimport { RootCmp } from './root-cmp';\nimport './assets/styles/main.scss';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <RootCmp />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}